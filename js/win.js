(function() {
  /*
  000   000  000  000   000  
  000 0 000  000  0000  000  
  000000000  000  000 0 000  
  000   000  000  000  0000  
  00     00  000  000   000  
  */
  var $, Win, _, elem, empty, fs, keyinfo, log, popup, pos, post, prefs, scheme, slash, stopEvent, str, title, valid;

  ({post, keyinfo, title, scheme, stopEvent, prefs, slash, elem, empty, valid, popup, pos, str, fs, log, $, _} = require('./kxk'));

  Win = class Win {
    constructor(opt) {
      var electron;
      
      // 00     00  00000000  000   000  000   000   0000000    0000000  000000000  000   0000000   000   000  
      // 000   000  000       0000  000  000   000  000   000  000          000     000  000   000  0000  000  
      // 000000000  0000000   000 0 000  000   000  000000000  000          000     000  000   000  000 0 000  
      // 000 0 000  000       000  0000  000   000  000   000  000          000     000  000   000  000  0000  
      // 000   000  00000000  000   000   0000000   000   000   0000000     000     000   0000000   000   000  
      this.onMenuAction = this.onMenuAction.bind(this);
      //  0000000   0000000   000   000  000000000  00000000  000   000  000000000  
      // 000       000   000  0000  000     000     000        000 000      000     
      // 000       000   000  000 0 000     000     0000000     00000       000     
      // 000       000   000  000  0000     000     000        000 000      000     
      //  0000000   0000000   000   000     000     00000000  000   000     000     
      this.onContextMenu = this.onContextMenu.bind(this);
      
      // 000   000  00000000  000   000
      // 000  000   000        000 000
      // 0000000    0000000     00000
      // 000  000   000          000
      // 000   000  00000000     000
      this.onKeyDown = this.onKeyDown.bind(this);
      this.onKeyUp = this.onKeyUp.bind(this);
      this.opt = opt;
      window.onerror = function(msg, source, line, col, err) {
        var srcmap;
        srcmap = require('./srcmap');
        srcmap.logErr(err);
        return true;
      };
      prefs.init();
      if (this.opt.icon) {
        log.slog.icon = slash.fileUrl(slash.join(this.opt.dir, this.opt.icon));
      }
      electron = require('electron');
      this.win = window.win = electron.remote.getCurrentWindow();
      this.id = window.winID = this.win.id;
      this.modifiers = '';
      this.userData = slash.userData();
      post.on('menuAction', this.onMenuAction);
      window.titlebar = new title(this.opt);
      document.body.addEventListener('contextmenu', this.onContextMenu);
      document.addEventListener('keydown', this.onKeyDown);
      document.addEventListener('keyup', this.onKeyUp);
      if (this.opt.scheme !== false) {
        scheme.set(prefs.get('scheme', 'dark'));
      }
      if (_.isFunction(this.opt.onShow)) {
        this.win.on('ready-to-show', this.opt.onShow);
      }
      if (_.isFunction(this.opt.onLoad)) {
        this.win.webContents.on('did-finish-load', this.opt.onLoad);
      }
    }

    
    // 0000000   0000000  00000000   00000000  00000000  000   000   0000000  000   000   0000000   000000000
    //000       000       000   000  000       000       0000  000  000       000   000  000   000     000
    //0000000   000       0000000    0000000   0000000   000 0 000  0000000   000000000  000   000     000
    //     000  000       000   000  000       000       000  0000       000  000   000  000   000     000
    //0000000    0000000  000   000  00000000  00000000  000   000  0000000   000   000   0000000      000
    screenshot() {
      return this.win.capturePage((img) => {
        var file;
        file = slash.resolve(`~/Desktop/${this.opt.pkg.name}-screenshot.png`);
        return fs.writeFile(file, img.toPNG(), function(err) {
          if (valid(err)) {
            return log('saving screenshot failed', err);
          } else {
            return log(`screenshot saved to ${file}`);
          }
        });
      });
    }

    onMenuAction(action, args) {
      switch (action) {
        case 'Screenshot':
          return this.screenshot();
        case 'About':
          return post.toMain('showAbout');
        case 'Save':
          return post.toMain('saveBuffer');
        case 'Quit':
          return post.toMain('quitApp');
      }
    }

    onContextMenu(event) {
      var absPos, items;
      absPos = pos(event);
      if (absPos == null) {
        absPos = pos($("#main").getBoundingClientRect().left, $("#main").getBoundingClientRect().top);
      }
      items = _.clone(window.titlebar.menuTemplate());
      if (_.isFunction(this.opt.context)) {
        items = this.opt.context(items);
      } else {
        items.unshift({
          text: 'Clear',
          accel: 'ctrl+k'
        });
      }
      return popup.menu({
        items: items,
        x: absPos.x,
        y: absPos.y,
        onClose: function() {
          return post.emit('contextClosed');
        }
      });
    }

    onKeyDown(event) {
      var info;
      if ('unhandled' !== window.titlebar.handleKey(event, true)) {
        return stopEvent(event);
      }
      info = keyinfo.forEvent(event);
      this.modifiers = info.mod;
      if (info.combo) {
        info.event = event;
        return post.emit('combo', info.combo, info);
      }
    }

    onKeyUp(event) {
      var info;
      info = keyinfo.forEvent(event);
      return this.modifiers = info.mod;
    }

  };

  module.exports = Win;

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2luLmpzIiwic291cmNlUm9vdCI6Ii4iLCJzb3VyY2VzIjpbIi4uL2NvZmZlZS93aW4uY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQUE7Ozs7Ozs7QUFBQSxNQUFBLENBQUEsRUFBQSxHQUFBLEVBQUEsQ0FBQSxFQUFBLElBQUEsRUFBQSxLQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsRUFBQSxHQUFBLEVBQUEsS0FBQSxFQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUEsS0FBQSxFQUFBLE1BQUEsRUFBQSxLQUFBLEVBQUEsU0FBQSxFQUFBLEdBQUEsRUFBQSxLQUFBLEVBQUE7O0VBUUEsQ0FBQSxDQUFFLElBQUYsRUFBUSxPQUFSLEVBQWlCLEtBQWpCLEVBQXdCLE1BQXhCLEVBQWdDLFNBQWhDLEVBQTJDLEtBQTNDLEVBQWtELEtBQWxELEVBQXlELElBQXpELEVBQStELEtBQS9ELEVBQXNFLEtBQXRFLEVBQTZFLEtBQTdFLEVBQW9GLEdBQXBGLEVBQXlGLEdBQXpGLEVBQThGLEVBQTlGLEVBQWtHLEdBQWxHLEVBQXVHLENBQXZHLEVBQTBHLENBQTFHLENBQUEsR0FBZ0gsT0FBQSxDQUFRLE9BQVIsQ0FBaEg7O0VBRU0sTUFBTixNQUFBLElBQUE7SUFFSSxXQUFhLElBQUEsQ0FBQTtBQUVULFVBQUEsUUFBQTs7Ozs7OztVQTRESixDQUFBLG1CQUFBLENBQUEsd0JBNURJOzs7Ozs7VUEwRUosQ0FBQSxvQkFBQSxDQUFBLHlCQTFFSTs7Ozs7OztVQWtHSixDQUFBLGdCQUFBLENBQUE7VUFZQSxDQUFBLGNBQUEsQ0FBQTtNQWhIYyxJQUFDLENBQUE7TUFFWCxNQUFNLENBQUMsT0FBUCxHQUFpQixRQUFBLENBQUMsR0FBRCxFQUFNLE1BQU4sRUFBYyxJQUFkLEVBQW9CLEdBQXBCLEVBQXlCLEdBQXpCLENBQUE7QUFFYixZQUFBO1FBQUEsTUFBQSxHQUFTLE9BQUEsQ0FBUSxVQUFSO1FBQ1QsTUFBTSxDQUFDLE1BQVAsQ0FBYyxHQUFkO2VBQ0E7TUFK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LEVBQVA7O01BRUEsSUFBQSxHQUFPLE9BQU8sQ0FBQyxRQUFSLENBQWlCLEtBQWpCO01BRVAsSUFBQyxDQUFBLFNBQUQsR0FBYSxJQUFJLENBQUM7TUFFbEIsSUFBRyxJQUFJLENBQUMsS0FBUjtRQUNJLElBQUksQ0FBQyxLQUFMLEdBQWE7ZUFDYixJQUFJLENBQUMsSUFBTCxDQUFVLE9BQVYsRUFBbUIsSUFBSSxDQUFDLEtBQXhCLEVBQStCLElBQS9CLEVBRko7O0lBUk87O0lBWVgsT0FBUyxDQUFDLEtBQUQsQ0FBQTtBQUVMLFVBQUE7TUFBQSxJQUFBLEdBQU8sT0FBTyxDQUFDLFFBQVIsQ0FBaUIsS0FBakI7YUFDUCxJQUFDLENBQUEsU0FBRCxHQUFhLElBQUksQ0FBQztJQUhiOztFQWxIYjs7RUF1SEEsTUFBTSxDQUFDLE9BQVAsR0FBaUI7QUFqSWpCIiwic291cmNlc0NvbnRlbnQiOlsiIyMjXG4wMDAgICAwMDAgIDAwMCAgMDAwICAgMDAwICBcbjAwMCAwIDAwMCAgMDAwICAwMDAwICAwMDAgIFxuMDAwMDAwMDAwICAwMDAgIDAwMCAwIDAwMCAgXG4wMDAgICAwMDAgIDAwMCAgMDAwICAwMDAwICBcbjAwICAgICAwMCAgMDAwICAwMDAgICAwMDAgIFxuIyMjXG5cbnsgcG9zdCwga2V5aW5mbywgdGl0bGUsIHNjaGVtZSwgc3RvcEV2ZW50LCBwcmVmcywgc2xhc2gsIGVsZW0sIGVtcHR5LCB2YWxpZCwgcG9wdXAsIHBvcywgc3RyLCBmcywgbG9nLCAkLCBfIH0gPSByZXF1aXJlICcuL2t4aydcblxuY2xhc3MgV2luXG4gICAgXG4gICAgY29uc3RydWN0b3I6IChAb3B0KSAtPlxuICAgICAgICBcbiAgICAgICAgd2luZG93Lm9uZXJyb3IgPSAobXNnLCBzb3VyY2UsIGxpbmUsIGNvbCwgZXJyKSAtPlxuICAgICAgICAgICAgXG4gICAgICAgICAgICBzcmNtYXAgPSByZXF1aXJlICcuL3NyY21hcCdcbiAgICAgICAgICAgIHNyY21hcC5sb2dFcnIgZXJyXG4gICAgICAgICAgICB0cnVlXG4gICAgICAgIFxuICAgICAgICBwcmVmcy5pbml0KClcbiAgICAgICAgXG4gICAgICAgIGlmIEBvcHQuaWNvblxuICAgICAgICAgICAgbG9nLnNsb2cuaWNvbiA9IHNsYXNoLmZpbGVVcmwgc2xhc2guam9pbiBAb3B0LmRpciwgQG9wdC5pY29uXG4gICAgICAgIFxuICAgICAgICBlbGVjdHJvbiA9IHJlcXVpcmUgJ2VsZWN0cm9uJ1xuICAgICAgICBcbiAgICAgICAgQHdpbiA9IHdpbmRvdy53aW4gPSBlbGVjdHJvbi5yZW1vdGUuZ2V0Q3VycmVudFdpbmRvdygpXG4gICAgICAgIEBpZCAgPSB3aW5kb3cud2luSUQgPSBAd2luLmlkXG4gICAgICAgIFxuICAgICAgICBAbW9kaWZpZXJzID0gJydcblxuICAgICAgICBAdXNlckRhdGEgPSBzbGFzaC51c2VyRGF0YSgpXG4gICAgICAgIFxuICAgICAgICBwb3N0Lm9uICdtZW51QWN0aW9uJywgQG9uTWVudUFjdGlvblxuICAgICAgICBcbiAgICAgICAgd2luZG93LnRpdGxlYmFyID0gbmV3IHRpdGxlIEBvcHRcbiAgICAgICAgXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lciAnY29udGV4dG1lbnUnLCBAb25Db250ZXh0TWVudVxuICAgICAgICBcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciAna2V5ZG93bicsIEBvbktleURvd25cbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciAna2V5dXAnLCAgIEBvbktleVVwXG4gICAgICAgIFxuICAgICAgICBpZiBAb3B0LnNjaGVtZSAhPSBmYWxzZVxuICAgICAgICAgICAgc2NoZW1lLnNldCBwcmVmcy5nZXQgJ3NjaGVtZScsICdkYXJrJ1xuICAgICAgICAgICAgXG4gICAgICAgIGlmIF8uaXNGdW5jdGlvbiBAb3B0Lm9uU2hvd1xuICAgICAgICAgICAgQHdpbi5vbiAncmVhZHktdG8tc2hvdycsIEBvcHQub25TaG93XG5cbiAgICAgICAgaWYgXy5pc0Z1bmN0aW9uIEBvcHQub25Mb2FkXG4gICAgICAgICAgICBAd2luLndlYkNvbnRlbnRzLm9uICdkaWQtZmluaXNoLWxvYWQnLCBAb3B0Lm9uTG9hZFxuICAgICAgICAgICAgXG4gICAgIyAwMDAwMDAwICAgMDAwMDAwMCAgMDAwMDAwMDAgICAwMDAwMDAwMCAgMDAwMDAwMDAgIDAwMCAgIDAwMCAgIDAwMDAwMDAgIDAwMCAgIDAwMCAgIDAwMDAwMDAgICAwMDAwMDAwMDBcbiAgICAjMDAwICAgICAgIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAgICAgMDAwMCAgMDAwICAwMDAgICAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgICAgIDAwMFxuICAgICMwMDAwMDAwICAgMDAwICAgICAgIDAwMDAwMDAgICAgMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAgMCAwMDAgIDAwMDAwMDAgICAwMDAwMDAwMDAgIDAwMCAgIDAwMCAgICAgMDAwXG4gICAgIyAgICAgMDAwICAwMDAgICAgICAgMDAwICAgMDAwICAwMDAgICAgICAgMDAwICAgICAgIDAwMCAgMDAwMCAgICAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAgICAwMDBcbiAgICAjMDAwMDAwMCAgICAwMDAwMDAwICAwMDAgICAwMDAgIDAwMDAwMDAwICAwMDAwMDAwMCAgMDAwICAgMDAwICAwMDAwMDAwICAgMDAwICAgMDAwICAgMDAwMDAwMCAgICAgIDAwMFxuICAgIFxuICAgIHNjcmVlbnNob3Q6IC0+XG4gICAgXG4gICAgICAgIEB3aW4uY2FwdHVyZVBhZ2UgKGltZykgPT5cbiAgICAgICAgICAgIGZpbGUgPSBzbGFzaC5yZXNvbHZlIFwifi9EZXNrdG9wLyN7QG9wdC5wa2cubmFtZX0tc2NyZWVuc2hvdC5wbmdcIlxuICAgICAgICAgICAgZnMud3JpdGVGaWxlIGZpbGUsIGltZy50b1BORygpLCAoZXJyKSAtPlxuICAgICAgICAgICAgICAgIGlmIHZhbGlkIGVyclxuICAgICAgICAgICAgICAgICAgICBsb2cgJ3NhdmluZyBzY3JlZW5zaG90IGZhaWxlZCcsIGVyclxuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgbG9nIFwic2NyZWVuc2hvdCBzYXZlZCB0byAje2ZpbGV9XCJcbiAgICAgICAgICAgIFxuICAgICMgMDAgICAgIDAwICAwMDAwMDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgICAwMDAwMDAwICAgIDAwMDAwMDAgIDAwMDAwMDAwMCAgMDAwICAgMDAwMDAwMCAgIDAwMCAgIDAwMCAgXG4gICAgIyAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAwICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAgICAgICAgMDAwICAgICAwMDAgIDAwMCAgIDAwMCAgMDAwMCAgMDAwICBcbiAgICAjIDAwMDAwMDAwMCAgMDAwMDAwMCAgIDAwMCAwIDAwMCAgMDAwICAgMDAwICAwMDAwMDAwMDAgIDAwMCAgICAgICAgICAwMDAgICAgIDAwMCAgMDAwICAgMDAwICAwMDAgMCAwMDAgIFxuICAgICMgMDAwIDAgMDAwICAwMDAgICAgICAgMDAwICAwMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgICAgIDAwMCAgICAgMDAwICAwMDAgICAwMDAgIDAwMCAgMDAwMCAgXG4gICAgIyAwMDAgICAwMDAgIDAwMDAwMDAwICAwMDAgICAwMDAgICAwMDAwMDAwICAgMDAwICAgMDAwICAgMDAwMDAwMCAgICAgMDAwICAgICAwMDAgICAwMDAwMDAwICAgMDAwICAgMDAwICBcbiAgICBcbiAgICBvbk1lbnVBY3Rpb246IChhY3Rpb24sIGFyZ3MpID0+XG4gICAgICAgIFxuICAgICAgICBzd2l0Y2ggYWN0aW9uXG4gICAgICAgICAgICB3aGVuICdTY3JlZW5zaG90JyB0aGVuIEBzY3JlZW5zaG90KClcbiAgICAgICAgICAgIHdoZW4gJ0Fib3V0JyAgICAgIHRoZW4gcG9zdC50b01haW4gJ3Nob3dBYm91dCdcbiAgICAgICAgICAgIHdoZW4gJ1NhdmUnICAgICAgIHRoZW4gcG9zdC50b01haW4gJ3NhdmVCdWZmZXInXG4gICAgICAgICAgICB3aGVuICdRdWl0JyAgICAgICB0aGVuIHBvc3QudG9NYWluICdxdWl0QXBwJ1xuXG4gICAgIyAgMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAgICAwMDAgIDAwMDAwMDAwMCAgMDAwMDAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMDAwICBcbiAgICAjIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMDAgIDAwMCAgICAgMDAwICAgICAwMDAgICAgICAgIDAwMCAwMDAgICAgICAwMDAgICAgIFxuICAgICMgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwIDAgMDAwICAgICAwMDAgICAgIDAwMDAwMDAgICAgIDAwMDAwICAgICAgIDAwMCAgICAgXG4gICAgIyAwMDAgICAgICAgMDAwICAgMDAwICAwMDAgIDAwMDAgICAgIDAwMCAgICAgMDAwICAgICAgICAwMDAgMDAwICAgICAgMDAwICAgICBcbiAgICAjICAwMDAwMDAwICAgMDAwMDAwMCAgIDAwMCAgIDAwMCAgICAgMDAwICAgICAwMDAwMDAwMCAgMDAwICAgMDAwICAgICAwMDAgICAgIFxuICAgIFxuICAgIG9uQ29udGV4dE1lbnU6IChldmVudCkgPT5cbiAgICAgICAgXG4gICAgICAgIGFic1BvcyA9IHBvcyBldmVudFxuICAgICAgICBpZiBub3QgYWJzUG9zP1xuICAgICAgICAgICAgYWJzUG9zID0gcG9zICQoXCIjbWFpblwiKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0LCAkKFwiI21haW5cIikuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wXG4gICAgICAgIFxuICAgICAgICBpdGVtcyA9IF8uY2xvbmUgd2luZG93LnRpdGxlYmFyLm1lbnVUZW1wbGF0ZSgpXG4gICAgICAgIGlmIF8uaXNGdW5jdGlvbiBAb3B0LmNvbnRleHRcbiAgICAgICAgICAgIGl0ZW1zID0gQG9wdC5jb250ZXh0IGl0ZW1zXG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGl0ZW1zLnVuc2hpZnQgdGV4dDonQ2xlYXInLCBhY2NlbDonY3RybCtrJ1xuICAgICAgICAgICAgXG4gICAgICAgIHBvcHVwLm1lbnVcbiAgICAgICAgICAgIGl0ZW1zOiAgIGl0ZW1zXG4gICAgICAgICAgICB4OiAgICAgICBhYnNQb3MueFxuICAgICAgICAgICAgeTogICAgICAgYWJzUG9zLnlcbiAgICAgICAgICAgIG9uQ2xvc2U6IC0+IHBvc3QuZW1pdCAnY29udGV4dENsb3NlZCdcbiAgICBcbiAgICAjIDAwMCAgIDAwMCAgMDAwMDAwMDAgIDAwMCAgIDAwMFxuICAgICMgMDAwICAwMDAgICAwMDAgICAgICAgIDAwMCAwMDBcbiAgICAjIDAwMDAwMDAgICAgMDAwMDAwMCAgICAgMDAwMDBcbiAgICAjIDAwMCAgMDAwICAgMDAwICAgICAgICAgIDAwMFxuICAgICMgMDAwICAgMDAwICAwMDAwMDAwMCAgICAgMDAwXG4gICAgXG4gICAgb25LZXlEb3duOiAoZXZlbnQpID0+XG4gICAgXG4gICAgICAgIHJldHVybiBzdG9wRXZlbnQoZXZlbnQpIGlmICd1bmhhbmRsZWQnICE9IHdpbmRvdy50aXRsZWJhci5oYW5kbGVLZXkgZXZlbnQsIHRydWVcbiAgICAgICAgXG4gICAgICAgIGluZm8gPSBrZXlpbmZvLmZvckV2ZW50IGV2ZW50XG4gICAgXG4gICAgICAgIEBtb2RpZmllcnMgPSBpbmZvLm1vZFxuICAgICAgICBcbiAgICAgICAgaWYgaW5mby5jb21ib1xuICAgICAgICAgICAgaW5mby5ldmVudCA9IGV2ZW50XG4gICAgICAgICAgICBwb3N0LmVtaXQgJ2NvbWJvJywgaW5mby5jb21ibywgaW5mb1xuICAgIFxuICAgIG9uS2V5VXA6IChldmVudCkgPT5cbiAgICAgICAgXG4gICAgICAgIGluZm8gPSBrZXlpbmZvLmZvckV2ZW50IGV2ZW50XG4gICAgICAgIEBtb2RpZmllcnMgPSBpbmZvLm1vZCBcbiAgICAgICAgXG5tb2R1bGUuZXhwb3J0cyA9IFdpblxuIl19
//# sourceURL=../coffee/win.coffee