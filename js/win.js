// koffee 1.14.0

/*
000   000  000  000   000  
000 0 000  000  0000  000  
000000000  000  000 0 000  
000   000  000  000  0000  
00     00  000  000   000
 */
var $, Win, _, electron, empty, keyinfo, klog, kpos, open, popup, post, prefs, ref, scheme, slash, stopEvent, title,
    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

ref = require('./kxk'), $ = ref.$, _ = ref._, empty = ref.empty, keyinfo = ref.keyinfo, klog = ref.klog, kpos = ref.kpos, open = ref.open, popup = ref.popup, post = ref.post, prefs = ref.prefs, scheme = ref.scheme, slash = ref.slash, stopEvent = ref.stopEvent, title = ref.title;

electron = require('electron');

Win = (function() {
    function Win(opt) {
        var base, ref1, sep;
        this.opt = opt;
        this.onKeyUp = bind(this.onKeyUp, this);
        this.onKeyDown = bind(this.onKeyDown, this);
        this.onContextMenu = bind(this.onContextMenu, this);
        this.onMenuAction = bind(this.onMenuAction, this);
        this.onMoved = bind(this.onMoved, this);
        window.onerror = function(msg, source, line, col, error) {
            var err;
            try {
                console.error('window.onerror', msg, source, line, col);
            } catch (error1) {
                err = error1;
                console.log('dafuk?', err);
            }
            return true;
        };
        sep = (ref1 = this.opt.prefsSeperator) != null ? ref1 : 'â–¸';
        prefs.init({
            separator: sep
        });
        if (this.opt.icon) {
            klog.slog.icon = slash.fileUrl(slash.join(this.opt.dir, this.opt.icon));
        }
        this.id = window.winID = electron.ipcRenderer.sendSync('getWinID');
        window.win = this;
        this.modifiers = '';
        this.userData = post.get('userData');
        klog('kxk.Win id', this.id, 'userData', this.userData);
        post.on('menuAction', this.onMenuAction);
        post.on('winMoved', this.onMoved);
        if ((base = this.opt).title != null) {
            base.title;
        } else {
            base.title = process.argv[0].endsWith('Electron Helper') && ['version'] || [];
        }
        window.titlebar = new title(this.opt);
        if (this.opt.context !== false) {
            document.body.addEventListener('contextmenu', this.onContextMenu);
        }
        if (!this.opt.nokeys) {
            document.addEventListener('keydown', this.onKeyDown);
            document.addEventListener('keyup', this.onKeyUp);
        }
        if (this.opt.scheme !== false) {
            scheme.set(prefs.get('scheme', 'dark'));
        }
    }

    Win.prototype.getBounds = function() {
        return electron.ipcRenderer.sendSync('getWinBounds');
    };

    Win.prototype.setBounds = function(b) {
        return electron.ipcRenderer.send('setWinBounds', b);
    };

    Win.prototype.onMoved = function() {};

    Win.prototype.onMenuAction = function(action, args) {
        klog('kxk.win.onMenuAction', action);
        switch (action) {
            case 'Preferences':
                return open(prefs.store.file);
        }
        electron.ipcRenderer.send('menuAction', action);
        return 'unhandled';
    };

    Win.prototype.onContextMenu = function(event) {
        var absPos, items;
        this.win.focus();
        absPos = kpos(event);
        if (absPos == null) {
            absPos = kpos($("#main").getBoundingClientRect().left, $("#main").getBoundingClientRect().top);
        }
        items = _.clone(window.titlebar.menuTemplate());
        if (_.isFunction(this.opt.context)) {
            items = this.opt.context(items);
            if (empty(items)) {
                return;
            }
        } else {
            items.unshift({
                text: 'Clear',
                accel: 'cmdctrl+k'
            });
        }
        return popup.menu({
            items: items,
            x: absPos.x,
            y: absPos.y,
            onClose: function() {
                return post.emit('contextClosed');
            }
        });
    };

    Win.prototype.onKeyDown = function(event) {
        if ('unhandled' !== window.titlebar.handleKey(event, true)) {
            return stopEvent(event);
        }
        this.modifiers = info.mod;
        info.event = event;
        return post.emit('combo', info.combo, info);
    };

    Win.prototype.onKeyUp = function(event) {
        var info;
        info = keyinfo.forEvent(event);
        return this.modifiers = info.mod;
    };

    return Win;

})();

module.exports = Win;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2luLmpzIiwic291cmNlUm9vdCI6Ii4uL2NvZmZlZSIsInNvdXJjZXMiOlsid2luLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBOzs7Ozs7O0FBQUEsSUFBQSwrR0FBQTtJQUFBOztBQVFBLE1BQWtHLE9BQUEsQ0FBUSxPQUFSLENBQWxHLEVBQUUsU0FBRixFQUFLLFNBQUwsRUFBUSxpQkFBUixFQUFlLHFCQUFmLEVBQXdCLGVBQXhCLEVBQThCLGVBQTlCLEVBQW9DLGVBQXBDLEVBQTBDLGlCQUExQyxFQUFpRCxlQUFqRCxFQUF1RCxpQkFBdkQsRUFBOEQsbUJBQTlELEVBQXNFLGlCQUF0RSxFQUE2RSx5QkFBN0UsRUFBd0Y7O0FBRXhGLFFBQUEsR0FBVyxPQUFBLENBQVEsVUFBUjs7QUFFTDtJQUVDLGFBQUMsR0FBRDtBQUVDLFlBQUE7UUFGQSxJQUFDLENBQUEsTUFBRDs7Ozs7O1FBRUEsTUFBTSxDQUFDLE9BQVAsR0FBaUIsU0FBQyxHQUFELEVBQU0sTUFBTixFQUFjLElBQWQsRUFBb0IsR0FBcEIsRUFBeUIsS0FBekI7QUFFYixnQkFBQTtBQUFBO2dCQUNHLE9BQUEsQ0FBQyxLQUFELENBQU8sZ0JBQVAsRUFBd0IsR0FBeEIsRUFBNkIsTUFBN0IsRUFBcUMsSUFBckMsRUFBMkMsR0FBM0MsRUFESDthQUFBLGNBQUE7Z0JBRU07Z0JBQ0YsT0FBTyxDQUFDLEdBQVIsQ0FBWSxRQUFaLEVBQXFCLEdBQXJCLEVBSEo7O21CQUtBO1FBUGE7UUFTakIsR0FBQSxxREFBNEI7UUFDNUIsS0FBSyxDQUFDLElBQU4sQ0FBVztZQUFBLFNBQUEsRUFBVSxHQUFWO1NBQVg7UUFFQSxJQUFHLElBQUMsQ0FBQSxHQUFHLENBQUMsSUFBUjtZQUNJLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBVixHQUFpQixLQUFLLENBQUMsT0FBTixDQUFjLEtBQUssQ0FBQyxJQUFOLENBQVcsSUFBQyxDQUFBLEdBQUcsQ0FBQyxHQUFoQixFQUFxQixJQUFDLENBQUEsR0FB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TCxDQUFhLEtBQWI7WUFDUixJQUFHLEtBQUEsQ0FBTSxLQUFOLENBQUg7QUFDSSx1QkFESjthQUZKO1NBQUEsTUFBQTtZQUtJLEtBQUssQ0FBQyxPQUFOLENBQWM7Z0JBQUEsSUFBQSxFQUFLLE9BQUw7Z0JBQWEsS0FBQSxFQUFNLFdBQW5CO2FBQWQsRUFMSjs7ZUFPQSxLQUFLLENBQUMsSUFBTixDQUNJO1lBQUEsS0FBQSxFQUFTLEtBQVQ7WUFDQSxDQUFBLEVBQVMsTUFBTSxDQUFDLENBRGhCO1lBRUEsQ0FBQSxFQUFTLE1BQU0sQ0FBQyxDQUZoQjtZQUdBLE9BQUEsRUFBUyxTQUFBO3VCQUFHLElBQUksQ0FBQyxJQUFMLENBQVUsZUFBVjtZQUFILENBSFQ7U0FESjtJQWpCVzs7a0JBNkJmLFNBQUEsR0FBVyxTQUFDLEtBQUQ7UUFFUCxJQUEyQixXQUFBLEtBQWUsTUFBTSxDQUFDLFFBQVEsQ0FBQyxTQUFoQixDQUEwQixLQUExQixFQUFpQyxJQUFqQyxDQUExQztBQUFBLG1CQUFPLFNBQUEsQ0FBVSxLQUFWLEVBQVA7O1FBRUEsSUFBQyxDQUFBLFNBQUQsR0FBYSxJQUFJLENBQUM7UUFFbEIsSUFBSSxDQUFDLEtBQUwsR0FBYTtlQUNiLElBQUksQ0FBQyxJQUFMLENBQVUsT0FBVixFQUFrQixJQUFJLENBQUMsS0FBdkIsRUFBOEIsSUFBOUI7SUFQTzs7a0JBU1gsT0FBQSxHQUFTLFNBQUMsS0FBRDtBQUVMLFlBQUE7UUFBQSxJQUFBLEdBQU8sT0FBTyxDQUFDLFFBQVIsQ0FBaUIsS0FBakI7ZUFDUCxJQUFDLENBQUEsU0FBRCxHQUFhLElBQUksQ0FBQztJQUhiOzs7Ozs7QUFLYixNQUFNLENBQUMsT0FBUCxHQUFpQiIsInNvdXJjZXNDb250ZW50IjpbIiMjI1xuMDAwICAgMDAwICAwMDAgIDAwMCAgIDAwMCAgXG4wMDAgMCAwMDAgIDAwMCAgMDAwMCAgMDAwICBcbjAwMDAwMDAwMCAgMDAwICAwMDAgMCAwMDAgIFxuMDAwICAgMDAwICAwMDAgIDAwMCAgMDAwMCAgXG4wMCAgICAgMDAgIDAwMCAgMDAwICAgMDAwICBcbiMjI1xuXG57ICQsIF8sIGVtcHR5LCBrZXlpbmZvLCBrbG9nLCBrcG9zLCBvcGVuLCBwb3B1cCwgcG9zdCwgcHJlZnMsIHNjaGVtZSwgc2xhc2gsIHN0b3BFdmVudCwgdGl0bGUgfSA9IHJlcXVpcmUgJy4va3hrJ1xuXG5lbGVjdHJvbiA9IHJlcXVpcmUgJ2VsZWN0cm9uJ1xuXG5jbGFzcyBXaW5cbiAgICBcbiAgICBAOiAoQG9wdCkgLT5cbiAgICAgICAgXG4gICAgICAgIHdpbmRvdy5vbmVycm9yID0gKG1zZywgc291cmNlLCBsaW5lLCBjb2wsIGVycm9yKSAtPlxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0cnlcbiAgICAgICAgICAgICAgICBlcnJvciAnd2luZG93Lm9uZXJyb3InIG1zZywgc291cmNlLCBsaW5lLCBjb2xcbiAgICAgICAgICAgIGNhdGNoIGVyclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nICdkYWZ1az8nIGVyclxuICAgICAgICAgICAgIyBzcmNtYXAubG9nRXJyIGVyclxuICAgICAgICAgICAgdHJ1ZVxuICAgICAgICBcbiAgICAgICAgc2VwID0gQG9wdC5wcmVmc1NlcGVyYXRvciA/ICfilrgnXG4gICAgICAgIHByZWZzLmluaXQgc2VwYXJhdG9yOnNlcFxuICAgICAgICBcbiAgICAgICAgaWYgQG9wdC5pY29uXG4gICAgICAgICAgICBrbG9nLnNsb2cuaWNvbiA9IHNsYXNoLmZpbGVVcmwgc2xhc2guam9pbiBAb3B0LmRpciwgQG9wdC5pY29uXG4gICAgICAgICAgICAgICBcbiAgICAgICAgQGlkID0gd2luZG93LndpbklEID0gZWxlY3Ryb24uaXBjUmVuZGVyZXIuc2VuZFN5bmMgJ2dldFdpbklEJ1xuICAgICAgICB3aW5kb3cud2luID0gQFxuXG4gICAgICAgIEBtb2RpZmllcnMgPSAnJ1xuXG4gICAgICAgIEB1c2VyRGF0YSA9IHBvc3QuZ2V0ICd1c2VyRGF0YSdcbiAgICAgICAgXG4gICAgICAgIGtsb2cgJ2t4ay5XaW4gaWQnIEBpZCwgJ3VzZXJEYXRhJyBAdXNlckRhdGFcbiAgICAgICAgXG4gICAgICAgIHBvc3Qub24gJ21lbnVBY3Rpb24nIEBvbk1lbnVBY3Rpb25cbiAgICAgICAgcG9zdC5vbiAnd2luTW92ZWQnICAgQG9uTW92ZWRcbiAgICAgICAgXG4gICAgICAgIEBvcHQudGl0bGUgPz0gcHJvY2Vzcy5hcmd2WzBdLmVuZHNXaXRoKCdFbGVjdHJvbiBIZWxwZXInKSBhbmQgWyd2ZXJzaW9uJ10gb3IgW11cbiAgICAgICAgXG4gICAgICAgIHdpbmRvdy50aXRsZWJhciA9IG5ldyB0aXRsZSBAb3B0XG4gICAgICAgIFxuICAgICAgICBpZiBAb3B0LmNvbnRleHQgIT0gZmFsc2VcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lciAnY29udGV4dG1lbnUnIEBvbkNvbnRleHRNZW51XG4gICAgICAgIFxuICAgICAgICBpZiBub3QgQG9wdC5ub2tleXNcbiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIgJ2tleWRvd24nIEBvbktleURvd25cbiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIgJ2tleXVwJyAgIEBvbktleVVwXG4gICAgICAgIFxuICAgICAgICBpZiBAb3B0LnNjaGVtZSAhPSBmYWxzZVxuICAgICAgICAgICAgc2NoZW1lLnNldCBwcmVmcy5nZXQgJ3NjaGVtZScgJ2RhcmsnXG4gICAgICAgICAgICBcbiAgICAgICAgIyBpZiBfLmlzRnVuY3Rpb24gQG9wdC5vblNob3dcbiAgICAgICAgICAgICMgb25TaG93ID0gPT4gQG9wdC5vblNob3coKTsgQHdpbi5yZW1vdmVMaXN0ZW5lciAncmVhZHktdG8tc2hvdycgb25TaG93XG4gICAgICAgICAgICAjIEB3aW4ub24gJ3JlYWR5LXRvLXNob3cnIG9uU2hvd1xuICAgICAgICAjIGVsc2VcbiAgICAgICAgICAgICMgQHdpbi5vbiAncmVhZHktdG8tc2hvdycgPT4gQHdpbi5zaG93KClcblxuICAgICAgICAjIGlmIF8uaXNGdW5jdGlvbiBAb3B0Lm9uTG9hZFxuICAgICAgICAgICAgIyBvbkxvYWQgPSA9PiBAb3B0Lm9uTG9hZCgpOyBAd2luLndlYkNvbnRlbnRzLnJlbW92ZUxpc3RlbmVyICdkaWQtZmluaXNoLWxvYWQnIG9uTG9hZFxuICAgICAgICAgICAgIyBAd2luLndlYkNvbnRlbnRzLm9uICdkaWQtZmluaXNoLWxvYWQnIG9uTG9hZFxuICAgICAgICAgICAgXG4gICAgZ2V0Qm91bmRzOiAgICAgLT4gZWxlY3Ryb24uaXBjUmVuZGVyZXIuc2VuZFN5bmMgJ2dldFdpbkJvdW5kcydcbiAgICBzZXRCb3VuZHM6IChiKSAtPiBlbGVjdHJvbi5pcGNSZW5kZXJlci5zZW5kICdzZXRXaW5Cb3VuZHMnIGJcbiAgICBvbk1vdmVkOiAgICAgICA9PlxuICAgICAgICBcbiAgICAjIDAwICAgICAwMCAgMDAwMDAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAgMDAwMDAwMCAgICAwMDAwMDAwICAwMDAwMDAwMDAgIDAwMCAgIDAwMDAwMDAgICAwMDAgICAwMDAgIFxuICAgICMgMDAwICAgMDAwICAwMDAgICAgICAgMDAwMCAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgICAgIDAwMCAgICAgMDAwICAwMDAgICAwMDAgIDAwMDAgIDAwMCAgXG4gICAgIyAwMDAwMDAwMDAgIDAwMDAwMDAgICAwMDAgMCAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMDAwICAwMDAgICAgICAgICAgMDAwICAgICAwMDAgIDAwMCAgIDAwMCAgMDAwIDAgMDAwICBcbiAgICAjIDAwMCAwIDAwMCAgMDAwICAgICAgIDAwMCAgMDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgICAgICAgICAwMDAgICAgIDAwMCAgMDAwICAgMDAwICAwMDAgIDAwMDAgIFxuICAgICMgMDAwICAgMDAwICAwMDAwMDAwMCAgMDAwICAgMDAwICAgMDAwMDAwMCAgIDAwMCAgIDAwMCAgIDAwMDAwMDAgICAgIDAwMCAgICAgMDAwICAgMDAwMDAwMCAgIDAwMCAgIDAwMCAgXG4gICAgXG4gICAgb25NZW51QWN0aW9uOiAoYWN0aW9uLCBhcmdzKSA9PlxuXG4gICAgICAgIGtsb2cgJ2t4ay53aW4ub25NZW51QWN0aW9uJyBhY3Rpb25cbiAgICAgICAgXG4gICAgICAgIHN3aXRjaCBhY3Rpb25cbiAgICAgICAgICAgIHdoZW4gJ1ByZWZlcmVuY2VzJyB0aGVuIHJldHVybiBvcGVuIHByZWZzLnN0b3JlLmZpbGVcbiAgICAgICAgICBcbiAgICAgICAgZWxlY3Ryb24uaXBjUmVuZGVyZXIuc2VuZCAnbWVudUFjdGlvbicgYWN0aW9uXG4gICAgICAgICd1bmhhbmRsZWQnXG5cbiAgICAjICAwMDAwMDAwICAgMDAwMDAwMCAgIDAwMCAgIDAwMCAgMDAwMDAwMDAwICAwMDAwMDAwMCAgMDAwICAgMDAwICAwMDAwMDAwMDAgIFxuICAgICMgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwMCAgMDAwICAgICAwMDAgICAgIDAwMCAgICAgICAgMDAwIDAwMCAgICAgIDAwMCAgICAgXG4gICAgIyAwMDAgICAgICAgMDAwICAgMDAwICAwMDAgMCAwMDAgICAgIDAwMCAgICAgMDAwMDAwMCAgICAgMDAwMDAgICAgICAgMDAwICAgICBcbiAgICAjIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAgMDAwMCAgICAgMDAwICAgICAwMDAgICAgICAgIDAwMCAwMDAgICAgICAwMDAgICAgIFxuICAgICMgIDAwMDAwMDAgICAwMDAwMDAwICAgMDAwICAgMDAwICAgICAwMDAgICAgIDAwMDAwMDAwICAwMDAgICAwMDAgICAgIDAwMCAgICAgXG4gICAgXG4gICAgb25Db250ZXh0TWVudTogKGV2ZW50KSA9PlxuXG4gICAgICAgIEB3aW4uZm9jdXMoKVxuICAgICAgICBcbiAgICAgICAgYWJzUG9zID0ga3BvcyBldmVudFxuICAgICAgICBpZiBub3QgYWJzUG9zP1xuICAgICAgICAgICAgYWJzUG9zID0ga3BvcyAkKFwiI21haW5cIikuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCwgJChcIiNtYWluXCIpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcFxuICAgICAgICBcbiAgICAgICAgaXRlbXMgPSBfLmNsb25lIHdpbmRvdy50aXRsZWJhci5tZW51VGVtcGxhdGUoKVxuICAgICAgICBcbiAgICAgICAgaWYgXy5pc0Z1bmN0aW9uIEBvcHQuY29udGV4dFxuICAgICAgICAgICAgaXRlbXMgPSBAb3B0LmNvbnRleHQgaXRlbXNcbiAgICAgICAgICAgIGlmIGVtcHR5IGl0ZW1zIFxuICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICBlbHNlXG4gICAgICAgICAgICBpdGVtcy51bnNoaWZ0IHRleHQ6J0NsZWFyJyBhY2NlbDonY21kY3RybCtrJ1xuICAgICAgICBcbiAgICAgICAgcG9wdXAubWVudVxuICAgICAgICAgICAgaXRlbXM6ICAgaXRlbXNcbiAgICAgICAgICAgIHg6ICAgICAgIGFic1Bvcy54XG4gICAgICAgICAgICB5OiAgICAgICBhYnNQb3MueVxuICAgICAgICAgICAgb25DbG9zZTogLT4gcG9zdC5lbWl0ICdjb250ZXh0Q2xvc2VkJ1xuICAgIFxuICAgICMgMDAwICAgMDAwICAwMDAwMDAwMCAgMDAwICAgMDAwXG4gICAgIyAwMDAgIDAwMCAgIDAwMCAgICAgICAgMDAwIDAwMFxuICAgICMgMDAwMDAwMCAgICAwMDAwMDAwICAgICAwMDAwMFxuICAgICMgMDAwICAwMDAgICAwMDAgICAgICAgICAgMDAwXG4gICAgIyAwMDAgICAwMDAgIDAwMDAwMDAwICAgICAwMDBcbiAgICBcbiAgICBvbktleURvd246IChldmVudCkgPT5cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBzdG9wRXZlbnQoZXZlbnQpIGlmICd1bmhhbmRsZWQnICE9IHdpbmRvdy50aXRsZWJhci5oYW5kbGVLZXkgZXZlbnQsIHRydWVcbiAgICBcbiAgICAgICAgQG1vZGlmaWVycyA9IGluZm8ubW9kXG4gICAgICAgIFxuICAgICAgICBpbmZvLmV2ZW50ID0gZXZlbnRcbiAgICAgICAgcG9zdC5lbWl0ICdjb21ibycgaW5mby5jb21ibywgaW5mb1xuICAgIFxuICAgIG9uS2V5VXA6IChldmVudCkgPT5cbiAgICAgICAgXG4gICAgICAgIGluZm8gPSBrZXlpbmZvLmZvckV2ZW50IGV2ZW50XG4gICAgICAgIEBtb2RpZmllcnMgPSBpbmZvLm1vZCBcbiAgICAgICAgXG5tb2R1bGUuZXhwb3J0cyA9IFdpblxuIl19
//# sourceURL=../coffee/win.coffee