(function() {
  /*
   0000000   00000000    0000000    0000000
  000   000  000   000  000        000     
  000000000  0000000    000  0000  0000000 
  000   000  000   000  000   000       000
  000   000  000   000   0000000   0000000 
  */
  var _, args, empty, error, fs, karg, log, noon, post, slash, valid;

  ({karg, post, slash, noon, empty, valid, fs, error, log, _} = require('./kxk'));

  if (process.type === 'renderer') {
    module.exports = post.get('args');
  } else {
    args = {};
    args.init = function(cfg, kargOpt) {
      var k, kargConfig, kk, o, pkg, pkgDir, pkgJson, ref, ref1, ref2, s, v, vv;
      pkg = kargOpt != null ? kargOpt.pkg : void 0;
      if (pkg == null) {
        pkgDir = slash.pkg(__dirname);
        while (valid(pkgDir) && slash.file(slash.dir(pkgDir)) === 'node_modules') {
          pkgDir = slash.pkg(slash.dir(pkgDir));
        }
        if (valid(pkgDir)) {
          pkgJson = slash.join(pkgDir, 'package.json');
          pkg = require(pkgJson);
          if (empty(pkg)) {
            return error(`args -- no pkg in '${pkgJson}'!`);
          }
        } else {
          return error('args -- no pkg dir!');
        }
      }
      kargConfig = {};
      kargConfig[pkg.name] = {};
      kargConfig.version = pkg.version;
      ref = noon.parse(cfg);
      for (kk in ref) {
        vv = ref[kk];
        o = {};
        s = vv.split(/\s\s+/);
        if (s.length > 0) {
          if (!empty(s[0])) {
            o['?'] = s[0];
          }
        }
        if (s.length > 1) {
          if ((ref1 = s[1]) === '*' || ref1 === '**') {
            o[s[1]] = null;
          } else {
            o['='] = noon.parse(s[1])[0];
          }
        }
        if (s.length > 2) {
          if (s[2].startsWith('-')) {
            o['-'] = s[2].substr(1);
          }
        }
        kargConfig[pkg.name][kk] = o;
      }
      delete args.init;
      ref2 = karg(kargConfig, kargOpt);
      
      // log 'karg kargConfig:', kargConfig, 'kargOpt:', kargOpt
      for (k in ref2) {
        v = ref2[k];
        args[k] = v;
      }
      return args;
    };
    post.onGet('args', () => {
      return args;
    });
    module.exports = args;
  }

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXJncy5qcyIsInNvdXJjZVJvb3QiOiIuIiwic291cmNlcyI6WyIuLi9jb2ZmZWUvYXJncy5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFBQTs7Ozs7OztBQUFBLE1BQUEsQ0FBQSxFQUFBLElBQUEsRUFBQSxLQUFBLEVBQUEsS0FBQSxFQUFBLEVBQUEsRUFBQSxJQUFBLEVBQUEsR0FBQSxFQUFBLElBQUEsRUFBQSxJQUFBLEVBQUEsS0FBQSxFQUFBOztFQVFBLENBQUEsQ0FBRSxJQUFGLEVBQVEsSUFBUixFQUFjLEtBQWQsRUFBcUIsSUFBckIsRUFBMkIsS0FBM0IsRUFBa0MsS0FBbEMsRUFBeUMsRUFBekMsRUFBNkMsS0FBN0MsRUFBb0QsR0FBcEQsRUFBeUQsQ0FBekQsQ0FBQSxHQUErRCxPQUFBLENBQVEsT0FBUixDQUEvRDs7RUFFQSxJQUFHLE9BQU8sQ0FBQyxJQUFSLEtBQWdCLFVBQW5CO0lBRUksTUFBTSxDQUFDLE9BQVAsR0FBaUIsSUFBSSxDQUFDLEdBQUwsQ0FBUyxNQUFULEVBRnJCO0dBQUEsTUFBQTtJQU1JLElBQUEsR0FBTyxDQUFBO0lBRVAsSUFBSSxDQUFDLElBQUwsR0FBWSxRQUFBLENBQUMsR0FBRCxFQUFNLE9BQU4sQ0FBQTtBQUVSLFVBQUEsQ0FBQSxFQUFBLFVBQUEsRUFBQSxFQUFBLEVBQUEsQ0FBQSxFQUFBLEdBQUEsRUFBQSxNQUFBLEVBQUEsT0FBQSxFQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUEsSUFBQSxFQUFBLENBQUEsRUFBQSxDQUFBLEVBQUE7TUFBQSxHQUFBLHFCQUFNLE9BQU8sQ0FBRTtNQUVmLElBQU8sV0FBUDtRQUNJLE1BQUEsR0FBUyxLQUFLLENBQUMsR0FBTixDQUFVLFNBQVY7QUFDVCxlQUFNLEtBQUEsQ0FBTSxNQUFOLENBQUEsSUFBa0IsS0FBSyxDQUFDLElBQU4sQ0FBVyxLQUFLLENBQUMsR0FBTixDQUFVLE1BQVYsQ0FBWCxDQUFBLEtBQWdDLGNBQXhEO1VBQ0ksTUFBQSxHQUFTLEtBQUssQ0FBQyxHQUFOLENBQVUsS0FBSyxDQUFDLEdBQU4sQ0FBVSxNQUFWLENBQVY7UUFEYjtRQUVBLElBQUcsS0FBQSxDQUFNLE1BQU4sQ0FBSDtVQUNJLE9BQUEsR0FBVSxLQUFLLENBQUMsSUFBTixDQUFXLE1BQVgsRUFBbUIsY0FBbkI7VUFDVixHQUFBLEdBQU0sT0FBQSxDQUFRLE9BQVI7VUFDTixJQUFrRCxLQUFBLENBQU0sR0FBTixDQUFsRDtBQUFBLG1CQUFPLEtBQUEsQ0FBTSxDQUFBLG1CQUFBLENBQUEsQ0FBc0IsT0FBdEIsQ0FBOEIsRUFBOUIsQ0FBTixFQUFQO1dBSEo7U0FBQSxNQUFBO0FBS0ksaUJBQU8sS0FBQSxDQUFNLHFCQUFOLEVBTFg7U0FKSjs7TUFXQSxVQUFBLEdBQWEsQ0FBQTtNQUNiLFVBQVcsQ0FBQSxHQUFHLENBQUMsSUFBSixDQUFYLEdBQXVCLENBQUE7TUFDdkIsVUFBVSxDQUFDLE9BQVgsR0FBcUIsR0FBRyxDQUFDO0FBRXpCO01BQUEsS0FBQSxTQUFBOztRQUNJLENBQUEsR0FBSSxDQUFBO1FBQ0osQ0FBQSxHQUFJLEVBQUUsQ0FBQyxLQUFILENBQVMsT0FBVDtRQUVKLElBQUcsQ0FBQyxDQUFDLE1BQUYsR0FBVyxDQUFkO1VBQ0ksSUFBaUIsQ0FBSSxLQUFBLENBQU0sQ0FBRSxDQUFBLENBQUEsQ0FBUixDQUFyQjtZQUFBLENBQUUsQ0FBQSxHQUFBLENBQUYsR0FBUyxDQUFFLENBQUEsQ0FBQSxFQUFYO1dBREo7O1FBRUEsSUFBRyxDQUFDLENBQUMsTUFBRixHQUFXLENBQWQ7VUFDSSxZQUFHLENBQUUsQ0FBQSxDQUFBLEVBQUYsS0FBUyxHQUFULElBQUEsSUFBQSxLQUFjLElBQWpCO1lBQ0ksQ0FBRSxDQUFBLENBQUUsQ0FBQSxDQUFBLENBQUYsQ0FBRixHQUFVLEtBRGQ7V0FBQSxNQUFBO1lBR0ksQ0FBRSxDQUFBLEdBQUEsQ0FBRixHQUFTLElBQUksQ0FBQyxLQUFMLENBQVcsQ0FBRSxDQUFBLENBQUEsQ0FBYixDQUFpQixDQUFBLENBQUEsRUFIOUI7V0FESjs7UUFLQSxJQUFHLENBQUMsQ0FBQyxNQUFGLEdBQVcsQ0FBZDtVQUNJLElBQUcsQ0FBRSxDQUFBLENBQUEsQ0FBRSxDQUFDLFVBQUwsQ0FBZ0IsR0FBaEIsQ0FBSDtZQUNJLENBQUUsQ0FBQSxHQUFBLENBQUYsR0FBUyxDQUFFLENBQUEsQ0FBQSxDQUFFLENBQUMsTUFBTCxDQUFZLENBQVosRUFEYjtXQURKOztRQUlBLFVBQVcsQ0FBQSxHQUFHLENBQUMsSUFBSixDQUFVLENBQUEsRUFBQSxDQUFyQixHQUEyQjtNQWYvQjtNQWlCQSxPQUFPLElBQUksQ0FBQztBQUlaOzs7TUFBQSxLQUFBLFNBQUE7O1FBQ0ksSUFBSyxDQUFBLENBQUEsQ0FBTCxHQUFVO01BRGQ7YUFHQTtJQTNDUTtJQTZDWixJQUFJLENBQUMsS0FBTCxDQUFXLE1BQVgsRUFBbUIsQ0FBQSxDQUFBLEdBQUE7YUFBRztJQUFILENBQW5CO0lBRUEsTUFBTSxDQUFDLE9BQVAsR0FBaUIsS0F2RHJCOztBQVZBIiwic291cmNlc0NvbnRlbnQiOlsiIyMjXG4gMDAwMDAwMCAgIDAwMDAwMDAwICAgIDAwMDAwMDAgICAgMDAwMDAwMFxuMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgICAgICAgMDAwICAgICBcbjAwMDAwMDAwMCAgMDAwMDAwMCAgICAwMDAgIDAwMDAgIDAwMDAwMDAgXG4wMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAgICAgIDAwMFxuMDAwICAgMDAwICAwMDAgICAwMDAgICAwMDAwMDAwICAgMDAwMDAwMCBcbiMjI1xuXG57IGthcmcsIHBvc3QsIHNsYXNoLCBub29uLCBlbXB0eSwgdmFsaWQsIGZzLCBlcnJvciwgbG9nLCBfIH0gPSByZXF1aXJlICcuL2t4aydcblxuaWYgcHJvY2Vzcy50eXBlID09ICdyZW5kZXJlcidcbiAgICBcbiAgICBtb2R1bGUuZXhwb3J0cyA9IHBvc3QuZ2V0ICdhcmdzJ1xuICAgIFxuZWxzZVxuICAgICAgICBcbiAgICBhcmdzID0ge30gXG4gICAgICAgIFxuICAgIGFyZ3MuaW5pdCA9IChjZmcsIGthcmdPcHQpIC0+XG4gICAgICAgIFxuICAgICAgICBwa2cgPSBrYXJnT3B0Py5wa2dcbiAgICAgICAgXG4gICAgICAgIGlmIG5vdCBwa2c/XG4gICAgICAgICAgICBwa2dEaXIgPSBzbGFzaC5wa2cgX19kaXJuYW1lXG4gICAgICAgICAgICB3aGlsZSB2YWxpZChwa2dEaXIpIGFuZCBzbGFzaC5maWxlKHNsYXNoLmRpciBwa2dEaXIpID09ICdub2RlX21vZHVsZXMnXG4gICAgICAgICAgICAgICAgcGtnRGlyID0gc2xhc2gucGtnIHNsYXNoLmRpciBwa2dEaXJcbiAgICAgICAgICAgIGlmIHZhbGlkIHBrZ0RpclxuICAgICAgICAgICAgICAgIHBrZ0pzb24gPSBzbGFzaC5qb2luIHBrZ0RpciwgJ3BhY2thZ2UuanNvbidcbiAgICAgICAgICAgICAgICBwa2cgPSByZXF1aXJlIHBrZ0pzb25cbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IgXCJhcmdzIC0tIG5vIHBrZyBpbiAnI3twa2dKc29ufSchXCIgaWYgZW1wdHkgcGtnXG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yICdhcmdzIC0tIG5vIHBrZyBkaXIhJ1xuICAgICAgICAgICAgXG4gICAgICAgIGthcmdDb25maWcgPSB7fVxuICAgICAgICBrYXJnQ29uZmlnW3BrZy5uYW1lXSA9IHt9XG4gICAgICAgIGthcmdDb25maWcudmVyc2lvbiA9IHBrZy52ZXJzaW9uXG4gICAgICAgIFxuICAgICAgICBmb3Iga2ssdnYgb2Ygbm9vbi5wYXJzZSBjZmdcbiAgICAgICAgICAgIG8gPSB7fVxuICAgICAgICAgICAgcyA9IHZ2LnNwbGl0KC9cXHNcXHMrLylcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgcy5sZW5ndGggPiAwIFxuICAgICAgICAgICAgICAgIG9bJz8nXSA9IHNbMF0gaWYgbm90IGVtcHR5IHNbMF1cbiAgICAgICAgICAgIGlmIHMubGVuZ3RoID4gMVxuICAgICAgICAgICAgICAgIGlmIHNbMV0gaW4gWycqJywgJyoqJ11cbiAgICAgICAgICAgICAgICAgICAgb1tzWzFdXSA9IG51bGxcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIG9bJz0nXSA9IG5vb24ucGFyc2Uoc1sxXSlbMF0gXG4gICAgICAgICAgICBpZiBzLmxlbmd0aCA+IDJcbiAgICAgICAgICAgICAgICBpZiBzWzJdLnN0YXJ0c1dpdGggJy0nXG4gICAgICAgICAgICAgICAgICAgIG9bJy0nXSA9IHNbMl0uc3Vic3RyIDFcbiAgICAgICAgICAgIFxuICAgICAgICAgICAga2FyZ0NvbmZpZ1twa2cubmFtZV1ba2tdID0gb1xuICAgICAgICAgICAgXG4gICAgICAgIGRlbGV0ZSBhcmdzLmluaXRcbiAgICAgICAgXG4gICAgICAgICMgbG9nICdrYXJnIGthcmdDb25maWc6Jywga2FyZ0NvbmZpZywgJ2thcmdPcHQ6Jywga2FyZ09wdFxuICAgICAgICBcbiAgICAgICAgZm9yIGssdiBvZiBrYXJnIGthcmdDb25maWcsIGthcmdPcHRcbiAgICAgICAgICAgIGFyZ3Nba10gPSB2XG4gICAgICAgICAgICBcbiAgICAgICAgYXJnc1xuICAgIFxuICAgIHBvc3Qub25HZXQgJ2FyZ3MnLCA9PiBhcmdzXG4gICAgXG4gICAgbW9kdWxlLmV4cG9ydHMgPSBhcmdzXG4iXX0=
//# sourceURL=../coffee/args.coffee