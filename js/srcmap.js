(function() {
  /*
   0000000  00000000    0000000  00     00   0000000   00000000   
  000       000   000  000       000   000  000   000  000   000  
  0000000   0000000    000       000000000  000000000  00000000   
       000  000   000  000       000 0 000  000   000  000        
  0000000   000   000   0000000  000   000  000   000  000        
  */
  var _, empty, errorStack, errorTrace, filePos, fs, log, logErr, mapConvert, regex1, regex2, slash, sourceMap, str, toCoffee, toJs, valid;

  ({fs, valid, empty, slash, str, log, _} = require('./kxk'));

  sourceMap = require('source-map');

  mapConvert = require('convert-source-map');

  regex1 = /^\s+at\s+(\S+)\s+\((.*):(\d+):(\d+)\)/;

  regex2 = /^\s+at\s+(.*):(\d+):(\d+)/;

  // 000       0000000    0000000   00000000  00000000   00000000   
  // 000      000   000  000        000       000   000  000   000  
  // 000      000   000  000  0000  0000000   0000000    0000000    
  // 000      000   000  000   000  000       000   000  000   000  
  // 0000000   0000000    0000000   00000000  000   000  000   000  
  logErr = function(err, sep = 'ðŸ’¥') {
    var i, len, line, ref, results, trace;
    console.log(errorStack(err));
    trace = errorTrace(err);
    console.log('trace:', str(trace));
    if (valid(trace.lines)) {
      log.flog({
        str: trace.text,
        source: trace.lines[0].file,
        line: trace.lines[0].line,
        sep: sep
      });
      ref = trace.lines;
      results = [];
      for (i = 0, len = ref.length; i < len; i++) {
        line = ref[i];
        sep = slash.isAbsolute(line.file) || line.file[0] === '~' ? 'ðŸž' : 'ðŸ”¼';
        if (sep === 'ðŸž' || line.file[0] === '.') {
          results.push(log.flog({
            str: '       ' + line.func,
            source: line.file,
            line: line.line,
            sep: sep
          }));
        } else {
          results.push(void 0);
        }
      }
      return results;
    } else {
      return log.flog({
        str: trace.text,
        source: '',
        line: 0,
        sep: sep
      });
    }
  };

  // 00000000  000  000      00000000  00000000    0000000    0000000  
  // 000       000  000      000       000   000  000   000  000       
  // 000000    000  000      0000000   00000000   000   000  0000000   
  // 000       000  000      000       000        000   000       000  
  // 000       000  0000000  00000000  000         0000000   0000000   
  filePos = function(line) {
    var mappedLine, match, result;
    if (match = regex1.exec(line)) {
      result = {
        func: match[1].replace('.<anonymous>', ''),
        file: match[2],
        line: match[3],
        col: match[4]
      };
      if (slash.ext(result.file) === 'js') {
        mappedLine = toCoffee(result.file, result.line, result.col);
        if (mappedLine != null) {
          result.file = mappedLine[0];
          result.line = mappedLine[1];
          result.col = mappedLine[2];
        }
      }
    } else if (match = regex2.exec(line)) {
      result = {
        func: slash.file(match[1]),
        file: match[1],
        line: match[2],
        col: match[3]
      };
      if (slash.ext(result.file) === 'js') {
        mappedLine = toCoffee(result.file, result.line, result.col);
        if (mappedLine != null) {
          result.file = mappedLine[0];
          result.line = mappedLine[1];
          result.col = mappedLine[2];
        }
      }
    }
    return result;
  };

  //  0000000  000000000   0000000    0000000  000   000  
  // 000          000     000   000  000       000  000   
  // 0000000      000     000000000  000       0000000    
  //      000     000     000   000  000       000  000   
  // 0000000      000     000   000   0000000  000   000  
  errorStack = function(err) {
    var fp, i, len, lines, ref, stackLine;
    lines = [];
    ref = err.stack.split('\n');
    for (i = 0, len = ref.length; i < len; i++) {
      stackLine = ref[i];
      if (fp = filePos(stackLine)) {
        lines.push(`       ${_.padEnd(fp.func, 30)} ${fp.file}:${fp.line}`);
      } else {
        lines.push(stackLine);
      }
    }
    return lines.join('\n');
  };

  // 000000000  00000000    0000000    0000000  00000000  
  //    000     000   000  000   000  000       000       
  //    000     0000000    000000000  000       0000000   
  //    000     000   000  000   000  000       000       
  //    000     000   000  000   000   0000000  00000000  
  errorTrace = function(err) {
    var fp, i, len, lines, ref, stackLine, text;
    lines = [];
    text = [];
    ref = err.stack.split('\n');
    // console.log err.stack
    for (i = 0, len = ref.length; i < len; i++) {
      stackLine = ref[i];
      if (fp = filePos(stackLine)) {
        lines.push(fp);
      } else {
        text.push(stackLine);
      }
    }
    return {
      lines: lines,
      text: text.join('\n')
    };
  };

  
  // 000000000   0000000          0000000   0000000   00000000  00000000  00000000  00000000  
  //    000     000   000        000       000   000  000       000       000       000       
  //    000     000   000        000       000   000  000000    000000    0000000   0000000   
  //    000     000   000        000       000   000  000       000       000       000       
  //    000      0000000          0000000   0000000   000       000       00000000  00000000  
  toCoffee = function(jsFile, jsLine, jsCol = 0) {
    var coffeeCol, coffeeFile, coffeeLine, consumer, mapData, pos, ref;
    jsLine = parseInt(jsLine);
    jsCol = parseInt(jsCol);
    coffeeFile = slash.tilde(jsFile);
    coffeeLine = jsLine;
    coffeeCol = jsCol;
    if (slash.fileExists(jsFile)) {
      mapData = (ref = mapConvert.fromSource(fs.readFileSync(jsFile, 'utf8'))) != null ? ref.toObject() : void 0;
      if (valid(mapData)) {
        if (mapData != null ? mapData.sources[0] : void 0) {
          mapData.sources[0] = slash.resolve(slash.join(slash.dir(jsFile), mapData != null ? mapData.sources[0] : void 0));
        }
        consumer = new sourceMap.SourceMapConsumer(mapData);
        if (consumer.originalPositionFor) {
          pos = consumer.originalPositionFor({
            line: jsLine,
            column: jsCol,
            bias: sourceMap.SourceMapConsumer.LEAST_UPPER_BOUND
          });
          if (valid(pos.line) && valid(pos.column)) {
            coffeeFile = slash.tilde(mapData.sources[0]);
            coffeeLine = pos.line;
            coffeeCol = pos.column;
          } else {
            log('no pos.line', pos);
          }
        } else {
          log('no consumer originalPositionFor', mapData);
          log('no consumer originalPositionFor', consumer);
        }
      }
    }
    return [coffeeFile, coffeeLine, coffeeCol];
  };

  // 000000000   0000000               000   0000000  
  //    000     000   000              000  000       
  //    000     000   000              000  0000000   
  //    000     000   000        000   000       000  
  //    000      0000000          0000000   0000000   
  toJs = function(coffeeFile, coffeeLine, coffeeCol = 0) {
    var consumer, jsFile, mapData, poss, ref, ref1, ref2;
    jsFile = coffeeFile.replace(/\/coffee\//, '/js/');
    jsFile = jsFile.replace(/\.coffee$/, '.js');
    if (!slash.fileExists(jsFile)) {
      return [null, null, null];
    }
    if (coffeeLine == null) {
      return jsFile;
    }
    mapData = (ref = mapConvert.fromSource(fs.readFileSync(jsFile, 'utf8'))) != null ? ref.toObject() : void 0;
    if (valid(mapData)) {
      if (mapData != null ? mapData.sources[0] : void 0) {
        mapData.sources[0] = slash.resolve(slash.join(slash.dir(jsFile), mapData != null ? mapData.sources[0] : void 0));
      }
      consumer = new sourceMap.SourceMapConsumer(mapData);
      if ((consumer != null ? consumer.allGeneratedPositionsFor : void 0) != null) {
        poss = consumer.allGeneratedPositionsFor({
          source: mapData.sources[0],
          line: coffeeLine //, column:coffeeCol
        });
        if (valid(poss)) {
          return [jsFile, (ref1 = poss[0]) != null ? ref1.line : void 0, (ref2 = poss[0]) != null ? ref2.column : void 0];
        } else {
          log('empty poss');
        }
      } else {
        log('no allGeneratedPositionsFor in', consumer);
      }
    }
    return [jsFile, null, null];
  };

  module.exports = {
    toJs: toJs,
    toCoffee: toCoffee,
    errorStack: errorStack,
    errorTrace: errorTrace,
    logErr: logErr
  };

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3JjbWFwLmpzIiwic291cmNlUm9vdCI6Ii4iLCJzb3VyY2VzIjpbIi4uL2NvZmZlZS9zcmNtYXAuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQUE7Ozs7Ozs7QUFBQSxNQUFBLENBQUEsRUFBQSxLQUFBLEVBQUEsVUFBQSxFQUFBLFVBQUEsRUFBQSxPQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxNQUFBLEVBQUEsVUFBQSxFQUFBLE1BQUEsRUFBQSxNQUFBLEVBQUEsS0FBQSxFQUFBLFNBQUEsRUFBQSxHQUFBLEVBQUEsUUFBQSxFQUFBLElBQUEsRUFBQTs7RUFRQSxDQUFBLENBQUUsRUFBRixFQUFNLEtBQU4sRUFBYSxLQUFiLEVBQW9CLEtBQXBCLEVBQTJCLEdBQTNCLEVBQWdDLEdBQWhDLEVBQXFDLENBQXJDLENBQUEsR0FBMkMsT0FBQSxDQUFRLE9BQVIsQ0FBM0M7O0VBRUEsU0FBQSxHQUFhLE9BQUEsQ0FBUSxZQUFSOztFQUNiLFVBQUEsR0FBYSxPQUFBLENBQVEsb0JBQVI7O0VBRWIsTUFBQSxHQUFhOztFQUNiLE1BQUEsR0FBYSw0QkFkYjs7Ozs7OztFQXNCQSxNQUFBLEdBQVMsUUFBQSxDQUFDLEdBQUQsRUFBTSxNQUFJLElBQVYsQ0FBQTtBQUVMLFFBQUEsQ0FBQSxFQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUEsR0FBQSxFQUFBLE9BQUEsRUFBQTtJQUFBLE9BQU8sQ0FBQyxHQUFSLENBQVksVUFBQSxDQUFXLEdBQVgsQ0FBWjtJQUNBLEtBQUEsR0FBUSxVQUFBLENBQVcsR0FBWDtJQUNSLE9BQU8sQ0FBQyxHQUFSLENBQVksUUFBWixFQUFzQixHQUFBLENBQUksS0FBSixDQUF0QjtJQUNBLElBQUcsS0FBQSxDQUFNLEtBQUssQ0FBQyxLQUFaLENBQUg7TUFDSSxHQUFHLENBQUMsSUFBSixDQUFTO1FBQUEsR0FBQSxFQUFJLEtBQUssQ0FBQyxJQUFWO1FBQWdCLE1BQUEsRUFBTyxLQUFLLENBQUMsS0FBTSxDQUFBLENB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VyxJQUFJLFNBQVMsQ0FBQyxpQkFBZCxDQUFnQyxPQUFoQztNQUNYLElBQUcsdUVBQUg7UUFDSSxJQUFBLEdBQU8sUUFBUSxDQUFDLHdCQUFULENBQWtDO1VBQUEsTUFBQSxFQUFPLE9BQU8sQ0FBQyxPQUFRLENBQUEsQ0FBQSxDQUF2QjtVQUEyQixJQUFBLEVBQUssVUFBaEM7UUFBQSxDQUFsQztRQUNQLElBQUcsS0FBQSxDQUFNLElBQU4sQ0FBSDtBQUNJLGlCQUFPLENBQUMsTUFBRCxpQ0FBZ0IsQ0FBRSxhQUFsQixpQ0FBK0IsQ0FBRSxlQUFqQyxFQURYO1NBQUEsTUFBQTtVQUdJLEdBQUEsQ0FBSSxZQUFKLEVBSEo7U0FGSjtPQUFBLE1BQUE7UUFPSSxHQUFBLENBQUksZ0NBQUosRUFBc0MsUUFBdEMsRUFQSjtPQUhKOztXQVlBLENBQUMsTUFBRCxFQUFTLElBQVQsRUFBZSxJQUFmO0VBdkJHOztFQXlCUCxNQUFNLENBQUMsT0FBUCxHQUNJO0lBQUEsSUFBQSxFQUFZLElBQVo7SUFDQSxRQUFBLEVBQVksUUFEWjtJQUVBLFVBQUEsRUFBWSxVQUZaO0lBR0EsVUFBQSxFQUFZLFVBSFo7SUFJQSxNQUFBLEVBQVk7RUFKWjtBQTNMSiIsInNvdXJjZXNDb250ZW50IjpbIiMjI1xuIDAwMDAwMDAgIDAwMDAwMDAwICAgIDAwMDAwMDAgIDAwICAgICAwMCAgIDAwMDAwMDAgICAwMDAwMDAwMCAgIFxuMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIFxuMDAwMDAwMCAgIDAwMDAwMDAgICAgMDAwICAgICAgIDAwMDAwMDAwMCAgMDAwMDAwMDAwICAwMDAwMDAwMCAgIFxuICAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMCAwIDAwMCAgMDAwICAgMDAwICAwMDAgICAgICAgIFxuMDAwMDAwMCAgIDAwMCAgIDAwMCAgIDAwMDAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAgICAgIFxuIyMjXG5cbnsgZnMsIHZhbGlkLCBlbXB0eSwgc2xhc2gsIHN0ciwgbG9nLCBfIH0gPSByZXF1aXJlICcuL2t4aydcblxuc291cmNlTWFwICA9IHJlcXVpcmUgJ3NvdXJjZS1tYXAnXG5tYXBDb252ZXJ0ID0gcmVxdWlyZSAnY29udmVydC1zb3VyY2UtbWFwJ1xuXG5yZWdleDEgICAgID0gL15cXHMrYXRcXHMrKFxcUyspXFxzK1xcKCguKik6KFxcZCspOihcXGQrKVxcKS9cclxucmVnZXgyICAgICA9IC9eXFxzK2F0XFxzKyguKik6KFxcZCspOihcXGQrKS9cclxuXG4jIDAwMCAgICAgICAwMDAwMDAwICAgIDAwMDAwMDAgICAwMDAwMDAwMCAgMDAwMDAwMDAgICAwMDAwMDAwMCAgIFxuIyAwMDAgICAgICAwMDAgICAwMDAgIDAwMCAgICAgICAgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICBcbiMgMDAwICAgICAgMDAwICAgMDAwICAwMDAgIDAwMDAgIDAwMDAwMDAgICAwMDAwMDAwICAgIDAwMDAwMDAgICAgXG4jIDAwMCAgICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgIFxuIyAwMDAwMDAwICAgMDAwMDAwMCAgICAwMDAwMDAwICAgMDAwMDAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICBcblxubG9nRXJyID0gKGVyciwgc2VwPSfwn5KlJykgLT5cbiAgICBcbiAgICBjb25zb2xlLmxvZyBlcnJvclN0YWNrIGVyclxuICAgIHRyYWNlID0gZXJyb3JUcmFjZSBlcnJcbiAgICBjb25zb2xlLmxvZyAndHJhY2U6Jywgc3RyIHRyYWNlXG4gICAgaWYgdmFsaWQgdHJhY2UubGluZXNcbiAgICAgICAgbG9nLmZsb2cgc3RyOnRyYWNlLnRleHQsIHNvdXJjZTp0cmFjZS5saW5lc1swXS5maWxlLCBsaW5lOnRyYWNlLmxpbmVzWzBdLmxpbmUsIHNlcDpzZXBcbiAgICAgICAgZm9yIGxpbmUgaW4gdHJhY2UubGluZXNcbiAgICAgICAgICAgIHNlcCA9IGlmIHNsYXNoLmlzQWJzb2x1dGUobGluZS5maWxlKSBvciBsaW5lLmZpbGVbMF09PSd+JyB0aGVuICfwn5CeJyBlbHNlICfwn5S8J1xuICAgICAgICAgICAgaWYgc2VwID09ICfwn5CeJyBvciBsaW5lLmZpbGVbMF0gPT0gJy4nXG4gICAgICAgICAgICAgICAgbG9nLmZsb2cgc3RyOicgICAgICAgJytsaW5lLmZ1bmMsIHNvdXJjZTpsaW5lLmZpbGUsIGxpbmU6bGluZS5saW5lLCBzZXA6c2VwXG4gICAgZWxzZVxuICAgICAgICBsb2cuZmxvZyBzdHI6dHJhY2UudGV4dCwgc291cmNlOicnLCBsaW5lOjAsIHNlcDpzZXBcblxuIyAwMDAwMDAwMCAgMDAwICAwMDAgICAgICAwMDAwMDAwMCAgMDAwMDAwMDAgICAgMDAwMDAwMCAgICAwMDAwMDAwICBcbiMgMDAwICAgICAgIDAwMCAgMDAwICAgICAgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAgICAgXG4jIDAwMDAwMCAgICAwMDAgIDAwMCAgICAgIDAwMDAwMDAgICAwMDAwMDAwMCAgIDAwMCAgIDAwMCAgMDAwMDAwMCAgIFxuIyAwMDAgICAgICAgMDAwICAwMDAgICAgICAwMDAgICAgICAgMDAwICAgICAgICAwMDAgICAwMDAgICAgICAgMDAwICBcbiMgMDAwICAgICAgIDAwMCAgMDAwMDAwMCAgMDAwMDAwMDAgIDAwMCAgICAgICAgIDAwMDAwMDAgICAwMDAwMDAwICAgXG5cbmZpbGVQb3MgPSAobGluZSkgLT5cblxuICAgIGlmIG1hdGNoID0gcmVnZXgxLmV4ZWMgbGluZVxuICAgICAgICBcbiAgICAgICAgcmVzdWx0ID1cbiAgICAgICAgICAgIGZ1bmM6IG1hdGNoWzFdLnJlcGxhY2UgJy48YW5vbnltb3VzPicsICcnXG4gICAgICAgICAgICBmaWxlOiBtYXRjaFsyXVxyXG4gICAgICAgICAgICBsaW5lOiBtYXRjaFszXVxyXG4gICAgICAgICAgICBjb2w6ICBtYXRjaFs0XVxyXG4gICAgICAgIFxuICAgICAgICBpZiBzbGFzaC5leHQocmVzdWx0LmZpbGUpID09ICdqcydcclxuICAgICAgICAgICAgXG4gICAgICAgICAgICBtYXBwZWRMaW5lID0gdG9Db2ZmZWUgcmVzdWx0LmZpbGUsIHJlc3VsdC5saW5lLCByZXN1bHQuY29sXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIG1hcHBlZExpbmU/XG4gICAgICAgICAgICAgICAgcmVzdWx0LmZpbGUgPSBtYXBwZWRMaW5lWzBdXG4gICAgICAgICAgICAgICAgcmVzdWx0LmxpbmUgPSBtYXBwZWRMaW5lWzFdXG4gICAgICAgICAgICAgICAgcmVzdWx0LmNvbCAgPSBtYXBwZWRMaW5lWzJdXG5cbiAgICBlbHNlIGlmIG1hdGNoID0gcmVnZXgyLmV4ZWMgbGluZVxuICAgICAgICBcbiAgICAgICAgcmVzdWx0ID1cbiAgICAgICAgICAgIGZ1bmM6IHNsYXNoLmZpbGUgbWF0Y2hbMV1cbiAgICAgICAgICAgIGZpbGU6IG1hdGNoWzFdXHJcbiAgICAgICAgICAgIGxpbmU6IG1hdGNoWzJdXHJcbiAgICAgICAgICAgIGNvbDogIG1hdGNoWzNdXHJcbiAgICAgICAgXG4gICAgICAgIGlmIHNsYXNoLmV4dChyZXN1bHQuZmlsZSkgPT0gJ2pzJ1xyXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIG1hcHBlZExpbmUgPSB0b0NvZmZlZSByZXN1bHQuZmlsZSwgcmVzdWx0LmxpbmUsIHJlc3VsdC5jb2xcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgbWFwcGVkTGluZT9cbiAgICAgICAgICAgICAgICByZXN1bHQuZmlsZSA9IG1hcHBlZExpbmVbMF1cbiAgICAgICAgICAgICAgICByZXN1bHQubGluZSA9IG1hcHBlZExpbmVbMV1cbiAgICAgICAgICAgICAgICByZXN1bHQuY29sICA9IG1hcHBlZExpbmVbMl1cbiAgICByZXN1bHRcblxuIyAgMDAwMDAwMCAgMDAwMDAwMDAwICAgMDAwMDAwMCAgICAwMDAwMDAwICAwMDAgICAwMDAgIFxuIyAwMDAgICAgICAgICAgMDAwICAgICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgIDAwMCAgIFxuIyAwMDAwMDAwICAgICAgMDAwICAgICAwMDAwMDAwMDAgIDAwMCAgICAgICAwMDAwMDAwICAgIFxuIyAgICAgIDAwMCAgICAgMDAwICAgICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgIDAwMCAgIFxuIyAwMDAwMDAwICAgICAgMDAwICAgICAwMDAgICAwMDAgICAwMDAwMDAwICAwMDAgICAwMDAgIFxuXG5lcnJvclN0YWNrID0gKGVycikgLT5cbiAgICBcbiAgICBsaW5lcyA9IFtdXHJcbiAgICBcbiAgICBmb3Igc3RhY2tMaW5lIGluIGVyci5zdGFjay5zcGxpdCAnXFxuJyBcclxuICAgICAgICBcbiAgICAgICAgaWYgZnAgPSBmaWxlUG9zIHN0YWNrTGluZVxuICAgICAgICAgICAgbGluZXMucHVzaCBcIiAgICAgICAje18ucGFkRW5kIGZwLmZ1bmMsIDMwfSAje2ZwLmZpbGV9OiN7ZnAubGluZX1cIiBcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIGxpbmVzLnB1c2ggc3RhY2tMaW5lIFxyXG5cciAgXG4gICAgbGluZXMuam9pbiAnXFxuJ1xuXG4jIDAwMDAwMDAwMCAgMDAwMDAwMDAgICAgMDAwMDAwMCAgICAwMDAwMDAwICAwMDAwMDAwMCAgXG4jICAgIDAwMCAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAgICAgXG4jICAgIDAwMCAgICAgMDAwMDAwMCAgICAwMDAwMDAwMDAgIDAwMCAgICAgICAwMDAwMDAwICAgXG4jICAgIDAwMCAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAgICAgXG4jICAgIDAwMCAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgICAwMDAwMDAwICAwMDAwMDAwMCAgXG5cbmVycm9yVHJhY2UgPSAoZXJyKSAtPlxuICAgIFxuICAgIGxpbmVzID0gW11cclxuICAgIHRleHQgID0gW11cblxuICAgICMgY29uc29sZS5sb2cgZXJyLnN0YWNrXG4gICAgXG4gICAgZm9yIHN0YWNrTGluZSBpbiBlcnIuc3RhY2suc3BsaXQgJ1xcbicgXHJcbiAgICAgICAgXG4gICAgICAgIGlmIGZwID0gZmlsZVBvcyBzdGFja0xpbmVcbiAgICAgICAgICAgIGxpbmVzLnB1c2ggZnBcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB0ZXh0LnB1c2ggc3RhY2tMaW5lIFxyXG5cciAgXG4gICAgbGluZXM6ICBsaW5lc1xuICAgIHRleHQ6ICAgdGV4dC5qb2luICdcXG4nXG4gICAgXG4jIDAwMDAwMDAwMCAgIDAwMDAwMDAgICAgICAgICAgMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAwMDAwMCAgMDAwMDAwMDAgIDAwMDAwMDAwICAwMDAwMDAwMCAgXG4jICAgIDAwMCAgICAgMDAwICAgMDAwICAgICAgICAwMDAgICAgICAgMDAwICAgMDAwICAwMDAgICAgICAgMDAwICAgICAgIDAwMCAgICAgICAwMDAgICAgICAgXG4jICAgIDAwMCAgICAgMDAwICAgMDAwICAgICAgICAwMDAgICAgICAgMDAwICAgMDAwICAwMDAwMDAgICAgMDAwMDAwICAgIDAwMDAwMDAgICAwMDAwMDAwICAgXG4jICAgIDAwMCAgICAgMDAwICAgMDAwICAgICAgICAwMDAgICAgICAgMDAwICAgMDAwICAwMDAgICAgICAgMDAwICAgICAgIDAwMCAgICAgICAwMDAgICAgICAgXG4jICAgIDAwMCAgICAgIDAwMDAwMDAgICAgICAgICAgMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAgICAgICAgMDAwICAgICAgIDAwMDAwMDAwICAwMDAwMDAwMCAgXG5cbnRvQ29mZmVlID0gKGpzRmlsZSwganNMaW5lLCBqc0NvbD0wKSAtPlxuXG4gICAganNMaW5lID0gcGFyc2VJbnQganNMaW5lXG4gICAganNDb2wgID0gcGFyc2VJbnQganNDb2xcbiAgICBcbiAgICBjb2ZmZWVGaWxlID0gc2xhc2gudGlsZGUganNGaWxlXG4gICAgY29mZmVlTGluZSA9IGpzTGluZVxuICAgIGNvZmZlZUNvbCAgPSBqc0NvbFxuICAgICAgICBcbiAgICBpZiBzbGFzaC5maWxlRXhpc3RzIGpzRmlsZVxuICAgICAgICBtYXBEYXRhID0gbWFwQ29udmVydC5mcm9tU291cmNlKGZzLnJlYWRGaWxlU3luYyBqc0ZpbGUsICd1dGY4Jyk/LnRvT2JqZWN0KClcbiAgICAgICAgaWYgdmFsaWQgbWFwRGF0YVxuICAgICAgICAgICAgbWFwRGF0YS5zb3VyY2VzWzBdID0gc2xhc2gucmVzb2x2ZSBzbGFzaC5qb2luIHNsYXNoLmRpcihqc0ZpbGUpLCBtYXBEYXRhPy5zb3VyY2VzWzBdIGlmIG1hcERhdGE/LnNvdXJjZXNbMF1cbiAgICAgICAgICAgIGNvbnN1bWVyID0gbmV3IHNvdXJjZU1hcC5Tb3VyY2VNYXBDb25zdW1lciBtYXBEYXRhXG4gICAgICAgICAgICBpZiBjb25zdW1lci5vcmlnaW5hbFBvc2l0aW9uRm9yXG4gICAgICAgICAgICAgICAgcG9zID0gY29uc3VtZXIub3JpZ2luYWxQb3NpdGlvbkZvciBsaW5lOmpzTGluZSwgY29sdW1uOmpzQ29sLCBiaWFzOnNvdXJjZU1hcC5Tb3VyY2VNYXBDb25zdW1lci5MRUFTVF9VUFBFUl9CT1VORFxuICAgICAgICAgICAgICAgIGlmIHZhbGlkKHBvcy5saW5lKSBhbmQgdmFsaWQocG9zLmNvbHVtbilcbiAgICAgICAgICAgICAgICAgICAgY29mZmVlRmlsZSA9IHNsYXNoLnRpbGRlIG1hcERhdGEuc291cmNlc1swXVxuICAgICAgICAgICAgICAgICAgICBjb2ZmZWVMaW5lID0gcG9zLmxpbmUgXG4gICAgICAgICAgICAgICAgICAgIGNvZmZlZUNvbCAgPSBwb3MuY29sdW1uXG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBsb2cgJ25vIHBvcy5saW5lJywgcG9zXG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgbG9nICdubyBjb25zdW1lciBvcmlnaW5hbFBvc2l0aW9uRm9yJywgbWFwRGF0YVxuICAgICAgICAgICAgICAgIGxvZyAnbm8gY29uc3VtZXIgb3JpZ2luYWxQb3NpdGlvbkZvcicsIGNvbnN1bWVyXG4gICAgICAgIFxuICAgIFtjb2ZmZWVGaWxlLCBjb2ZmZWVMaW5lLCBjb2ZmZWVDb2xdXG5cbiMgMDAwMDAwMDAwICAgMDAwMDAwMCAgICAgICAgICAgICAgIDAwMCAgIDAwMDAwMDAgIFxuIyAgICAwMDAgICAgIDAwMCAgIDAwMCAgICAgICAgICAgICAgMDAwICAwMDAgICAgICAgXG4jICAgIDAwMCAgICAgMDAwICAgMDAwICAgICAgICAgICAgICAwMDAgIDAwMDAwMDAgICBcbiMgICAgMDAwICAgICAwMDAgICAwMDAgICAgICAgIDAwMCAgIDAwMCAgICAgICAwMDAgIFxuIyAgICAwMDAgICAgICAwMDAwMDAwICAgICAgICAgIDAwMDAwMDAgICAwMDAwMDAwICAgXG5cbnRvSnMgPSAoY29mZmVlRmlsZSwgY29mZmVlTGluZSwgY29mZmVlQ29sPTApIC0+XG4gICAgXG4gICAganNGaWxlID0gY29mZmVlRmlsZS5yZXBsYWNlIC9cXC9jb2ZmZWVcXC8vLCAnL2pzLydcbiAgICBqc0ZpbGUgPSBqc0ZpbGUucmVwbGFjZSAvXFwuY29mZmVlJC8sICcuanMnXG4gICAgXG4gICAgaWYgbm90IHNsYXNoLmZpbGVFeGlzdHMganNGaWxlXG4gICAgICAgIHJldHVybiBbbnVsbCwgbnVsbCwgbnVsbF1cbiAgICAgICAgXG4gICAgaWYgbm90IGNvZmZlZUxpbmU/IHRoZW4gcmV0dXJuIGpzRmlsZVxuICAgIFxuICAgIG1hcERhdGEgPSBtYXBDb252ZXJ0LmZyb21Tb3VyY2UoZnMucmVhZEZpbGVTeW5jIGpzRmlsZSwgJ3V0ZjgnKT8udG9PYmplY3QoKVxuICAgIGlmIHZhbGlkIG1hcERhdGFcbiAgICAgICAgbWFwRGF0YS5zb3VyY2VzWzBdID0gc2xhc2gucmVzb2x2ZSBzbGFzaC5qb2luIHNsYXNoLmRpcihqc0ZpbGUpLCBtYXBEYXRhPy5zb3VyY2VzWzBdIGlmIG1hcERhdGE/LnNvdXJjZXNbMF1cbiAgICAgICAgY29uc3VtZXIgPSBuZXcgc291cmNlTWFwLlNvdXJjZU1hcENvbnN1bWVyIG1hcERhdGFcbiAgICAgICAgaWYgY29uc3VtZXI/LmFsbEdlbmVyYXRlZFBvc2l0aW9uc0Zvcj9cbiAgICAgICAgICAgIHBvc3MgPSBjb25zdW1lci5hbGxHZW5lcmF0ZWRQb3NpdGlvbnNGb3Igc291cmNlOm1hcERhdGEuc291cmNlc1swXSwgbGluZTpjb2ZmZWVMaW5lIywgY29sdW1uOmNvZmZlZUNvbFxuICAgICAgICAgICAgaWYgdmFsaWQgcG9zc1xuICAgICAgICAgICAgICAgIHJldHVybiBbanNGaWxlLCBwb3NzWzBdPy5saW5lLCBwb3NzWzBdPy5jb2x1bW5dXG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgbG9nICdlbXB0eSBwb3NzJ1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBsb2cgJ25vIGFsbEdlbmVyYXRlZFBvc2l0aW9uc0ZvciBpbicsIGNvbnN1bWVyXG4gICAgICAgIFxuICAgIFtqc0ZpbGUsIG51bGwsIG51bGxdXG4gICAgICAgIFxubW9kdWxlLmV4cG9ydHMgPVxuICAgIHRvSnM6ICAgICAgIHRvSnNcbiAgICB0b0NvZmZlZTogICB0b0NvZmZlZVxuICAgIGVycm9yU3RhY2s6IGVycm9yU3RhY2tcbiAgICBlcnJvclRyYWNlOiBlcnJvclRyYWNlXG4gICAgbG9nRXJyOiAgICAgbG9nRXJyXG4gICAgXG4gICAgIl19
//# sourceURL=../coffee/srcmap.coffee