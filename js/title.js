  /*
  000000000  000  000000000  000      00000000
     000     000     000     000      000     
     000     000     000     000      0000000 
     000     000     000     000      000     
     000     000     000     0000000  00000000
  */
var $, Title, _, elem, empty, keyinfo, log, menu, noon, post, prefs, scheme, sds, slash, stopEvent, str,
  indexOf = [].indexOf;

({elem, sds, prefs, slash, scheme, empty, post, stopEvent, keyinfo, menu, noon, str, log, $, _} = require('./kxk'));

Title = class Title {
  constructor(opt) {
    var pkg, ref;
    this.onTitlebar = this.onTitlebar.bind(this);
    
    // 00     00  00000000  000   000  000   000  
    // 000   000  000       0000  000  000   000  
    // 000000000  0000000   000 0 000  000   000  
    // 000 0 000  000       000  0000  000   000  
    // 000   000  00000000  000   000   0000000   
    this.onMenuAction = this.onMenuAction.bind(this);
    this.menuVisible = this.menuVisible.bind(this);
    this.showMenu = this.showMenu.bind(this);
    this.hideMenu = this.hideMenu.bind(this);
    this.toggleMenu = this.toggleMenu.bind(this);
    this.openMenu = this.openMenu.bind(this);
    this.opt = opt;
    post.on('titlebar', this.onTitlebar);
    post.on('menuAction', this.onMenuAction);
    if (this.opt == null) {
      this.opt = {};
    }
    pkg = this.opt.pkg;
    this.elem = $((ref = this.opt.elem) != null ? ref : "#titlebar");
    this.elem.addEventListener('dblclick', function(event) {
      return stopEvent(event, post.emit('menuAction', 'Maximize'));
    });
    this.winicon = elem({
      class: 'winicon'
    });
    this.winicon.appendChild(elem('img', {
      src: slash.fileUrl(slash.join(this.opt.dir, this.opt.icon))
    }));
    this.elem.appendChild(this.winicon);
    this.winicon.addEventListener('click', function() {
      return post.emit('menuAction', 'Open Menu');
    });
    this.title = elem({
      class: 'titlebar-title'
    });
    this.elem.appendChild(this.title);
    this.setTitle(pkg);
    
    // ‚Äî ‚óª üû©
    this.minimize = elem({
      class: 'winbutton minimize gray'
    });
    this.minimize.innerHTML = "<svg width=\"100%\" height=\"100%\" viewBox=\"-10 -8 30 30\">\n    <line x1=\"-1\" y1=\"5\" x2=\"11\" y2=\"5\"></line>\n</svg>";
    this.elem.appendChild(this.minimize);
    this.minimize.addEventListener('click', function() {
      return post.emit('menuAction', 'Minimize');
    });
    this.maximize = elem({
      class: 'winbutton maximize gray'
    });
    this.maximize.innerHTML = "<svg width=\"100%\" height=\"100%\" viewBox=\"-10 -9 30 30\">\n  <rect width=\"11\" height=\"11\" style=\"fill-opacity: 0;\"></rect>\n</svg>";
    this.elem.appendChild(this.maximize);
    this.maximize.addEventListener('click', function() {
      return post.emit('menuAction', 'Maximize');
    });
    this.close = elem({
      class: 'winbutton close'
    });
    this.close.innerHTML = "<svg width=\"100%\" height=\"100%\" viewBox=\"-10 -9 30 30\">\n    <line x1=\"0\" y1=\"0\" x2=\"10\" y2=\"11\"></line>\n    <line x1=\"10\" y1=\"0\" x2=\"0\" y2=\"11\"></line>\n</svg>";
    this.elem.appendChild(this.close);
    this.close.addEventListener('click', function() {
      return post.emit('menuAction', 'Close');
    });
    this.topframe = elem({
      class: 'topframe'
    });
    this.elem.appendChild(this.topframe);
    this.initStyle();
    if (this.opt.menu) {
      this.initMenu(this.menuTemplate());
    }
  }

  
  // 00000000   000   000   0000000  000   000  00000000  000      00000000  00     00  
  // 000   000  000   000  000       000   000  000       000      000       000   000  
  // 00000000   000   000  0000000   000000000  0000000   000      0000000   000000000  
  // 000        000   000       000  000   000  000       000      000       000 0 000  
  // 000         0000000   0000000   000   000  00000000  0000000  00000000  000   000  
  pushElem(elem) {
    return this.elem.insertBefore(elem, this.minimize);
  }

  showTitle() {
    return this.title.style.display = 'initial';
  }

  hideTitle() {
    return this.title.style.display = 'none';
  }

  setTitle(info) {
    var html;
    html = `<span class='titlebar-name'>${info.name}</span>`;
    if (info.version) {
      html += "<span class='titlebar-dot'> ‚óè </span>";
      html += `<span class='titlebar-version'>${info.version}</span>`;
    }
    if (info.path) {
      html += "<span class='titlebar-dot'> ‚ñ∫ </span>";
      html += `<span class='titlebar-version'>${info.path}</span>`;
    }
    return this.title.innerHTML = html;
  }

  onTitlebar(action) {
    switch (action) {
      case 'showTitle':
        return this.showTitle();
      case 'hideTitle':
        return this.hideTitle();
      case 'showMenu':
        return this.showMenu();
      case 'hideMenu':
        return this.hideMenu();
      case 'toggleMenu':
        return this.toggleMenu();
    }
  }

  onMenuAction(action, args) {
    var electron, maximized, wa, wb, win;
    electron = require('electron');
    win = electron.remote.getCurrentWindow();
    switch (action) {
      case 'Toggle Menu':
        return this.toggleMenu();
      case 'Open Menu':
        return this.openMenu();
      case 'Show Menu':
        return this.showMenu();
      case 'Hide Menu':
        return this.hideMenu();
      case 'Toggle Scheme':
        if (this.opt.scheme !== false) {
          return scheme.toggle();
        }
        break;
      case 'DevTools':
        return win.webContents.toggleDevTools();
      case 'Reload':
        return win.webContents.reloadIgnoringCache();
      case 'Close':
        return win.close();
      case 'Minimize':
        return win.minimize();
      case 'Maximize':
        wa = electron.screen.getPrimaryDisplay().workAreaSize;
        wb = win.getBounds();
        maximized = win.isMaximized() || (wb.width === wa.width && wb.height === wa.height);
        if (maximized) {
          return win.unmaximize();
        } else {
          return win.maximize();
        }
    }
  }

  menuTemplate() {
    if (empty(this.templateCache)) {
      // log 'menuTemplate', slash.resolve slash.join @opt.dir, @opt.menu
      this.templateCache = this.makeTemplate(noon.load(slash.resolve(slash.join(this.opt.dir, this.opt.menu))));
    }
    if (this.opt.menuTemplate != null) {
      return this.opt.menuTemplate(this.templateCache);
    } else {
      return this.templateCache;
    }
  }

  makeTemplate(obj) {
    var item, menuOrAccel, text, tmpl;
    tmpl = [];
    for (text in obj) {
      menuOrAccel = obj[text];
      tmpl.push((function() {
        switch (false) {
          case !(empty(menuOrAccel) && text.startsWith('-')):
            return {
              text: ''
            };
          case !_.isNumber(menuOrAccel):
            return {
              text: text,
              accel: str(menuOrAccel)
            };
          case !_.isString(menuOrAccel):
            return {
              text: text,
              accel: keyinfo.convertCmdCtrl(menuOrAccel)
            };
          case !empty(menuOrAccel):
            return {
              text: text,
              accel: ''
            };
          default:
            if ((menuOrAccel.accel != null) || (menuOrAccel.command != null)) { // needs better test!
              item = _.clone(menuOrAccel);
              item.text = text;
              return item;
            } else {
              return {
                text: text,
                menu: this.makeTemplate(menuOrAccel)
              };
            }
        }
      }).call(this));
    }
    return tmpl;
  }

  initMenu(items) {
    this.menu = new menu({
      items: items
    });
    this.elem.insertBefore(this.menu.elem, this.elem.firstChild.nextSibling);
    return this.hideMenu();
  }

  menuVisible() {
    return this.menu.elem.style.display !== 'none';
  }

  showMenu() {
    var ref;
    this.menu.elem.style.display = 'inline-block';
    if ((ref = this.menu) != null) {
      if (typeof ref.focus === "function") {
        ref.focus();
      }
    }
    return post.emit('titlebar', 'hideTitle');
  }

  hideMenu() {
    var ref;
    if ((ref = this.menu) != null) {
      ref.close();
    }
    this.menu.elem.style.display = 'none';
    return post.emit('titlebar', 'showTitle');
  }

  toggleMenu() {
    if (this.menuVisible()) {
      return this.hideMenu();
    } else {
      return this.showMenu();
    }
  }

  openMenu() {
    if (this.menuVisible()) {
      return this.hideMenu();
    } else {
      this.showMenu();
      return this.menu.open();
    }
  }

  //  0000000  000000000  000   000  000      00000000  
  // 000          000      000 000   000      000       
  // 0000000      000       00000    000      0000000   
  //      000     000        000     000      000       
  // 0000000      000        000     0000000  00000000  
  initStyle() {
    var href, link, titleStyle;
    if (link = $("#style-link")) {
      href = slash.fileUrl(slash.resolve(slash.join(__dirname, "css/style.css")));
      titleStyle = elem('link', {
        href: href,
        rel: 'stylesheet',
        type: 'text/css'
      });
      link.parentNode.insertBefore(titleStyle, link);
      href = slash.fileUrl(slash.resolve(slash.join(__dirname, `css/${prefs.get('scheme', 'dark')}.css`)));
      titleStyle = elem('link', {
        href: href,
        rel: 'stylesheet',
        type: 'text/css',
        id: 'style-title'
      });
      return link.parentNode.insertBefore(titleStyle, link);
    }
  }

  
  // 000   000  00000000  000   000
  // 000  000   000        000 000
  // 0000000    0000000     00000
  // 000  000   000          000
  // 000   000  00000000     000
  handleKey(event) {
    var combo, combos, i, item, keypath, len, mainMenu, ref, ref1;
    ({combo} = keyinfo.forEvent(event));
    mainMenu = this.menuTemplate();
    ref = sds.find.key(mainMenu, 'accel');
    for (i = 0, len = ref.length; i < len; i++) {
      keypath = ref[i];
      combos = sds.get(mainMenu, keypath).split(' ');
      combos = combos.map(function(combo) {
        return keyinfo.convertCmdCtrl(combo);
      });
      if (indexOf.call(combos, combo) >= 0) {
        keypath.pop();
        item = sds.get(mainMenu, keypath);
        post.emit('menuAction', (ref1 = item.action) != null ? ref1 : item.text, item);
        return item;
      }
    }
    return 'unhandled';
  }

};

module.exports = Title;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGl0bGUuanMiLCJzb3VyY2VSb290IjoiLiIsInNvdXJjZXMiOlsiLi4vY29mZmVlL3RpdGxlLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7OztBQUFBLElBQUEsQ0FBQSxFQUFBLEtBQUEsRUFBQSxDQUFBLEVBQUEsSUFBQSxFQUFBLEtBQUEsRUFBQSxPQUFBLEVBQUEsR0FBQSxFQUFBLElBQUEsRUFBQSxJQUFBLEVBQUEsSUFBQSxFQUFBLEtBQUEsRUFBQSxNQUFBLEVBQUEsR0FBQSxFQUFBLEtBQUEsRUFBQSxTQUFBLEVBQUEsR0FBQTtFQUFBOztBQVFBLENBQUEsQ0FBRSxJQUFGLEVBQVEsR0FBUixFQUFhLEtBQWIsRUFBb0IsS0FBcEIsRUFBMkIsTUFBM0IsRUFBbUMsS0FBbkMsRUFBMEMsSUFBMUMsRUFBZ0QsU0FBaEQsRUFBMkQsT0FBM0QsRUFBb0UsSUFBcEUsRUFBMEUsSUFBMUUsRUFBZ0YsR0FBaEYsRUFBcUYsR0FBckYsRUFBMEYsQ0FBMUYsRUFBNkYsQ0FBN0YsQ0FBQSxHQUFtRyxPQUFBLENBQVEsT0FBUixDQUFuRzs7QUFFTSxRQUFOLE1BQUEsTUFBQTtFQUVJLFdBQWEsSUFBQSxDQUFBO0FBRVQsUUFBQSxHQUFBLEVBQUE7UUFzRkosQ0FBQSxpQkFBQSxDQUFBLHNCQXRGSTs7Ozs7OztRQXFHSixDQUFBLG1CQUFBLENBQUE7UUFpRUEsQ0FBQSxrQkFBQSxDQUFBO1FBQ0EsQ0FBQSxlQUFBLENBQUE7UUFDQSxDQUFBLGVBQUEsQ0FBQTtRQUNBLENBQUEsaUJBQUEsQ0FBQTtRQUNBLENBQUEsZUFBQSxDQUFBO0lBNUtjLElBQUMsQ0FBQTtJQUVYLElBQUksQ0FBQyxFQUFMLENBQVEsVUFBUixFQUFzQixJQUFDLENBQUEsVUFBdkI7SUFDQSxJQUFJLENBQUMsRUFBTCxDQUFRLFlBQVIsRUFBc0IsSUFBQyxDQUFBLFlBQXZCOztNQUVBLElBQUMsQ0FBQSxNQUFPLENBQUE7O0lBRVIsR0FBQSxHQUFNLElBQUMsQ0FBQSxH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O1FBRUEsSUFBQSxFQUFNLFVBRk47UUFHQSxFQUFBLEVBQU07TUFITixDQURTO2FBTWIsSUFBSSxDQUFDLFVBQVUsQ0FBQyxZQUFoQixDQUE2QixVQUE3QixFQUF5QyxJQUF6QyxFQWpCSjs7RUFGTyxDQXBMWDs7Ozs7Ozs7RUErTUEsU0FBVyxDQUFDLEtBQUQsQ0FBQTtBQUVQLFFBQUEsS0FBQSxFQUFBLE1BQUEsRUFBQSxDQUFBLEVBQUEsSUFBQSxFQUFBLE9BQUEsRUFBQSxHQUFBLEVBQUEsUUFBQSxFQUFBLEdBQUEsRUFBQTtJQUFBLENBQUEsQ0FBRSxLQUFGLENBQUEsR0FBWSxPQUFPLENBQUMsUUFBUixDQUFpQixLQUFqQixDQUFaO0lBRUEsUUFBQSxHQUFXLElBQUMsQ0FBQSxZQUFELENBQUE7QUFFWDtJQUFBLEtBQUEscUNBQUE7O01BQ0ksTUFBQSxHQUFTLEdBQUcsQ0FBQyxHQUFKLENBQVEsUUFBUixFQUFrQixPQUFsQixDQUEwQixDQUFDLEtBQTNCLENBQWlDLEdBQWpDO01BQ1QsTUFBQSxHQUFTLE1BQU0sQ0FBQyxHQUFQLENBQVcsUUFBQSxDQUFDLEtBQUQsQ0FBQTtlQUFXLE9BQU8sQ0FBQyxjQUFSLENBQXVCLEtBQXZCO01BQVgsQ0FBWDtNQUNULElBQUcsYUFBUyxNQUFULEVBQUEsS0FBQSxNQUFIO1FBQ0ksT0FBTyxDQUFDLEdBQVIsQ0FBQTtRQUNBLElBQUEsR0FBTyxHQUFHLENBQUMsR0FBSixDQUFRLFFBQVIsRUFBa0IsT0FBbEI7UUFDUCxJQUFJLENBQUMsSUFBTCxDQUFVLFlBQVYsd0NBQXNDLElBQUksQ0FBQyxJQUEzQyxFQUFpRCxJQUFqRDtBQUNBLGVBQU8sS0FKWDs7SUFISjtXQVNBO0VBZk87O0FBak5mOztBQWtPQSxNQUFNLENBQUMsT0FBUCxHQUFpQiIsInNvdXJjZXNDb250ZW50IjpbIiMjI1xuMDAwMDAwMDAwICAwMDAgIDAwMDAwMDAwMCAgMDAwICAgICAgMDAwMDAwMDBcbiAgIDAwMCAgICAgMDAwICAgICAwMDAgICAgIDAwMCAgICAgIDAwMCAgICAgXG4gICAwMDAgICAgIDAwMCAgICAgMDAwICAgICAwMDAgICAgICAwMDAwMDAwIFxuICAgMDAwICAgICAwMDAgICAgIDAwMCAgICAgMDAwICAgICAgMDAwICAgICBcbiAgIDAwMCAgICAgMDAwICAgICAwMDAgICAgIDAwMDAwMDAgIDAwMDAwMDAwXG4jIyNcblxueyBlbGVtLCBzZHMsIHByZWZzLCBzbGFzaCwgc2NoZW1lLCBlbXB0eSwgcG9zdCwgc3RvcEV2ZW50LCBrZXlpbmZvLCBtZW51LCBub29uLCBzdHIsIGxvZywgJCwgXyB9ID0gcmVxdWlyZSAnLi9reGsnXG5cbmNsYXNzIFRpdGxlXG4gICAgXG4gICAgY29uc3RydWN0b3I6IChAb3B0KSAtPlxuXG4gICAgICAgIHBvc3Qub24gJ3RpdGxlYmFyJywgICBAb25UaXRsZWJhclxuICAgICAgICBwb3N0Lm9uICdtZW51QWN0aW9uJywgQG9uTWVudUFjdGlvblxuICAgICAgICBcbiAgICAgICAgQG9wdCA/PSB7fVxuICAgICAgICBcbiAgICAgICAgcGtnID0gQG9wdC5wa2dcbiAgICAgICAgXG4gICAgICAgIEBlbGVtID0kIEBvcHQuZWxlbSA/IFwiI3RpdGxlYmFyXCJcbiAgICAgICAgQGVsZW0uYWRkRXZlbnRMaXN0ZW5lciAnZGJsY2xpY2snLCAoZXZlbnQpIC0+IHN0b3BFdmVudCBldmVudCwgcG9zdC5lbWl0ICdtZW51QWN0aW9uJywgJ01heGltaXplJ1xuICAgICAgICAgICAgICAgIFxuICAgICAgICBAd2luaWNvbiA9IGVsZW0gY2xhc3M6ICd3aW5pY29uJ1xuICAgICAgICBAd2luaWNvbi5hcHBlbmRDaGlsZCBlbGVtICdpbWcnLCBzcmM6c2xhc2guZmlsZVVybCBzbGFzaC5qb2luIEBvcHQuZGlyLCBAb3B0Lmljb25cbiAgICAgICAgQGVsZW0uYXBwZW5kQ2hpbGQgQHdpbmljb25cbiAgICAgICAgQHdpbmljb24uYWRkRXZlbnRMaXN0ZW5lciAnY2xpY2snLCAtPiBwb3N0LmVtaXQgJ21lbnVBY3Rpb24nLCAnT3BlbiBNZW51JyAgIFxuICAgICAgICBcbiAgICAgICAgQHRpdGxlID0gZWxlbSBjbGFzczogJ3RpdGxlYmFyLXRpdGxlJ1xuICAgICAgICBAZWxlbS5hcHBlbmRDaGlsZCBAdGl0bGVcbiAgICAgICAgQHNldFRpdGxlIHBrZ1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAjIOKAlCDil7sg8J+eqVxuICAgICAgICBcbiAgICAgICAgQG1pbmltaXplID0gZWxlbSBjbGFzczogJ3dpbmJ1dHRvbiBtaW5pbWl6ZSBncmF5J1xuICAgICAgICBcbiAgICAgICAgQG1pbmltaXplLmlubmVySFRNTCA9IFwiXCJcIlxuICAgICAgICAgICAgPHN2ZyB3aWR0aD1cIjEwMCVcIiBoZWlnaHQ9XCIxMDAlXCIgdmlld0JveD1cIi0xMCAtOCAzMCAzMFwiPlxuICAgICAgICAgICAgICAgIDxsaW5lIHgxPVwiLTFcIiB5MT1cIjVcIiB4Mj1cIjExXCIgeTI9XCI1XCI+PC9saW5lPlxuICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgIFwiXCJcIlxuICAgICAgICBcbiAgICAgICAgQGVsZW0uYXBwZW5kQ2hpbGQgQG1pbmltaXplXG4gICAgICAgIEBtaW5pbWl6ZS5hZGRFdmVudExpc3RlbmVyICdjbGljaycsIC0+IHBvc3QuZW1pdCAnbWVudUFjdGlvbicsICdNaW5pbWl6ZSdcbiAgICAgICAgXG4gICAgICAgIEBtYXhpbWl6ZSA9IGVsZW0gY2xhc3M6ICd3aW5idXR0b24gbWF4aW1pemUgZ3JheSdcbiAgICAgICAgXG4gICAgICAgIEBtYXhpbWl6ZS5pbm5lckhUTUwgPSBcIlwiXCJcbiAgICAgICAgICAgIDxzdmcgd2lkdGg9XCIxMDAlXCIgaGVpZ2h0PVwiMTAwJVwiIHZpZXdCb3g9XCItMTAgLTkgMzAgMzBcIj5cbiAgICAgICAgICAgICAgPHJlY3Qgd2lkdGg9XCIxMVwiIGhlaWdodD1cIjExXCIgc3R5bGU9XCJmaWxsLW9wYWNpdHk6IDA7XCI+PC9yZWN0PlxuICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgIFwiXCJcIlxuICAgICAgICBAZWxlbS5hcHBlbmRDaGlsZCBAbWF4aW1pemVcbiAgICAgICAgQG1heGltaXplLmFkZEV2ZW50TGlzdGVuZXIgJ2NsaWNrJywgLT4gcG9zdC5lbWl0ICdtZW51QWN0aW9uJywgJ01heGltaXplJ1xuXG4gICAgICAgIEBjbG9zZSA9IGVsZW0gY2xhc3M6ICd3aW5idXR0b24gY2xvc2UnXG4gICAgICAgIFxuICAgICAgICBAY2xvc2UuaW5uZXJIVE1MID0gXCJcIlwiXG4gICAgICAgICAgICA8c3ZnIHdpZHRoPVwiMTAwJVwiIGhlaWdodD1cIjEwMCVcIiB2aWV3Qm94PVwiLTEwIC05IDMwIDMwXCI+XG4gICAgICAgICAgICAgICAgPGxpbmUgeDE9XCIwXCIgeTE9XCIwXCIgeDI9XCIxMFwiIHkyPVwiMTFcIj48L2xpbmU+XG4gICAgICAgICAgICAgICAgPGxpbmUgeDE9XCIxMFwiIHkxPVwiMFwiIHgyPVwiMFwiIHkyPVwiMTFcIj48L2xpbmU+XG4gICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgXCJcIlwiXG4gICAgICAgIFxuICAgICAgICBAZWxlbS5hcHBlbmRDaGlsZCBAY2xvc2VcbiAgICAgICAgQGNsb3NlLmFkZEV2ZW50TGlzdGVuZXIgJ2NsaWNrJywgLT4gcG9zdC5lbWl0ICdtZW51QWN0aW9uJywgJ0Nsb3NlJ1xuXG4gICAgICAgIEB0b3BmcmFtZSA9IGVsZW0gY2xhc3M6ICd0b3BmcmFtZSdcbiAgICAgICAgQGVsZW0uYXBwZW5kQ2hpbGQgQHRvcGZyYW1lXG4gICAgICAgIFxuICAgICAgICBAaW5pdFN0eWxlKClcbiAgICAgICAgXG4gICAgICAgIGlmIEBvcHQubWVudVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBAaW5pdE1lbnUgQG1lbnVUZW1wbGF0ZSgpXG4gICAgICAgXG4gICAgIyAwMDAwMDAwMCAgIDAwMCAgIDAwMCAgIDAwMDAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMDAgIDAwMCAgICAgIDAwMDAwMDAwICAwMCAgICAgMDAgIFxuICAgICMgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAgICAwMDAgICAgICAgMDAwICAgMDAwICBcbiAgICAjIDAwMDAwMDAwICAgMDAwICAgMDAwICAwMDAwMDAwICAgMDAwMDAwMDAwICAwMDAwMDAwICAgMDAwICAgICAgMDAwMDAwMCAgIDAwMDAwMDAwMCAgXG4gICAgIyAwMDAgICAgICAgIDAwMCAgIDAwMCAgICAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMCAgICAgIDAwMCAgICAgICAwMDAgMCAwMDAgIFxuICAgICMgMDAwICAgICAgICAgMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAgICAwMDAgIDAwMDAwMDAwICAwMDAwMDAwICAwMDAwMDAwMCAgMDAwICAgMDAwICBcbiAgICBcbiAgICBwdXNoRWxlbTogKGVsZW0pIC0+XG4gICAgICAgIFxuICAgICAgICBAZWxlbS5pbnNlcnRCZWZvcmUgZWxlbSwgQG1pbmltaXplXG4gICAgICAgICAgICBcbiAgICBzaG93VGl0bGU6IC0+IEB0aXRsZS5zdHlsZS5kaXNwbGF5ID0gJ2luaXRpYWwnXG4gICAgaGlkZVRpdGxlOiAtPiBAdGl0bGUuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuXG4gICAgc2V0VGl0bGU6IChpbmZvKSAtPlxuICAgICAgICBodG1sICA9IFwiPHNwYW4gY2xhc3M9J3RpdGxlYmFyLW5hbWUnPiN7aW5mby5uYW1lfTwvc3Bhbj5cIlxuICAgICAgICBpZiBpbmZvLnZlcnNpb25cbiAgICAgICAgICAgIGh0bWwgKz0gXCI8c3BhbiBjbGFzcz0ndGl0bGViYXItZG90Jz4g4pePIDwvc3Bhbj5cIlxuICAgICAgICAgICAgaHRtbCArPSBcIjxzcGFuIGNsYXNzPSd0aXRsZWJhci12ZXJzaW9uJz4je2luZm8udmVyc2lvbn08L3NwYW4+XCJcbiAgICAgICAgaWYgaW5mby5wYXRoXG4gICAgICAgICAgICBodG1sICs9IFwiPHNwYW4gY2xhc3M9J3RpdGxlYmFyLWRvdCc+IOKWuiA8L3NwYW4+XCJcbiAgICAgICAgICAgIGh0bWwgKz0gXCI8c3BhbiBjbGFzcz0ndGl0bGViYXItdmVyc2lvbic+I3tpbmZvLnBhdGh9PC9zcGFuPlwiXG4gICAgICAgIEB0aXRsZS5pbm5lckhUTUwgPSBodG1sXG4gICAgXG4gICAgb25UaXRsZWJhcjogKGFjdGlvbikgPT5cbiAgICAgICAgXG4gICAgICAgIHN3aXRjaCBhY3Rpb25cbiAgICAgICAgICAgIHdoZW4gJ3Nob3dUaXRsZScgICB0aGVuIEBzaG93VGl0bGUoKVxuICAgICAgICAgICAgd2hlbiAnaGlkZVRpdGxlJyAgIHRoZW4gQGhpZGVUaXRsZSgpXG4gICAgICAgICAgICB3aGVuICdzaG93TWVudScgICAgdGhlbiBAc2hvd01lbnUoKVxuICAgICAgICAgICAgd2hlbiAnaGlkZU1lbnUnICAgIHRoZW4gQGhpZGVNZW51KClcbiAgICAgICAgICAgIHdoZW4gJ3RvZ2dsZU1lbnUnICB0aGVuIEB0b2dnbGVNZW51KClcbiAgICAgICAgICAgIFxuICAgICMgMDAgICAgIDAwICAwMDAwMDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIFxuICAgICMgMDAwICAgMDAwICAwMDAgICAgICAgMDAwMCAgMDAwICAwMDAgICAwMDAgIFxuICAgICMgMDAwMDAwMDAwICAwMDAwMDAwICAgMDAwIDAgMDAwICAwMDAgICAwMDAgIFxuICAgICMgMDAwIDAgMDAwICAwMDAgICAgICAgMDAwICAwMDAwICAwMDAgICAwMDAgIFxuICAgICMgMDAwICAgMDAwICAwMDAwMDAwMCAgMDAwICAgMDAwICAgMDAwMDAwMCAgIFxuXG4gICAgb25NZW51QWN0aW9uOiAoYWN0aW9uLCBhcmdzKSA9PlxuICAgICAgICBcbiAgICAgICAgZWxlY3Ryb24gPSByZXF1aXJlICdlbGVjdHJvbicgIFxuICAgICAgICB3aW4gPSBlbGVjdHJvbi5yZW1vdGUuZ2V0Q3VycmVudFdpbmRvdygpXG4gICAgICAgIFxuICAgICAgICBzd2l0Y2ggYWN0aW9uXG4gICAgICAgICAgICB3aGVuICdUb2dnbGUgTWVudScgICAgICB0aGVuIEB0b2dnbGVNZW51KClcbiAgICAgICAgICAgIHdoZW4gJ09wZW4gTWVudScgICAgICAgIHRoZW4gQG9wZW5NZW51KClcbiAgICAgICAgICAgIHdoZW4gJ1Nob3cgTWVudScgICAgICAgIHRoZW4gQHNob3dNZW51KClcbiAgICAgICAgICAgIHdoZW4gJ0hpZGUgTWVudScgICAgICAgIHRoZW4gQGhpZGVNZW51KClcbiAgICAgICAgICAgIHdoZW4gJ1RvZ2dsZSBTY2hlbWUnICAgIFxuICAgICAgICAgICAgICAgIGlmIEBvcHQuc2NoZW1lICE9IGZhbHNlIHRoZW4gc2NoZW1lLnRvZ2dsZSgpXG4gICAgICAgICAgICB3aGVuICdEZXZUb29scycgICAgICAgICB0aGVuIHdpbi53ZWJDb250ZW50cy50b2dnbGVEZXZUb29scygpXG4gICAgICAgICAgICB3aGVuICdSZWxvYWQnICAgICAgICAgICB0aGVuIHdpbi53ZWJDb250ZW50cy5yZWxvYWRJZ25vcmluZ0NhY2hlKClcbiAgICAgICAgICAgIHdoZW4gJ0Nsb3NlJyAgICAgICAgICAgIHRoZW4gd2luLmNsb3NlKClcbiAgICAgICAgICAgIHdoZW4gJ01pbmltaXplJyAgICAgICAgIHRoZW4gd2luLm1pbmltaXplKClcbiAgICAgICAgICAgIHdoZW4gJ01heGltaXplJyBcbiAgICAgICAgICAgICAgICB3YSA9IGVsZWN0cm9uLnNjcmVlbi5nZXRQcmltYXJ5RGlzcGxheSgpLndvcmtBcmVhU2l6ZVxuICAgICAgICAgICAgICAgIHdiID0gd2luLmdldEJvdW5kcygpXG4gICAgICAgICAgICAgICAgbWF4aW1pemVkID0gd2luLmlzTWF4aW1pemVkKCkgb3IgKHdiLndpZHRoID09IHdhLndpZHRoIGFuZCB3Yi5oZWlnaHQgPT0gd2EuaGVpZ2h0KVxuICAgICAgICAgICAgICAgIGlmIG1heGltaXplZCB0aGVuIHdpbi51bm1heGltaXplKCkgZWxzZSB3aW4ubWF4aW1pemUoKSAgXG5cbiAgICBtZW51VGVtcGxhdGU6IC0+XG4gICAgICAgIFxuICAgICAgICBpZiBlbXB0eSBAdGVtcGxhdGVDYWNoZVxuICAgICAgICAgICAgIyBsb2cgJ21lbnVUZW1wbGF0ZScsIHNsYXNoLnJlc29sdmUgc2xhc2guam9pbiBAb3B0LmRpciwgQG9wdC5tZW51XG4gICAgICAgICAgICBAdGVtcGxhdGVDYWNoZSA9IEBtYWtlVGVtcGxhdGUgbm9vbi5sb2FkIHNsYXNoLnJlc29sdmUgc2xhc2guam9pbiBAb3B0LmRpciwgQG9wdC5tZW51XG4gICAgICAgICAgICBcbiAgICAgICAgaWYgQG9wdC5tZW51VGVtcGxhdGU/XG4gICAgICAgICAgICBAb3B0Lm1lbnVUZW1wbGF0ZSBAdGVtcGxhdGVDYWNoZVxuICAgICAgICBlbHNlXG4gICAgICAgICAgICBAdGVtcGxhdGVDYWNoZVxuICAgICAgICBcbiAgICBtYWtlVGVtcGxhdGU6IChvYmopIC0+XG4gICAgICAgIFxuICAgICAgICB0bXBsID0gW11cbiAgICAgICAgZm9yIHRleHQsbWVudU9yQWNjZWwgb2Ygb2JqXG4gICAgICAgICAgICB0bXBsLnB1c2ggc3dpdGNoXG4gICAgICAgICAgICAgICAgd2hlbiBlbXB0eShtZW51T3JBY2NlbCkgYW5kIHRleHQuc3RhcnRzV2l0aCAnLSdcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogJydcbiAgICAgICAgICAgICAgICB3aGVuIF8uaXNOdW1iZXIgbWVudU9yQWNjZWxcbiAgICAgICAgICAgICAgICAgICAgdGV4dDp0ZXh0XG4gICAgICAgICAgICAgICAgICAgIGFjY2VsOnN0ciBtZW51T3JBY2NlbFxuICAgICAgICAgICAgICAgIHdoZW4gXy5pc1N0cmluZyBtZW51T3JBY2NlbFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OnRleHRcbiAgICAgICAgICAgICAgICAgICAgYWNjZWw6a2V5aW5mby5jb252ZXJ0Q21kQ3RybCBtZW51T3JBY2NlbFxuICAgICAgICAgICAgICAgIHdoZW4gZW1wdHkgbWVudU9yQWNjZWxcbiAgICAgICAgICAgICAgICAgICAgdGV4dDp0ZXh0XG4gICAgICAgICAgICAgICAgICAgIGFjY2VsOiAnJ1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgaWYgbWVudU9yQWNjZWwuYWNjZWw/IG9yIG1lbnVPckFjY2VsLmNvbW1hbmQ/ICMgbmVlZHMgYmV0dGVyIHRlc3QhXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtID0gXy5jbG9uZSBtZW51T3JBY2NlbFxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS50ZXh0ID0gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbVxuICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OnRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lbnU6QG1ha2VUZW1wbGF0ZSBtZW51T3JBY2NlbFxuICAgICAgICB0bXBsXG5cbiAgICBpbml0TWVudTogKGl0ZW1zKSAtPlxuXG4gICAgICAgIEBtZW51ID0gbmV3IG1lbnUgaXRlbXM6aXRlbXNcbiAgICAgICAgQGVsZW0uaW5zZXJ0QmVmb3JlIEBtZW51LmVsZW0sIEBlbGVtLmZpcnN0Q2hpbGQubmV4dFNpYmxpbmdcbiAgICAgICAgQGhpZGVNZW51KClcblxuICAgIG1lbnVWaXNpYmxlOiA9PiBAbWVudS5lbGVtLnN0eWxlLmRpc3BsYXkgIT0gJ25vbmUnXG4gICAgc2hvd01lbnU6ICAgID0+IEBtZW51LmVsZW0uc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUtYmxvY2snOyBAbWVudT8uZm9jdXM/KCk7IHBvc3QuZW1pdCAndGl0bGViYXInLCAnaGlkZVRpdGxlJ1xuICAgIGhpZGVNZW51OiAgICA9PiBAbWVudT8uY2xvc2UoKTsgQG1lbnUuZWxlbS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOyBwb3N0LmVtaXQgJ3RpdGxlYmFyJywgJ3Nob3dUaXRsZSdcbiAgICB0b2dnbGVNZW51OiAgPT4gaWYgQG1lbnVWaXNpYmxlKCkgdGhlbiBAaGlkZU1lbnUoKSBlbHNlIEBzaG93TWVudSgpXG4gICAgb3Blbk1lbnU6ICAgID0+IGlmIEBtZW51VmlzaWJsZSgpIHRoZW4gQGhpZGVNZW51KCkgZWxzZSBAc2hvd01lbnUoKTsgQG1lbnUub3BlbigpXG5cbiAgICAjICAwMDAwMDAwICAwMDAwMDAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgMDAwMDAwMDAgIFxuICAgICMgMDAwICAgICAgICAgIDAwMCAgICAgIDAwMCAwMDAgICAwMDAgICAgICAwMDAgICAgICAgXG4gICAgIyAwMDAwMDAwICAgICAgMDAwICAgICAgIDAwMDAwICAgIDAwMCAgICAgIDAwMDAwMDAgICBcbiAgICAjICAgICAgMDAwICAgICAwMDAgICAgICAgIDAwMCAgICAgMDAwICAgICAgMDAwICAgICAgIFxuICAgICMgMDAwMDAwMCAgICAgIDAwMCAgICAgICAgMDAwICAgICAwMDAwMDAwICAwMDAwMDAwMCAgXG4gICAgXG4gICAgaW5pdFN0eWxlOiAtPlxuICAgICAgICBcbiAgICAgICAgaWYgbGluayA9JCBcIiNzdHlsZS1saW5rXCJcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaHJlZiA9IHNsYXNoLmZpbGVVcmwgc2xhc2gucmVzb2x2ZSBzbGFzaC5qb2luIF9fZGlybmFtZSwgXCJjc3Mvc3R5bGUuY3NzXCJcbiAgICAgICAgICAgIHRpdGxlU3R5bGUgPSBlbGVtICdsaW5rJyxcbiAgICAgICAgICAgICAgICBocmVmOiBocmVmXG4gICAgICAgICAgICAgICAgcmVsOiAgJ3N0eWxlc2hlZXQnXG4gICAgICAgICAgICAgICAgdHlwZTogJ3RleHQvY3NzJ1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgbGluay5wYXJlbnROb2RlLmluc2VydEJlZm9yZSB0aXRsZVN0eWxlLCBsaW5rXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGhyZWYgPSBzbGFzaC5maWxlVXJsIHNsYXNoLnJlc29sdmUgc2xhc2guam9pbiBfX2Rpcm5hbWUsIFwiY3NzLyN7cHJlZnMuZ2V0ICdzY2hlbWUnLCAnZGFyayd9LmNzc1wiXG4gICAgICAgICAgICB0aXRsZVN0eWxlID0gZWxlbSAnbGluaycsXG4gICAgICAgICAgICAgICAgaHJlZjogaHJlZlxuICAgICAgICAgICAgICAgIHJlbDogICdzdHlsZXNoZWV0J1xuICAgICAgICAgICAgICAgIHR5cGU6ICd0ZXh0L2NzcydcbiAgICAgICAgICAgICAgICBpZDogICAnc3R5bGUtdGl0bGUnXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICBsaW5rLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlIHRpdGxlU3R5bGUsIGxpbmtcbiAgICBcbiAgICAjIDAwMCAgIDAwMCAgMDAwMDAwMDAgIDAwMCAgIDAwMFxuICAgICMgMDAwICAwMDAgICAwMDAgICAgICAgIDAwMCAwMDBcbiAgICAjIDAwMDAwMDAgICAgMDAwMDAwMCAgICAgMDAwMDBcbiAgICAjIDAwMCAgMDAwICAgMDAwICAgICAgICAgIDAwMFxuICAgICMgMDAwICAgMDAwICAwMDAwMDAwMCAgICAgMDAwXG5cbiAgICBoYW5kbGVLZXk6IChldmVudCkgLT5cblxuICAgICAgICB7IGNvbWJvIH0gPSBrZXlpbmZvLmZvckV2ZW50IGV2ZW50XG4gICAgICAgIFxuICAgICAgICBtYWluTWVudSA9IEBtZW51VGVtcGxhdGUoKVxuICAgICAgICAgICAgXG4gICAgICAgIGZvciBrZXlwYXRoIGluIHNkcy5maW5kLmtleSBtYWluTWVudSwgJ2FjY2VsJ1xuICAgICAgICAgICAgY29tYm9zID0gc2RzLmdldChtYWluTWVudSwga2V5cGF0aCkuc3BsaXQgJyAnXG4gICAgICAgICAgICBjb21ib3MgPSBjb21ib3MubWFwIChjb21ibykgLT4ga2V5aW5mby5jb252ZXJ0Q21kQ3RybCBjb21ib1xuICAgICAgICAgICAgaWYgY29tYm8gaW4gY29tYm9zXG4gICAgICAgICAgICAgICAga2V5cGF0aC5wb3AoKVxuICAgICAgICAgICAgICAgIGl0ZW0gPSBzZHMuZ2V0IG1haW5NZW51LCBrZXlwYXRoXG4gICAgICAgICAgICAgICAgcG9zdC5lbWl0ICdtZW51QWN0aW9uJywgaXRlbS5hY3Rpb24gPyBpdGVtLnRleHQsIGl0ZW1cbiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbVxuXG4gICAgICAgICd1bmhhbmRsZWQnXG4gICAgICAgICAgICBcbm1vZHVsZS5leHBvcnRzID0gVGl0bGVcbiJdfQ==
//# sourceURL=../coffee/title.coffee