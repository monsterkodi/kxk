// koffee 0.42.0

/*
0000000    00000000    0000000    0000000 
000   000  000   000  000   000  000      
000   000  0000000    000000000  000  0000
000   000  000   000  000   000  000   000
0000000    000   000  000   000   0000000
 */
var $, Drag, _, def, kerror, pos, ref, stopEvent,
    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

ref = require('./kxk'), def = ref.def, pos = ref.pos, stopEvent = ref.stopEvent, kerror = ref.kerror, $ = ref.$, _ = ref._;

Drag = (function() {
    function Drag(cfg) {
        this.deactivate = bind(this.deactivate, this);
        this.activate = bind(this.activate, this);
        this.dragStop = bind(this.dragStop, this);
        this.dragUp = bind(this.dragUp, this);
        this.dragMove = bind(this.dragMove, this);
        this.dragStart = bind(this.dragStart, this);
        var t;
        _.extend(this, def(cfg, {
            target: null,
            handle: null,
            onStart: null,
            onMove: null,
            onStop: null,
            active: true
        }));
        if (_.isString(this.target)) {
            t = $(this.target);
            if (t == null) {
                return kerror("Drag -- can't find drag target with id", this.target);
            }
            this.target = t;
        }
        if (this.target == null) {
            return kerror("Drag -- can't find drag target");
        }
        if ((this.onStart != null) && !_.isFunction(this.onStart)) {
            kerror("Drag -- onStart not a function?");
        }
        if ((this.onMove != null) && !_.isFunction(this.onMove)) {
            kerror("Drag -- onMove not a function?");
        }
        if ((this.onEnd != null) && !_.isFunction(this.onEnd)) {
            kerror("Drag -- onEnd not a function?");
        }
        this.dragging = false;
        this.listening = false;
        if (_.isString(this.handle)) {
            this.handle = $(this.handle);
        }
        if (this.handle != null) {
            this.handle;
        } else {
            this.handle = this.target;
        }
        if (this.active) {
            this.activate();
        }
    }

    Drag.prototype.start = function(p, event) {
        if (!this.dragging && this.listening) {
            this.dragging = true;
            this.startPos = p;
            this.pos = p;
            if ('skip' === (typeof this.onStart === "function" ? this.onStart(this, event) : void 0)) {
                delete this.startPos;
                this.dragging = false;
                return this;
            }
            this.lastPos = p;
            stopEvent(event);
            document.addEventListener('mousemove', this.dragMove);
            document.addEventListener('mouseup', this.dragUp);
        }
        return this;
    };

    Drag.prototype.dragStart = function(event) {
        return this.start(pos(event), event);
    };

    Drag.prototype.dragMove = function(event) {
        if (this.dragging) {
            this.pos = pos(event);
            this.delta = this.lastPos.to(this.pos);
            this.deltaSum = this.startPos.to(this.pos);
            if ((this.constrainKey != null) && event[this.constrainKey]) {
                if (this.constrain != null) {
                    this.constrain;
                } else {
                    this.constrain = Math.abs(this.delta.x) >= Math.abs(this.delta.y) ? pos(1, 0) : pos(0, 1);
                }
                this.delta.x *= this.constrain.x;
                this.delta.y *= this.constrain.y;
            } else {
                delete this.constrain;
            }
            if (typeof this.onMove === "function") {
                this.onMove(this, event);
            }
            this.lastPos = this.pos;
        }
        return this;
    };

    Drag.prototype.dragUp = function(event) {
        delete this.constrain;
        return this.dragStop(event);
    };

    Drag.prototype.dragStop = function(event) {
        if (this.dragging) {
            document.removeEventListener('mousemove', this.dragMove);
            document.removeEventListener('mouseup', this.dragUp);
            if ((this.onStop != null) && (event != null)) {
                this.onStop(this, event);
            }
            delete this.lastPos;
            delete this.startPos;
            this.dragging = false;
        }
        return this;
    };

    Drag.prototype.activate = function() {
        if (!this.listening) {
            this.listening = true;
            this.handle.addEventListener('mousedown', this.dragStart);
        }
        return this;
    };

    Drag.prototype.deactivate = function() {
        if (this.listening) {
            this.handle.removeEventListener('mousedown', this.dragStart);
            this.listening = false;
            if (this.dragging) {
                this.dragStop();
            }
        }
        return this;
    };

    return Drag;

})();

module.exports = Drag;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZHJhZy5qcyIsInNvdXJjZVJvb3QiOiIuIiwic291cmNlcyI6WyIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7Ozs7OztBQUFBLElBQUEsNENBQUE7SUFBQTs7QUFRQSxNQUF3QyxPQUFBLENBQVEsT0FBUixDQUF4QyxFQUFFLGFBQUYsRUFBTyxhQUFQLEVBQVkseUJBQVosRUFBdUIsbUJBQXZCLEVBQStCLFNBQS9CLEVBQWtDOztBQUU1QjtJQUVXLGNBQUMsR0FBRDs7Ozs7OztBQUVULFlBQUE7UUFBQSxDQUFDLENBQUMsTUFBRixDQUFTLElBQVQsRUFBWSxHQUFBLENBQUksR0FBSixFQUNKO1lBQUEsTUFBQSxFQUFVLElBQVY7WUFDQSxNQUFBLEVBQVUsSUFEVjtZQUVBLE9BQUEsRUFBVSxJQUZWO1lBR0EsTUFBQSxFQUFVLElBSFY7WUFJQSxNQUFBLEVBQVUsSUFKVjtZQUtBLE1BQUEsRUFBVSxJQUxWO1NBREksQ0FBWjtRQVFBLElBQUcsQ0FBQyxDQUFDLFFBQUYsQ0FBVyxJQUFDLENBQUEsTUFBWixDQUFIO1lBQ0ksQ0FBQSxHQUFHLENBQUEsQ0FBRSxJQUFDLENBQUEsTUFBSDtZQUNILElBQU8sU0FBUDtBQUNJLHVCQUFPLE1BQUEsQ0FBTyx3Q0FBUCxFQUFpRCxJQUFDLENBQUEsTUFBbEQsRUFEWDs7WUFFQSxJQUFDLENBQUEsTUFBRCxHQUFVLEVBSmQ7O1FBTUEsSUFBTyxtQkFBUDtBQUNJLG1CQUFPLE1BQUEsQ0FBTyxnQ0FBUCxFQURYOztRQUdBLElBQTRDLHNCQUFBLElBQWMsQ0FBSSxDQUFDLENBQUMsVUFBRixDQUFhLElBQUMsQ0FBQSxPQUFkLENBQTlEO1lBQUEsTUFBQSxDQUFPLGlDQUFQLEVBQUE7O1FBQ0EsSUFBMkMscUJBQUEsSUFBYSxDQUFJLENBQUMsQ0FBQyxVQUFGLENBQWEsSUFBQyxDQUFBLE1BQWQsQ0FBNUQ7WUFBQSxNQUFBLENBQU8sZ0NBQVAsRUFBQTs7UUFDQSxJQUEwQyxvQkFBQSxJQUFZLENBQUksQ0FBQyxD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QztZQUNBLFFBQVEsQ0FBQyxtQkFBVCxDQUE2QixTQUE3QixFQUEwQyxJQUFDLENBQUEsTUFBM0M7WUFDQSxJQUFvQixxQkFBQSxJQUFhLGVBQWpDO2dCQUFBLElBQUMsQ0FBQSxNQUFELENBQVEsSUFBUixFQUFXLEtBQVgsRUFBQTs7WUFDQSxPQUFPLElBQUMsQ0FBQTtZQUNSLE9BQU8sSUFBQyxDQUFBO1lBQ1IsSUFBQyxDQUFBLFFBQUQsR0FBWSxNQU5oQjs7ZUFPQTtJQVRNOzttQkFpQlYsUUFBQSxHQUFVLFNBQUE7UUFFTixJQUFHLENBQUksSUFBQyxDQUFBLFNBQVI7WUFDSSxJQUFDLENBQUEsU0FBRCxHQUFhO1lBQ2IsSUFBQyxDQUFBLE1BQU0sQ0FBQyxnQkFBUixDQUF5QixXQUF6QixFQUFzQyxJQUFDLENBQUEsU0FBdkMsRUFGSjs7ZUFHQTtJQUxNOzttQkFPVixVQUFBLEdBQVksU0FBQTtRQUVSLElBQUcsSUFBQyxDQUFBLFNBQUo7WUFDSSxJQUFDLENBQUEsTUFBTSxDQUFDLG1CQUFSLENBQTRCLFdBQTVCLEVBQXlDLElBQUMsQ0FBQSxTQUExQztZQUNBLElBQUMsQ0FBQSxTQUFELEdBQWE7WUFDYixJQUFlLElBQUMsQ0FBQSxRQUFoQjtnQkFBQSxJQUFDLENBQUEsUUFBRCxDQUFBLEVBQUE7YUFISjs7ZUFJQTtJQU5ROzs7Ozs7QUFRaEIsTUFBTSxDQUFDLE9BQVAsR0FBaUIiLCJzb3VyY2VzQ29udGVudCI6WyIjIyNcbjAwMDAwMDAgICAgMDAwMDAwMDAgICAgMDAwMDAwMCAgICAwMDAwMDAwIFxuMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgXG4wMDAgICAwMDAgIDAwMDAwMDAgICAgMDAwMDAwMDAwICAwMDAgIDAwMDBcbjAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMFxuMDAwMDAwMCAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgIDAwMDAwMDAgXG4jIyNcblxueyBkZWYsIHBvcywgc3RvcEV2ZW50LCBrZXJyb3IsICQsIF8gfSA9IHJlcXVpcmUgJy4va3hrJ1xuXG5jbGFzcyBEcmFnXG5cbiAgICBjb25zdHJ1Y3RvcjogKGNmZykgLT5cbiAgICAgICAgXG4gICAgICAgIF8uZXh0ZW5kIEAsIGRlZiBjZmcsXG4gICAgICAgICAgICAgICAgdGFyZ2V0ICA6IG51bGxcbiAgICAgICAgICAgICAgICBoYW5kbGUgIDogbnVsbFxuICAgICAgICAgICAgICAgIG9uU3RhcnQgOiBudWxsXG4gICAgICAgICAgICAgICAgb25Nb3ZlICA6IG51bGxcbiAgICAgICAgICAgICAgICBvblN0b3AgIDogbnVsbFxuICAgICAgICAgICAgICAgIGFjdGl2ZSAgOiB0cnVlXG5cbiAgICAgICAgaWYgXy5pc1N0cmluZyBAdGFyZ2V0XG4gICAgICAgICAgICB0ID0kIEB0YXJnZXRcbiAgICAgICAgICAgIGlmIG5vdCB0P1xuICAgICAgICAgICAgICAgIHJldHVybiBrZXJyb3IgXCJEcmFnIC0tIGNhbid0IGZpbmQgZHJhZyB0YXJnZXQgd2l0aCBpZFwiLCBAdGFyZ2V0XG4gICAgICAgICAgICBAdGFyZ2V0ID0gdFxuICAgICAgICAgICAgXG4gICAgICAgIGlmIG5vdCBAdGFyZ2V0P1xuICAgICAgICAgICAgcmV0dXJuIGtlcnJvciBcIkRyYWcgLS0gY2FuJ3QgZmluZCBkcmFnIHRhcmdldFwiXG4gICAgICAgIFxuICAgICAgICBrZXJyb3IgXCJEcmFnIC0tIG9uU3RhcnQgbm90IGEgZnVuY3Rpb24/XCIgaWYgQG9uU3RhcnQ/IGFuZCBub3QgXy5pc0Z1bmN0aW9uIEBvblN0YXJ0XG4gICAgICAgIGtlcnJvciBcIkRyYWcgLS0gb25Nb3ZlIG5vdCBhIGZ1bmN0aW9uP1wiIGlmIEBvbk1vdmU/IGFuZCBub3QgXy5pc0Z1bmN0aW9uIEBvbk1vdmVcbiAgICAgICAga2Vycm9yIFwiRHJhZyAtLSBvbkVuZCBub3QgYSBmdW5jdGlvbj9cIiBpZiBAb25FbmQ/IGFuZCBub3QgXy5pc0Z1bmN0aW9uIEBvbkVuZFxuICAgICAgICAgICAgICAgIFxuICAgICAgICBAZHJhZ2dpbmcgID0gZmFsc2VcbiAgICAgICAgQGxpc3RlbmluZyA9IGZhbHNlXG4gICAgICAgIEBoYW5kbGUgICAgPSAkKEBoYW5kbGUpIGlmIF8uaXNTdHJpbmcgQGhhbmRsZVxuICAgICAgICBAaGFuZGxlICAgPz0gQHRhcmdldFxuICAgICAgICBAYWN0aXZhdGUoKSBpZiBAYWN0aXZlXG5cbiAgICAjICAwMDAwMDAwICAwMDAwMDAwMDAgICAwMDAwMDAwICAgMDAwMDAwMDAgICAwMDAwMDAwMDAgIFxuICAgICMgMDAwICAgICAgICAgIDAwMCAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgICAgIDAwMCAgICAgXG4gICAgIyAwMDAwMDAwICAgICAgMDAwICAgICAwMDAwMDAwMDAgIDAwMDAwMDAgICAgICAgMDAwICAgICBcbiAgICAjICAgICAgMDAwICAgICAwMDAgICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAgICAwMDAgICAgIFxuICAgICMgMDAwMDAwMCAgICAgIDAwMCAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgICAgIDAwMCAgICAgXG4gICAgXG4gICAgc3RhcnQ6IChwLCBldmVudCkgLT5cbiAgICAgICAgXG4gICAgICAgIGlmIG5vdCBAZHJhZ2dpbmcgYW5kIEBsaXN0ZW5pbmdcbiAgICAgICAgICAgIEBkcmFnZ2luZyA9IHRydWVcbiAgICAgICAgICAgIEBzdGFydFBvcyA9IHBcbiAgICAgICAgICAgIEBwb3MgICAgICA9IHBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgJ3NraXAnID09IEBvblN0YXJ0PyBALCBldmVudFxuICAgICAgICAgICAgICAgIGRlbGV0ZSBAc3RhcnRQb3NcbiAgICAgICAgICAgICAgICBAZHJhZ2dpbmcgPSBmYWxzZVxuICAgICAgICAgICAgICAgIHJldHVybiBAXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICBAbGFzdFBvcyAgPSBwXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgc3RvcEV2ZW50IGV2ZW50XG4gICAgXG4gICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyICdtb3VzZW1vdmUnLCBAZHJhZ01vdmVcbiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIgJ21vdXNldXAnLCAgIEBkcmFnVXBcbiAgICAgICAgQFxuICAgIFxuICAgIGRyYWdTdGFydDogKGV2ZW50KSA9PiBAc3RhcnQgcG9zKGV2ZW50KSwgZXZlbnRcbiAgICAgICAgXG4gICAgIyAwMCAgICAgMDAgICAwMDAwMDAwICAgMDAwICAgMDAwICAwMDAwMDAwMCAgXG4gICAgIyAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAgICAgXG4gICAgIyAwMDAwMDAwMDAgIDAwMCAgIDAwMCAgIDAwMCAwMDAgICAwMDAwMDAwICAgXG4gICAgIyAwMDAgMCAwMDAgIDAwMCAgIDAwMCAgICAgMDAwICAgICAwMDAgICAgICAgXG4gICAgIyAwMDAgICAwMDAgICAwMDAwMDAwICAgICAgIDAgICAgICAwMDAwMDAwMCAgXG4gICAgXG4gICAgZHJhZ01vdmU6IChldmVudCkgPT5cblxuICAgICAgICBpZiBAZHJhZ2dpbmdcbiAgICAgICAgICAgIEBwb3MgICAgICA9IHBvcyBldmVudFxuICAgICAgICAgICAgQGRlbHRhICAgID0gQGxhc3RQb3MudG8gQHBvc1xuICAgICAgICAgICAgQGRlbHRhU3VtID0gQHN0YXJ0UG9zLnRvIEBwb3NcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgQGNvbnN0cmFpbktleT8gYW5kIGV2ZW50W0Bjb25zdHJhaW5LZXldXG4gICAgICAgICAgICAgICAgQGNvbnN0cmFpbiA/PSBpZiBNYXRoLmFicyhAZGVsdGEueCkgPj0gTWF0aC5hYnMoQGRlbHRhLnkpIHRoZW4gcG9zIDEsMCBlbHNlIHBvcyAwLDFcbiAgICAgICAgICAgICAgICBAZGVsdGEueCAqPSBAY29uc3RyYWluLnhcbiAgICAgICAgICAgICAgICBAZGVsdGEueSAqPSBAY29uc3RyYWluLnlcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBkZWxldGUgQGNvbnN0cmFpblxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgQG9uTW92ZT8gQCwgZXZlbnQgXG4gICAgICAgICAgICBAbGFzdFBvcyA9IEBwb3NcbiAgICAgICAgQFxuICAgICAgICAgICAgICAgIFxuICAgIGRyYWdVcDogKGV2ZW50KSA9PiBcbiAgICAgICAgXG4gICAgICAgIGRlbGV0ZSBAY29uc3RyYWluXG4gICAgICAgIEBkcmFnU3RvcCBldmVudFxuXG4gICAgIyAgMDAwMDAwMCAgMDAwMDAwMDAwICAgMDAwMDAwMCAgIDAwMDAwMDAwICAgXG4gICAgIyAwMDAgICAgICAgICAgMDAwICAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgXG4gICAgIyAwMDAwMDAwICAgICAgMDAwICAgICAwMDAgICAwMDAgIDAwMDAwMDAwICAgXG4gICAgIyAgICAgIDAwMCAgICAgMDAwICAgICAwMDAgICAwMDAgIDAwMCAgICAgICAgXG4gICAgIyAwMDAwMDAwICAgICAgMDAwICAgICAgMDAwMDAwMCAgIDAwMCAgICAgICAgXG4gICAgXG4gICAgZHJhZ1N0b3A6IChldmVudCkgPT5cblxuICAgICAgICBpZiBAZHJhZ2dpbmdcbiAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIgJ21vdXNlbW92ZScsIEBkcmFnTW92ZVxuICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lciAnbW91c2V1cCcsICAgQGRyYWdVcFxuICAgICAgICAgICAgQG9uU3RvcCBALCBldmVudCBpZiBAb25TdG9wPyBhbmQgZXZlbnQ/XG4gICAgICAgICAgICBkZWxldGUgQGxhc3RQb3NcbiAgICAgICAgICAgIGRlbGV0ZSBAc3RhcnRQb3NcbiAgICAgICAgICAgIEBkcmFnZ2luZyA9IGZhbHNlXG4gICAgICAgIEBcblxuICAgICMgIDAwMDAwMDAgICAgMDAwMDAwMCAgMDAwMDAwMDAwICAwMDAgIDAwMCAgIDAwMCAgIDAwMDAwMDAgICAwMDAwMDAwMDAgIDAwMDAwMDAwICBcbiAgICAjIDAwMCAgIDAwMCAgMDAwICAgICAgICAgIDAwMCAgICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgICAgMDAwICAgICAwMDAgICAgICAgXG4gICAgIyAwMDAwMDAwMDAgIDAwMCAgICAgICAgICAwMDAgICAgIDAwMCAgIDAwMCAwMDAgICAwMDAwMDAwMDAgICAgIDAwMCAgICAgMDAwMDAwMCAgIFxuICAgICMgMDAwICAgMDAwICAwMDAgICAgICAgICAgMDAwICAgICAwMDAgICAgIDAwMCAgICAgMDAwICAgMDAwICAgICAwMDAgICAgIDAwMCAgICAgICBcbiAgICAjIDAwMCAgIDAwMCAgIDAwMDAwMDAgICAgIDAwMCAgICAgMDAwICAgICAgMCAgICAgIDAwMCAgIDAwMCAgICAgMDAwICAgICAwMDAwMDAwMCAgXG4gICAgXG4gICAgYWN0aXZhdGU6ID0+XG4gICAgICAgIFxuICAgICAgICBpZiBub3QgQGxpc3RlbmluZ1xuICAgICAgICAgICAgQGxpc3RlbmluZyA9IHRydWVcbiAgICAgICAgICAgIEBoYW5kbGUuYWRkRXZlbnRMaXN0ZW5lciAnbW91c2Vkb3duJywgQGRyYWdTdGFydFxuICAgICAgICBAXG5cbiAgICBkZWFjdGl2YXRlOiA9PlxuXG4gICAgICAgIGlmIEBsaXN0ZW5pbmdcbiAgICAgICAgICAgIEBoYW5kbGUucmVtb3ZlRXZlbnRMaXN0ZW5lciAnbW91c2Vkb3duJywgQGRyYWdTdGFydFxuICAgICAgICAgICAgQGxpc3RlbmluZyA9IGZhbHNlXG4gICAgICAgICAgICBAZHJhZ1N0b3AoKSBpZiBAZHJhZ2dpbmdcbiAgICAgICAgQFxuXG5tb2R1bGUuZXhwb3J0cyA9IERyYWdcbiJdfQ==
//# sourceURL=../coffee/drag.coffee