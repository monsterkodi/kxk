(function() {
  /*
  0000000    00000000    0000000    0000000 
  000   000  000   000  000   000  000      
  000   000  0000000    000000000  000  0000
  000   000  000   000  000   000  000   000
  0000000    000   000  000   000   0000000 
  */
  var $, Drag, _, def, error, log, pos, stopEvent;

  ({def, pos, stopEvent, error, log, $, _} = require('./kxk'));

  Drag = class Drag {
    constructor(cfg) {
      var t;
      this.dragStart = this.dragStart.bind(this);
      
      // 00     00   0000000   000   000  00000000  
      // 000   000  000   000  000   000  000       
      // 000000000  000   000   000 000   0000000   
      // 000 0 000  000   000     000     000       
      // 000   000   0000000       0      00000000  
      this.dragMove = this.dragMove.bind(this);
      this.dragUp = this.dragUp.bind(this);
      //  0000000  000000000   0000000   00000000   
      // 000          000     000   000  000   000  
      // 0000000      000     000   000  00000000   
      //      000     000     000   000  000        
      // 0000000      000      0000000   000        
      this.dragStop = this.dragStop.bind(this);
      //  0000000    0000000  000000000  000  000   000   0000000   000000000  00000000  
      // 000   000  000          000     000  000   000  000   000     000     000       
      // 000000000  000          000     000   000 000   000000000     000     0000000   
      // 000   000  000          000     000     000     000   000     000     000       
      // 000   000   0000000     000     000      0      000   000     000     00000000  
      this.activate = this.activate.bind(this);
      this.deactivate = this.deactivate.bind(this);
      _.extend(this, def(cfg, {
        target: null,
        handle: null,
        onStart: null,
        onMove: null,
        onStop: null,
        active: true
      }));
      if (_.isString(this.target)) {
        t = $(this.target);
        if (t == null) {
          return error("Drag -- can't find drag target with id", this.target);
        }
        this.target = t;
      }
      if (this.target == null) {
        return error("Drag -- can't find drag target");
      }
      if ((this.onStart != null) && !_.isFunction(this.onStart)) {
        error("Drag -- onStart not a function?");
      }
      if ((this.onMove != null) && !_.isFunction(this.onMove)) {
        error("Drag -- onMove not a function?");
      }
      if ((this.onEnd != null) && !_.isFunction(this.onEnd)) {
        error("Drag -- onEnd not a function?");
      }
      this.dragging = false;
      this.listening = false;
      if (_.isString(this.handle)) {
        this.handle = $(this.handle);
      }
      if (this.handle == null) {
        this.handle = this.target;
      }
      if (this.active) {
        this.activate();
      }
    }

    //  0000000  000000000   0000000   00000000   000000000  
    // 000          000     000   000  000   000     000     
    // 0000000      000     000000000  0000000       000     
    //      000     000     000   000  000   000     000     
    // 0000000      000     000   000  000   000     000     
    start(p, event) {
      if (!this.dragging && this.listening) {
        this.dragging = true;
        this.startPos = p;
        this.pos = p;
        if ('skip' === (typeof this.onStart === "function" ? this.onStart(this, event) : void 0)) {
          delete this.startPos;
          this.dragging = false;
          return this;
        }
        this.lastPos = p;
        stopEvent(event);
        document.addEventListener('mousemove', this.dragMove);
        document.addEventListener('mouseup', this.dragUp);
      }
      return this;
    }

    dragStart(event) {
      return this.start(pos(event), event);
    }

    dragMove(event) {
      if (this.dragging) {
        this.pos = pos(event);
        this.delta = this.lastPos.to(this.pos);
        this.deltaSum = this.startPos.to(this.pos);
        if ((this.constrainKey != null) && event[this.constrainKey]) {
          if (this.constrain == null) {
            this.constrain = Math.abs(this.delta.x) >= Math.abs(this.delta.y) ? pos(1, 0) : pos(0, 1);
          }
          this.delta.x *= this.constrain.x;
          this.delta.y *= this.constrain.y;
        } else {
          delete this.constrain;
        }
        if (typeof this.onMove === "function") {
          this.onMove(this, event);
        }
        this.lastPos = this.pos;
      }
      return this;
    }

    dragUp(event) {
      delete this.constrain;
      return this.dragStop(event);
    }

    dragStop(event) {
      if (this.dragging) {
        document.removeEventListener('mousemove', this.dragMove);
        document.removeEventListener('mouseup', this.dragUp);
        if ((this.onStop != null) && (event != null)) {
          this.onStop(this, event);
        }
        delete this.lastPos;
        delete this.startPos;
        this.dragging = false;
      }
      return this;
    }

    activate() {
      if (!this.listening) {
        this.listening = true;
        this.handle.addEventListener('mousedown', this.dragStart);
      }
      return this;
    }

    deactivate() {
      if (this.listening) {
        this.handle.removeEventListener('mousedown', this.dragStart);
        this.listening = false;
        if (this.dragging) {
          this.dragStop();
        }
      }
      return this;
    }

  };

  module.exports = Drag;

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZHJhZy5qcyIsInNvdXJjZVJvb3QiOiIuIiwic291cmNlcyI6WyIuLi9jb2ZmZWUvZHJhZy5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFBQTs7Ozs7OztBQUFBLE1BQUEsQ0FBQSxFQUFBLElBQUEsRUFBQSxDQUFBLEVBQUEsR0FBQSxFQUFBLEtBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBOztFQVFBLENBQUEsQ0FBRSxHQUFGLEVBQU8sR0FBUCxFQUFZLFNBQVosRUFBdUIsS0FBdkIsRUFBOEIsR0FBOUIsRUFBbUMsQ0FBbkMsRUFBc0MsQ0FBdEMsQ0FBQSxHQUE0QyxPQUFBLENBQVEsT0FBUixDQUE1Qzs7RUFFTSxPQUFOLE1BQUEsS0FBQTtJQUVJLFdBQWEsQ0FBQyxHQUFELENBQUE7QUFFVCxVQUFBO1VBcURKLENBQUEsZ0JBQUEsQ0FBQSxxQkFyREk7Ozs7Ozs7VUE2REosQ0FBQSxlQUFBLENBQUE7VUFrQkEsQ0FBQSxhQUFBLENBQUEsa0JBL0VJOzs7Ozs7VUEwRkosQ0FBQSxlQUFBLENBQUEsb0JBMUZJOzs7Ozs7VUEyR0osQ0FBQSxlQUFBLENBQUE7VUFPQSxDQUFBLGlCQUFBLENBQUE7TUFsSEksQ0FBQyxDQUFDLE1BQUYsQ0FBUyxJQUFULEVBQVksR0FBQSxDQUFJLEdBQUosRUFDSjtRQUFBLE1BQUEsRUFBVSxJQUFWO1FBQ0EsTUFBQSxFQUFVLElBRFY7UUFFQSxPQUFBLEVBQVUsSUFGVjtRQUdBLE1BQUEsRUFBVSxJQUhWO1FBSUEsTUFBQSxFQUFVLElBSlY7UUFLQSxNQUFBLEVBQVU7TUFMVixDQURJLENBQVo7TUFRQSxJQUFHLENBQUMsQ0FBQyxRQUFGLENBQVcsSUFBQyxDQUFBLE1BQVosQ0FBSDtRQUNJLENBQUEsR0FBRyxDQUFBLENBQUUsSUFBQyxDQUFBLE1BQUg7UUFDSCxJQUFPLFNBQVA7QUFDSSxpQkFBTyxLQUFBLENBQU0sd0NBQU4sRUFBZ0QsSUFBQyxDQUFBLE1BQWpELEVBRFg7O1FBRUEsSUFBQyxD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I1xuMDAwMDAwMCAgICAwMDAwMDAwMCAgICAwMDAwMDAwICAgIDAwMDAwMDAgXG4wMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAgICBcbjAwMCAgIDAwMCAgMDAwMDAwMCAgICAwMDAwMDAwMDAgIDAwMCAgMDAwMFxuMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwXG4wMDAwMDAwICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAgMDAwMDAwMCBcbiMjI1xuXG57IGRlZiwgcG9zLCBzdG9wRXZlbnQsIGVycm9yLCBsb2csICQsIF8gfSA9IHJlcXVpcmUgJy4va3hrJ1xuXG5jbGFzcyBEcmFnXG5cbiAgICBjb25zdHJ1Y3RvcjogKGNmZykgLT5cbiAgICAgICAgXG4gICAgICAgIF8uZXh0ZW5kIEAsIGRlZiBjZmcsXG4gICAgICAgICAgICAgICAgdGFyZ2V0ICA6IG51bGxcbiAgICAgICAgICAgICAgICBoYW5kbGUgIDogbnVsbFxuICAgICAgICAgICAgICAgIG9uU3RhcnQgOiBudWxsXG4gICAgICAgICAgICAgICAgb25Nb3ZlICA6IG51bGxcbiAgICAgICAgICAgICAgICBvblN0b3AgIDogbnVsbFxuICAgICAgICAgICAgICAgIGFjdGl2ZSAgOiB0cnVlXG5cbiAgICAgICAgaWYgXy5pc1N0cmluZyBAdGFyZ2V0XG4gICAgICAgICAgICB0ID0kIEB0YXJnZXRcbiAgICAgICAgICAgIGlmIG5vdCB0P1xuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvciBcIkRyYWcgLS0gY2FuJ3QgZmluZCBkcmFnIHRhcmdldCB3aXRoIGlkXCIsIEB0YXJnZXRcbiAgICAgICAgICAgIEB0YXJnZXQgPSB0XG4gICAgICAgICAgICBcbiAgICAgICAgaWYgbm90IEB0YXJnZXQ/XG4gICAgICAgICAgICByZXR1cm4gZXJyb3IgXCJEcmFnIC0tIGNhbid0IGZpbmQgZHJhZyB0YXJnZXRcIlxuICAgICAgICBcbiAgICAgICAgZXJyb3IgXCJEcmFnIC0tIG9uU3RhcnQgbm90IGEgZnVuY3Rpb24/XCIgaWYgQG9uU3RhcnQ/IGFuZCBub3QgXy5pc0Z1bmN0aW9uIEBvblN0YXJ0XG4gICAgICAgIGVycm9yIFwiRHJhZyAtLSBvbk1vdmUgbm90IGEgZnVuY3Rpb24/XCIgaWYgQG9uTW92ZT8gYW5kIG5vdCBfLmlzRnVuY3Rpb24gQG9uTW92ZVxuICAgICAgICBlcnJvciBcIkRyYWcgLS0gb25FbmQgbm90IGEgZnVuY3Rpb24/XCIgaWYgQG9uRW5kPyBhbmQgbm90IF8uaXNGdW5jdGlvbiBAb25FbmRcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgQGRyYWdnaW5nICA9IGZhbHNlXG4gICAgICAgIEBsaXN0ZW5pbmcgPSBmYWxzZVxuICAgICAgICBAaGFuZGxlICAgID0gJChAaGFuZGxlKSBpZiBfLmlzU3RyaW5nIEBoYW5kbGVcbiAgICAgICAgQGhhbmRsZSAgID89IEB0YXJnZXRcbiAgICAgICAgQGFjdGl2YXRlKCkgaWYgQGFjdGl2ZVxuXG4gICAgIyAgMDAwMDAwMCAgMDAwMDAwMDAwICAgMDAwMDAwMCAgIDAwMDAwMDAwICAgMDAwMDAwMDAwICBcbiAgICAjIDAwMCAgICAgICAgICAwMDAgICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAgICAwMDAgICAgIFxuICAgICMgMDAwMDAwMCAgICAgIDAwMCAgICAgMDAwMDAwMDAwICAwMDAwMDAwICAgICAgIDAwMCAgICAgXG4gICAgIyAgICAgIDAwMCAgICAgMDAwICAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgICAgMDAwICAgICBcbiAgICAjIDAwMDAwMDAgICAgICAwMDAgICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAgICAwMDAgICAgIFxuICAgIFxuICAgIHN0YXJ0OiAocCwgZXZlbnQpIC0+XG4gICAgICAgIFxuICAgICAgICBpZiBub3QgQGRyYWdnaW5nIGFuZCBAbGlzdGVuaW5nXG4gICAgICAgICAgICBAZHJhZ2dpbmcgPSB0cnVlXG4gICAgICAgICAgICBAc3RhcnRQb3MgPSBwXG4gICAgICAgICAgICBAcG9zICAgICAgPSBwXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICdza2lwJyA9PSBAb25TdGFydD8gQCwgZXZlbnRcbiAgICAgICAgICAgICAgICBkZWxldGUgQHN0YXJ0UG9zXG4gICAgICAgICAgICAgICAgQGRyYWdnaW5nID0gZmFsc2VcbiAgICAgICAgICAgICAgICByZXR1cm4gQFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgQGxhc3RQb3MgID0gcFxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIHN0b3BFdmVudCBldmVudFxuICAgIFxuICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciAnbW91c2Vtb3ZlJywgQGRyYWdNb3ZlXG4gICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyICdtb3VzZXVwJywgICBAZHJhZ1VwXG4gICAgICAgIEBcbiAgICBcbiAgICBkcmFnU3RhcnQ6IChldmVudCkgPT4gQHN0YXJ0IHBvcyhldmVudCksIGV2ZW50XG4gICAgICAgIFxuICAgICMgMDAgICAgIDAwICAgMDAwMDAwMCAgIDAwMCAgIDAwMCAgMDAwMDAwMDAgIFxuICAgICMgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgIFxuICAgICMgMDAwMDAwMDAwICAwMDAgICAwMDAgICAwMDAgMDAwICAgMDAwMDAwMCAgIFxuICAgICMgMDAwIDAgMDAwICAwMDAgICAwMDAgICAgIDAwMCAgICAgMDAwICAgICAgIFxuICAgICMgMDAwICAgMDAwICAgMDAwMDAwMCAgICAgICAwICAgICAgMDAwMDAwMDAgIFxuICAgIFxuICAgIGRyYWdNb3ZlOiAoZXZlbnQpID0+XG5cbiAgICAgICAgaWYgQGRyYWdnaW5nXG4gICAgICAgICAgICBAcG9zICAgICAgPSBwb3MgZXZlbnRcbiAgICAgICAgICAgIEBkZWx0YSAgICA9IEBsYXN0UG9zLnRvIEBwb3NcbiAgICAgICAgICAgIEBkZWx0YVN1bSA9IEBzdGFydFBvcy50byBAcG9zXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIEBjb25zdHJhaW5LZXk/IGFuZCBldmVudFtAY29uc3RyYWluS2V5XVxuICAgICAgICAgICAgICAgIEBjb25zdHJhaW4gPz0gaWYgTWF0aC5hYnMoQGRlbHRhLngpID49IE1hdGguYWJzKEBkZWx0YS55KSB0aGVuIHBvcyAxLDAgZWxzZSBwb3MgMCwxXG4gICAgICAgICAgICAgICAgQGRlbHRhLnggKj0gQGNvbnN0cmFpbi54XG4gICAgICAgICAgICAgICAgQGRlbHRhLnkgKj0gQGNvbnN0cmFpbi55XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgZGVsZXRlIEBjb25zdHJhaW5cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIEBvbk1vdmU/IEAsIGV2ZW50IFxuICAgICAgICAgICAgQGxhc3RQb3MgPSBAcG9zXG4gICAgICAgIEBcbiAgICAgICAgICAgICAgICBcbiAgICBkcmFnVXA6IChldmVudCkgPT4gXG4gICAgICAgIFxuICAgICAgICBkZWxldGUgQGNvbnN0cmFpblxuICAgICAgICBAZHJhZ1N0b3AgZXZlbnRcblxuICAgICMgIDAwMDAwMDAgIDAwMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAwMDAwMCAgIFxuICAgICMgMDAwICAgICAgICAgIDAwMCAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgIFxuICAgICMgMDAwMDAwMCAgICAgIDAwMCAgICAgMDAwICAgMDAwICAwMDAwMDAwMCAgIFxuICAgICMgICAgICAwMDAgICAgIDAwMCAgICAgMDAwICAgMDAwICAwMDAgICAgICAgIFxuICAgICMgMDAwMDAwMCAgICAgIDAwMCAgICAgIDAwMDAwMDAgICAwMDAgICAgICAgIFxuICAgIFxuICAgIGRyYWdTdG9wOiAoZXZlbnQpID0+XG5cbiAgICAgICAgaWYgQGRyYWdnaW5nXG4gICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyICdtb3VzZW1vdmUnLCBAZHJhZ01vdmVcbiAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIgJ21vdXNldXAnLCAgIEBkcmFnVXBcbiAgICAgICAgICAgIEBvblN0b3AgQCwgZXZlbnQgaWYgQG9uU3RvcD8gYW5kIGV2ZW50P1xuICAgICAgICAgICAgZGVsZXRlIEBsYXN0UG9zXG4gICAgICAgICAgICBkZWxldGUgQHN0YXJ0UG9zXG4gICAgICAgICAgICBAZHJhZ2dpbmcgPSBmYWxzZVxuICAgICAgICBAXG5cbiAgICAjICAwMDAwMDAwICAgIDAwMDAwMDAgIDAwMDAwMDAwMCAgMDAwICAwMDAgICAwMDAgICAwMDAwMDAwICAgMDAwMDAwMDAwICAwMDAwMDAwMCAgXG4gICAgIyAwMDAgICAwMDAgIDAwMCAgICAgICAgICAwMDAgICAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgICAgIDAwMCAgICAgMDAwICAgICAgIFxuICAgICMgMDAwMDAwMDAwICAwMDAgICAgICAgICAgMDAwICAgICAwMDAgICAwMDAgMDAwICAgMDAwMDAwMDAwICAgICAwMDAgICAgIDAwMDAwMDAgICBcbiAgICAjIDAwMCAgIDAwMCAgMDAwICAgICAgICAgIDAwMCAgICAgMDAwICAgICAwMDAgICAgIDAwMCAgIDAwMCAgICAgMDAwICAgICAwMDAgICAgICAgXG4gICAgIyAwMDAgICAwMDAgICAwMDAwMDAwICAgICAwMDAgICAgIDAwMCAgICAgIDAgICAgICAwMDAgICAwMDAgICAgIDAwMCAgICAgMDAwMDAwMDAgIFxuICAgIFxuICAgIGFjdGl2YXRlOiA9PlxuICAgICAgICBcbiAgICAgICAgaWYgbm90IEBsaXN0ZW5pbmdcbiAgICAgICAgICAgIEBsaXN0ZW5pbmcgPSB0cnVlXG4gICAgICAgICAgICBAaGFuZGxlLmFkZEV2ZW50TGlzdGVuZXIgJ21vdXNlZG93bicsIEBkcmFnU3RhcnRcbiAgICAgICAgQFxuXG4gICAgZGVhY3RpdmF0ZTogPT5cblxuICAgICAgICBpZiBAbGlzdGVuaW5nXG4gICAgICAgICAgICBAaGFuZGxlLnJlbW92ZUV2ZW50TGlzdGVuZXIgJ21vdXNlZG93bicsIEBkcmFnU3RhcnRcbiAgICAgICAgICAgIEBsaXN0ZW5pbmcgPSBmYWxzZVxuICAgICAgICAgICAgQGRyYWdTdG9wKCkgaWYgQGRyYWdnaW5nXG4gICAgICAgIEBcblxubW9kdWxlLmV4cG9ydHMgPSBEcmFnXG4iXX0=
//# sourceURL=../coffee/drag.coffee