(function() {
  /*
  000       0000000    0000000     
  000      000   000  000          
  000      000   000  000  0000    
  000      000   000  000   000    
  0000000   0000000    0000000     
  */
  var _, app, electron, err, fileLog, fs, log, noon, os, post, ref, ref1, slash, slog, sorcery, stack, str, sutil;

  post = require('./ppost');

  str = require('./str');

  os = require('os');

  fs = require('fs');

  _ = require('lodash');

  noon = require('noon');

  sutil = require('stack-utils');

  sorcery = require('sorcery');

  stack = new sutil({
    cwd: process.cwd(),
    internals: sutil.nodeInternals()
  });

  // 00000000  000  000      00000000  
  // 000       000  000      000       
  // 000000    000  000      0000000   
  // 000       000  000      000       
  // 000       000  0000000  00000000  
  fileLog = function(info) {
    var err, i, len, line, lines, slash, stream;
    try {
      slash = require('./slash');
      stream = fs.createWriteStream(slash.resolve(slog.logFile), {
        flags: 'a',
        encoding: 'utf8'
      });
      info.id = slog.id;
      info.icon = slog.icon;
      info.type = slog.type;
      lines = info.str.split('\n');
      if (lines.length) {
        for (i = 0, len = lines.length; i < len; i++) {
          line = lines[i];
          info.str = line;
          stream.write(JSON.stringify(info) + '\n');
          info.id = '';
          info.file = '';
          info.sep = '';
        }
      } else {
        stream.write(JSON.stringify(info) + '\n');
      }
      return stream.end();
    } catch (error) {
      err = error;
      console.log("fileLog error -- ", err.stack);
      return slog.file = false;
    }
  };

  //  0000000  000       0000000    0000000   
  // 000       000      000   000  000        
  // 0000000   000      000   000  000  0000  
  //      000  000      000   000  000   000  
  // 0000000   0000000   0000000    0000000   
  slog = function(s) {
    var chain, err, f, file, info, meth, slash, source;
    slash = require('./slash'); // fancy log with source-mapped files and line numbers
    try {
      f = stack.capture()[slog.depth];
      if (chain = sorcery.loadSync(f.getFileName())) {
        info = chain.trace(f.getLineNumber(), 0);
        if (!slash.samePath(f.getScriptNameOrSourceURL(), f.getFileName())) {
          if (slash.isAbsolute(f.getScriptNameOrSourceURL())) {
            source = slash.path(f.getScriptNameOrSourceURL());
          } else {
            source = slash.resolve(slash.join(slash.dir(f.getFileName()), f.getScriptNameOrSourceURL()));
          }
        } else {
          source = f.getFileName();
        }
        info.source = slash.tilde(source);
      } else {
        info = {
          source: slash.tilde(f.getFileName()),
          line: f.getLineNumber()
        };
      }
      file = _.padStart(`${info.source}:${info.line}`, slog.filepad);
      meth = _.padEnd(f.getFunctionName(), slog.methpad);
      info.str = s;
      s = `${file}${slog.filesep}${meth}${slog.methsep}${s}`;
      post.emit('slog', s, info);
      if (slog.file) {
        return fileLog(info);
      }
    } catch (error) {
      err = error;
      return post.emit('slog', `!${slog.methsep}${s} ${err}`);
    }
  };

  // 000       0000000    0000000   
  // 000      000   000  000        
  // 000      000   000  000  0000  
  // 000      000   000  000   000  
  // 0000000   0000000    0000000   
  log = function() {
    var s;
    s = ((function() {
      var i, len, ref, results;
      ref = [].slice.call(arguments, 0);
      results = [];
      for (i = 0, len = ref.length; i < len; i++) {
        s = ref[i];
        results.push(str(s));
      }
      return results;
    }).apply(this, arguments)).join(" ");
    post.emit('log', s);
    console.log(s);
    return slog(s);
  };

  //  0000000   0000000   000   000  00000000  000   0000000     
  // 000       000   000  0000  000  000       000  000          
  // 000       000   000  000 0 000  000000    000  000  0000    
  // 000       000   000  000  0000  000       000  000   000    
  //  0000000   0000000   000   000  000       000   0000000     
  slog.file = true;

  if (process.platform === 'win32') {
    slog.logFile = '~/AppData/Roaming/klog.txt';
  } else {
    slog.logFile = '~/Library/Application Support/klog.txt';
  }

  slog.id = '???';

  slog.type = process.type === 'renderer' ? 'win' : 'main';

  slog.icon = process.type === 'renderer' ? '●' : '◼';

  slog.depth = 2;

  slog.filesep = ' > '; //' ⦿ '

  slog.methsep = ' >> '; //' ▸ '

  slog.filepad = 30;

  slog.methpad = 15;

  log.slog = slog;

  log.flog = fileLog;

  try {
    electron = require('electron');
    if (process.type === 'renderer') {
      app = electron.remote.app;
    } else {
      app = electron.app;
    }
    slog.id = app.getName();
    slash = require('./slash');
    slog.logFile = slash.join(app.getPath('appData'), 'klog.txt');
  } catch (error) {
    err = error;
    try {
      slash = require('./slash');
      if (process.argv[0].length && ((ref = slash.base(process.argv[0])) === 'node' || ref === 'coffee')) {
        if ((ref1 = process.argv[1]) != null ? ref1.length : void 0) {
          slog.id = slash.base(process.argv[1]);
        }
      } else {
        console.log("can't figure out slog.id -- process.argv:", process.argv.join(' '));
      }
    } catch (error) {
      err = error;
      null;
    }
  }

  module.exports = log;

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9nLmpzIiwic291cmNlUm9vdCI6Ii4iLCJzb3VyY2VzIjpbIi4uL2NvZmZlZS9sb2cuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQUE7Ozs7Ozs7QUFBQSxNQUFBLENBQUEsRUFBQSxHQUFBLEVBQUEsUUFBQSxFQUFBLEdBQUEsRUFBQSxPQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUEsRUFBQSxFQUFBLElBQUEsRUFBQSxHQUFBLEVBQUEsSUFBQSxFQUFBLEtBQUEsRUFBQSxJQUFBLEVBQUEsT0FBQSxFQUFBLEtBQUEsRUFBQSxHQUFBLEVBQUE7O0VBUUEsSUFBQSxHQUFVLE9BQUEsQ0FBUSxTQUFSOztFQUNWLEdBQUEsR0FBVSxPQUFBLENBQVEsT0FBUjs7RUFDVixFQUFBLEdBQVUsT0FBQSxDQUFRLElBQVI7O0VBQ1YsRUFBQSxHQUFVLE9BQUEsQ0FBUSxJQUFSOztFQUNWLENBQUEsR0FBVSxPQUFBLENBQVEsUUFBUjs7RUFDVixJQUFBLEdBQVUsT0FBQSxDQUFRLE1BQVI7O0VBQ1YsS0FBQSxHQUFVLE9BQUEsQ0FBUSxhQUFSOztFQUNWLE9BQUEsR0FBVSxPQUFBLENBQVEsU0FBUjs7RUFFVixLQUFBLEdBQVUsSUFBSSxLQUFKLENBQVU7SUFBQSxHQUFBLEVBQUssT0FBTyxDQUFDLEdBQVIsQ0FBQSxDQUFMO0lBQW9CLFNBQUEsRUFBVyxLQUFLLENBQUMsYUFBTixDQUFBO0VBQS9CLENBQVYsRUFqQlY7Ozs7Ozs7RUF5QkEsT0FBQSxHQUFVLFFBQUEsQ0FBQyxJQUFELENBQUE7QUFFTixRQUFBLEdBQUEsRUFBQSxDQUFBLEVBQUEsR0FBQSxFQUFBLElBQUEsRUFBQSxLQUFBLEVBQUEsS0FBQSxFQUFBO0FBQUE7TUFDSSxLQUFBLEdBQVksT0FBQSxDQUFRLFNBQVI7TUFDWixNQUFBLEdBQVksRUFBRSxDQUFDLGlCQUFILENBQXFCLEtBQUssQ0FBQyxPQUFOLENBQWMsSUFBSSxDQUFDLE9BQW5CLENBQXJCLEVB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QUEsS0FBd0MsUUFBeEMsQ0FBOUI7UUFDSSwyQ0FBa0IsQ0FBRSxlQUFwQjtVQUNJLElBQUksQ0FBQyxFQUFMLEdBQVUsS0FBSyxDQUFDLElBQU4sQ0FBVyxPQUFPLENBQUMsSUFBSyxDQUFBLENBQUEsQ0FBeEIsRUFEZDtTQURKO09BQUEsTUFBQTtRQUlJLE9BQU8sQ0FBQyxHQUFSLENBQVksMkNBQVosRUFBeUQsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFiLENBQWtCLEdBQWxCLENBQXpELEVBSko7T0FGSjtLQUFBLGFBQUE7TUFPTTtNQUNGLEtBUko7S0FWSjs7O0VBb0JBLE1BQU0sQ0FBQyxPQUFQLEdBQWlCO0FBOUlqQiIsInNvdXJjZXNDb250ZW50IjpbIiMjI1xuMDAwICAgICAgIDAwMDAwMDAgICAgMDAwMDAwMCAgICAgXG4wMDAgICAgICAwMDAgICAwMDAgIDAwMCAgICAgICAgICBcbjAwMCAgICAgIDAwMCAgIDAwMCAgMDAwICAwMDAwICAgIFxuMDAwICAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgICAgXG4wMDAwMDAwICAgMDAwMDAwMCAgICAwMDAwMDAwICAgICBcbiMjI1xuXG5wb3N0ICAgID0gcmVxdWlyZSAnLi9wcG9zdCdcbnN0ciAgICAgPSByZXF1aXJlICcuL3N0cidcbm9zICAgICAgPSByZXF1aXJlICdvcydcbmZzICAgICAgPSByZXF1aXJlICdmcydcbl8gICAgICAgPSByZXF1aXJlICdsb2Rhc2gnXG5ub29uICAgID0gcmVxdWlyZSAnbm9vbidcbnN1dGlsICAgPSByZXF1aXJlICdzdGFjay11dGlscydcbnNvcmNlcnkgPSByZXF1aXJlICdzb3JjZXJ5J1xuXG5zdGFjayAgID0gbmV3IHN1dGlsIGN3ZDogcHJvY2Vzcy5jd2QoKSwgaW50ZXJuYWxzOiBzdXRpbC5ub2RlSW50ZXJuYWxzKClcblxuIyAwMDAwMDAwMCAgMDAwICAwMDAgICAgICAwMDAwMDAwMCAgXG4jIDAwMCAgICAgICAwMDAgIDAwMCAgICAgIDAwMCAgICAgICBcbiMgMDAwMDAwICAgIDAwMCAgMDAwICAgICAgMDAwMDAwMCAgIFxuIyAwMDAgICAgICAgMDAwICAwMDAgICAgICAwMDAgICAgICAgXG4jIDAwMCAgICAgICAwMDAgIDAwMDAwMDAgIDAwMDAwMDAwICBcblxuZmlsZUxvZyA9IChpbmZvKSAtPlxuICAgIFxuICAgIHRyeVxuICAgICAgICBzbGFzaCAgICAgPSByZXF1aXJlICcuL3NsYXNoJ1xuICAgICAgICBzdHJlYW0gICAgPSBmcy5jcmVhdGVXcml0ZVN0cmVhbSBzbGFzaC5yZXNvbHZlKHNsb2cubG9nRmlsZSksIGZsYWdzOidhJywgZW5jb2Rpbmc6ICd1dGY4J1xuICAgICAgICBpbmZvLmlkICAgPSBzbG9nLmlkXG4gICAgICAgIGluZm8uaWNvbiA9IHNsb2cuaWNvblxuICAgICAgICBpbmZvLnR5cGUgPSBzbG9nLnR5cGVcbiAgICAgICAgbGluZXMgPSBpbmZvLnN0ci5zcGxpdCAnXFxuJ1xuICAgICAgICBpZiBsaW5lcy5sZW5ndGhcbiAgICAgICAgICAgIGZvciBsaW5lIGluIGxpbmVzXG4gICAgICAgICAgICAgICAgaW5mby5zdHIgPSBsaW5lXG4gICAgICAgICAgICAgICAgc3RyZWFtLndyaXRlIEpTT04uc3RyaW5naWZ5KGluZm8pKydcXG4nXG4gICAgICAgICAgICAgICAgaW5mby5pZCAgID0gJydcbiAgICAgICAgICAgICAgICBpbmZvLmZpbGUgPSAnJ1xuICAgICAgICAgICAgICAgIGluZm8uc2VwICA9ICcnXG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHN0cmVhbS53cml0ZSBKU09OLnN0cmluZ2lmeShpbmZvKSsnXFxuJ1xuICAgICAgICBzdHJlYW0uZW5kKClcbiAgICBjYXRjaCBlcnJcbiAgICAgICAgY29uc29sZS5sb2cgXCJmaWxlTG9nIGVycm9yIC0tIFwiLCBlcnIuc3RhY2tcbiAgICAgICAgc2xvZy5maWxlID0gZmFsc2VcblxuIyAgMDAwMDAwMCAgMDAwICAgICAgIDAwMDAwMDAgICAgMDAwMDAwMCAgIFxuIyAwMDAgICAgICAgMDAwICAgICAgMDAwICAgMDAwICAwMDAgICAgICAgIFxuIyAwMDAwMDAwICAgMDAwICAgICAgMDAwICAgMDAwICAwMDAgIDAwMDAgIFxuIyAgICAgIDAwMCAgMDAwICAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgIFxuIyAwMDAwMDAwICAgMDAwMDAwMCAgIDAwMDAwMDAgICAgMDAwMDAwMCAgIFxuXG5zbG9nID0gKHMpIC0+XG4gICAgXG4gICAgc2xhc2ggPSByZXF1aXJlICcuL3NsYXNoJ1xuICAgIFxuICAgIHRyeSAjIGZhbmN5IGxvZyB3aXRoIHNvdXJjZS1tYXBwZWQgZmlsZXMgYW5kIGxpbmUgbnVtYmVyc1xuICAgICAgICBmID0gc3RhY2suY2FwdHVyZSgpW3Nsb2cuZGVwdGhdXG4gICAgICAgIGlmIGNoYWluID0gc29yY2VyeS5sb2FkU3luYyhmLmdldEZpbGVOYW1lKCkpXG4gICAgICAgICAgICBpbmZvID0gY2hhaW4udHJhY2UoZi5nZXRMaW5lTnVtYmVyKCksIDApXG4gICAgICAgICAgICBpZiBub3Qgc2xhc2guc2FtZVBhdGggZi5nZXRTY3JpcHROYW1lT3JTb3VyY2VVUkwoKSwgZi5nZXRGaWxlTmFtZSgpXG4gICAgICAgICAgICAgICAgaWYgc2xhc2guaXNBYnNvbHV0ZSBmLmdldFNjcmlwdE5hbWVPclNvdXJjZVVSTCgpXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZSA9IHNsYXNoLnBhdGggZi5nZXRTY3JpcHROYW1lT3JTb3VyY2VVUkwoKVxuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgc291cmNlID0gc2xhc2gucmVzb2x2ZSBzbGFzaC5qb2luIHNsYXNoLmRpcihmLmdldEZpbGVOYW1lKCkpLCBmLmdldFNjcmlwdE5hbWVPclNvdXJjZVVSTCgpXG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgc291cmNlID0gZi5nZXRGaWxlTmFtZSgpXG4gICAgICAgICAgICBpbmZvLnNvdXJjZSA9IHNsYXNoLnRpbGRlIHNvdXJjZVxuICAgICAgICBlbHNlXG4gICAgICAgICAgICBpbmZvID0gc291cmNlOiBzbGFzaC50aWxkZShmLmdldEZpbGVOYW1lKCkpLCBsaW5lOiBmLmdldExpbmVOdW1iZXIoKVxuXG4gICAgICAgIGZpbGUgPSBfLnBhZFN0YXJ0IFwiI3tpbmZvLnNvdXJjZX06I3tpbmZvLmxpbmV9XCIsIHNsb2cuZmlsZXBhZFxuICAgICAgICBtZXRoID0gXy5wYWRFbmQgZi5nZXRGdW5jdGlvbk5hbWUoKSwgc2xvZy5tZXRocGFkXG4gICAgICAgIGluZm8uc3RyID0gc1xuICAgICAgICBzID0gXCIje2ZpbGV9I3tzbG9nLmZpbGVzZXB9I3ttZXRofSN7c2xvZy5tZXRoc2VwfSN7c31cIlxuICAgICAgICBwb3N0LmVtaXQgJ3Nsb2cnLCBzLCBpbmZvXG4gICAgICAgIGlmIHNsb2cuZmlsZVxuICAgICAgICAgICAgZmlsZUxvZyBpbmZvICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICBjYXRjaCBlcnJcbiAgICAgICAgcG9zdC5lbWl0ICdzbG9nJywgXCIhI3tzbG9nLm1ldGhzZXB9I3tzfSAje2Vycn1cIlxuXG4jIDAwMCAgICAgICAwMDAwMDAwICAgIDAwMDAwMDAgICBcbiMgMDAwICAgICAgMDAwICAgMDAwICAwMDAgICAgICAgIFxuIyAwMDAgICAgICAwMDAgICAwMDAgIDAwMCAgMDAwMCAgXG4jIDAwMCAgICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICBcbiMgMDAwMDAwMCAgIDAwMDAwMDAgICAgMDAwMDAwMCAgIFxuXG5sb2cgPSAtPlxuICAgIFxuICAgIHMgPSAoc3RyKHMpIGZvciBzIGluIFtdLnNsaWNlLmNhbGwgYXJndW1lbnRzLCAwKS5qb2luIFwiIFwiIFxuICAgIFxuICAgIHBvc3QuZW1pdCAnbG9nJywgc1xuICAgIGNvbnNvbGUubG9nIHNcbiAgICBzbG9nIHNcblxuIyAgMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAgICAwMDAgIDAwMDAwMDAwICAwMDAgICAwMDAwMDAwICAgICBcbiMgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwMCAgMDAwICAwMDAgICAgICAgMDAwICAwMDAgICAgICAgICAgXG4jIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAwIDAwMCAgMDAwMDAwICAgIDAwMCAgMDAwICAwMDAwICAgIFxuIyAwMDAgICAgICAgMDAwICAgMDAwICAwMDAgIDAwMDAgIDAwMCAgICAgICAwMDAgIDAwMCAgIDAwMCAgICBcbiMgIDAwMDAwMDAgICAwMDAwMDAwICAgMDAwICAgMDAwICAwMDAgICAgICAgMDAwICAgMDAwMDAwMCAgICAgXG4gICAgXG5zbG9nLmZpbGUgPSB0cnVlXG5pZiBwcm9jZXNzLnBsYXRmb3JtID09ICd3aW4zMidcbiAgICBzbG9nLmxvZ0ZpbGUgPSAnfi9BcHBEYXRhL1JvYW1pbmcva2xvZy50eHQnXG5lbHNlXG4gICAgc2xvZy5sb2dGaWxlID0gJ34vTGlicmFyeS9BcHBsaWNhdGlvbiBTdXBwb3J0L2tsb2cudHh0J1xuXG5zbG9nLmlkICAgICAgPSAnPz8/J1xuc2xvZy50eXBlICAgID0gaWYgcHJvY2Vzcy50eXBlID09ICdyZW5kZXJlcicgdGhlbiAnd2luJyBlbHNlICdtYWluJ1xuc2xvZy5pY29uICAgID0gaWYgcHJvY2Vzcy50eXBlID09ICdyZW5kZXJlcicgdGhlbiAn4pePJyBlbHNlICfil7wnXG5zbG9nLmRlcHRoICAgPSAyXG5zbG9nLmZpbGVzZXAgPSAnID4gJyAjJyDipr8gJ1xuc2xvZy5tZXRoc2VwID0gJyA+PiAnICMnIOKWuCAnXG5zbG9nLmZpbGVwYWQgPSAzMFxuc2xvZy5tZXRocGFkID0gMTVcblxubG9nLnNsb2cgICAgID0gc2xvZ1xubG9nLmZsb2cgICAgID0gZmlsZUxvZ1xuXG50cnlcbiAgICBlbGVjdHJvbiA9IHJlcXVpcmUgJ2VsZWN0cm9uJ1xuICAgIGlmIHByb2Nlc3MudHlwZSA9PSAncmVuZGVyZXInXG4gICAgICAgIGFwcCA9IGVsZWN0cm9uLnJlbW90ZS5hcHBcbiAgICBlbHNlXG4gICAgICAgIGFwcCA9IGVsZWN0cm9uLmFwcFxuICAgIHNsb2cuaWQgPSBhcHAuZ2V0TmFtZSgpXG4gICAgc2xhc2ggPSByZXF1aXJlICcuL3NsYXNoJ1xuICAgIHNsb2cubG9nRmlsZSA9IHNsYXNoLmpvaW4gYXBwLmdldFBhdGgoJ2FwcERhdGEnKSwgJ2tsb2cudHh0J1xuY2F0Y2ggZXJyXG4gICAgdHJ5XG4gICAgICAgIHNsYXNoID0gcmVxdWlyZSAnLi9zbGFzaCdcbiAgICAgICAgaWYgcHJvY2Vzcy5hcmd2WzBdLmxlbmd0aCBhbmQgc2xhc2guYmFzZShwcm9jZXNzLmFyZ3ZbMF0pIGluIFsnbm9kZScsICdjb2ZmZWUnXVxuICAgICAgICAgICAgaWYgcHJvY2Vzcy5hcmd2WzFdPy5sZW5ndGhcbiAgICAgICAgICAgICAgICBzbG9nLmlkID0gc2xhc2guYmFzZSBwcm9jZXNzLmFyZ3ZbMV1cbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgY29uc29sZS5sb2cgXCJjYW4ndCBmaWd1cmUgb3V0IHNsb2cuaWQgLS0gcHJvY2Vzcy5hcmd2OlwiLCBwcm9jZXNzLmFyZ3Yuam9pbiAnICdcbiAgICBjYXRjaCBlcnJcbiAgICAgICAgbnVsbFxuXG5tb2R1bGUuZXhwb3J0cyA9IGxvZ1xuXG4iXX0=
//# sourceURL=../coffee/log.coffee