(function() {
  /*
  000       0000000    0000000     
  000      000   000  000          
  000      000   000  000  0000    
  000      000   000  000   000    
  0000000   0000000    0000000     
  */
  var _, app, dumpInfos, dumpTimer, electron, err, fileLog, fs, infos, log, noon, os, post, ref, ref1, slash, slog, sorcery, stack, str, sutil;

  post = require('./ppost');

  str = require('./str');

  os = require('os');

  fs = require('fs');

  _ = require('lodash');

  noon = require('noon');

  sutil = require('stack-utils');

  sorcery = require('sorcery');

  stack = new sutil({
    cwd: process.cwd(),
    internals: sutil.nodeInternals()
  });

  // 00000000  000  000      00000000  
  // 000       000  000      000       
  // 000000    000  000      0000000   
  // 000       000  000      000       
  // 000       000  0000000  00000000  
  infos = [];

  dumpInfos = function() {
    var info, slash, stream;
    slash = require('./slash');
    stream = fs.createWriteStream(slash.resolve(slog.logFile), {
      flags: 'a',
      encoding: 'utf8'
    });
    while (infos.length) {
      info = infos.shift();
      stream.write(JSON.stringify(info) + '\n');
    }
    return stream.end();
  };

  dumpTimer = null;

  fileLog = function(info) {
    var err, i, len, line, lines;
    try {
      info.id = slog.id;
      info.icon = slog.icon;
      info.type = slog.type;
      lines = info.str.split('\n');
      if (lines.length) {
        for (i = 0, len = lines.length; i < len; i++) {
          line = lines[i];
          info.str = line;
          infos.push(_.clone(info));
          info.sep = '';
          info.icon = '';
        }
      } else {
        infos.push(info);
      }
      clearImmediate(dumpTimer);
      return dumpTimer = setImmediate(dumpInfos);
    } catch (error) {
      err = error;
      console.log("fileLog error -- ", err.stack);
      return slog.file = false;
    }
  };

  //  0000000  000       0000000    0000000   
  // 000       000      000   000  000        
  // 0000000   000      000   000  000  0000  
  //      000  000      000   000  000   000  
  // 0000000   0000000   0000000    0000000   
  slog = function(s) {
    var chain, err, f, file, info, meth, slash, source;
    slash = require('./slash'); // fancy log with source-mapped files and line numbers
    try {
      f = stack.capture()[slog.depth];
      if (chain = sorcery.loadSync(f.getFileName())) {
        info = chain.trace(f.getLineNumber(), 0);
        if (!slash.samePath(f.getScriptNameOrSourceURL(), f.getFileName())) {
          if (slash.isAbsolute(f.getScriptNameOrSourceURL())) {
            source = slash.path(f.getScriptNameOrSourceURL());
          } else {
            source = slash.resolve(slash.join(slash.dir(f.getFileName()), f.getScriptNameOrSourceURL()));
          }
        } else {
          source = f.getFileName();
        }
        info.source = slash.tilde(source);
      } else {
        info = {
          source: slash.tilde(f.getFileName()),
          line: f.getLineNumber()
        };
      }
      file = _.padStart(`${info.source}:${info.line}`, slog.filepad);
      meth = _.padEnd(f.getFunctionName(), slog.methpad);
      info.str = s;
      s = `${file}${slog.filesep}${meth}${slog.methsep}${s}`;
      post.emit('slog', s, info);
      if (slog.file) {
        return fileLog(info);
      }
    } catch (error) {
      err = error;
      return post.emit('slog', `!${slog.methsep}${s} ${err}`);
    }
  };

  // 000       0000000    0000000   
  // 000      000   000  000        
  // 000      000   000  000  0000  
  // 000      000   000  000   000  
  // 0000000   0000000    0000000   
  log = function() {
    var s;
    s = ((function() {
      var i, len, ref, results;
      ref = [].slice.call(arguments, 0);
      results = [];
      for (i = 0, len = ref.length; i < len; i++) {
        s = ref[i];
        results.push(str(s));
      }
      return results;
    }).apply(this, arguments)).join(" ");
    post.emit('log', s);
    console.log(s);
    return slog(s);
  };

  //  0000000   0000000   000   000  00000000  000   0000000     
  // 000       000   000  0000  000  000       000  000          
  // 000       000   000  000 0 000  000000    000  000  0000    
  // 000       000   000  000  0000  000       000  000   000    
  //  0000000   0000000   000   000  000       000   0000000     
  slog.file = true;

  if (process.platform === 'win32') {
    slog.logFile = '~/AppData/Roaming/klog.txt';
  } else {
    slog.logFile = '~/Library/Application Support/klog.txt';
  }

  slog.id = '???';

  slog.type = process.type === 'renderer' ? 'win' : 'main';

  slog.icon = process.type === 'renderer' ? '●' : '◼';

  slog.depth = 2;

  slog.filesep = ' > '; //' ⦿ '

  slog.methsep = ' >> '; //' ▸ '

  slog.filepad = 30;

  slog.methpad = 15;

  log.slog = slog;

  log.flog = fileLog;

  try {
    electron = require('electron');
    if (process.type === 'renderer') {
      app = electron.remote.app;
    } else {
      app = electron.app;
    }
    slog.id = app.getName();
    slash = require('./slash');
    slog.logFile = slash.join(app.getPath('appData'), 'klog.txt');
  } catch (error) {
    err = error;
    try {
      slash = require('./slash');
      if (process.argv[0].length && ((ref = slash.base(process.argv[0])) === 'node' || ref === 'coffee')) {
        if ((ref1 = process.argv[1]) != null ? ref1.length : void 0) {
          slog.id = slash.base(process.argv[1]);
        }
      } else {
        console.log("can't figure out slog.id -- process.argv:", process.argv.join(' '));
      }
    } catch (error) {
      err = error;
      null;
    }
  }

  module.exports = log;

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9nLmpzIiwic291cmNlUm9vdCI6Ii4iLCJzb3VyY2VzIjpbIi4uL2NvZmZlZS9sb2cuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQUE7Ozs7Ozs7QUFBQSxNQUFBLENBQUEsRUFBQSxHQUFBLEVBQUEsU0FBQSxFQUFBLFNBQUEsRUFBQSxRQUFBLEVBQUEsR0FBQSxFQUFBLE9BQUEsRUFBQSxFQUFBLEVBQUEsS0FBQSxFQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUEsRUFBQSxFQUFBLElBQUEsRUFBQSxHQUFBLEVBQUEsSUFBQSxFQUFBLEtBQUEsRUFBQSxJQUFBLEVBQUEsT0FBQSxFQUFBLEtBQUEsRUFBQSxHQUFBLEVBQUE7O0VBUUEsSUFBQSxHQUFVLE9BQUEsQ0FBUSxTQUFSOztFQUNWLEdBQUEsR0FBVSxPQUFBLENBQVEsT0FBUjs7RUFDVixFQUFBLEdBQVUsT0FBQSxDQUFRLElBQVI7O0VBQ1YsRUFBQSxHQUFVLE9BQUEsQ0FBUSxJQUFSOztFQUNWLENBQUEsR0FBVSxPQUFBLENBQVEsUUFBUjs7RUFDVixJQUFBLEdBQVUsT0FBQSxDQUFRLE1BQVI7O0VBQ1YsS0FBQSxHQUFVLE9BQUEsQ0FBUSxhQUFSOztFQUNWLE9BQUEsR0FBVSxPQUFBLENBQVEsU0FBUjs7RUFFVixLQUFBLEdBQVUsSUFBSSxLQUFKLENBQVU7SUFBQSxHQUFBLEVBQUssT0FBTyxDQUFDLEdBQVIsQ0FBQSxDQUFMO0lBQW9CLFNBQUEsRUFBVyxLQUFLLENBQUMsYUFBTixDQUFBO0VBQS9CLENBQVYsRUFqQlY7Ozs7Ozs7RUF5QkEsS0FBQSxHQUFROztFQUVSLFNBQUEsR0FBWSxRQUFBLENBQUEsQ0FBQTtBQUVSLFFBQUEsSUFBQSxFQUFBLEtBQUEsRUFBQTtJQUFBLEtBQUEsR0FBUyxPQUFBLENBQVEsU0FBUjtJQUNULE1BQUEsR0FBUyxFQUFFLENBQUMsaUJBQUgsQ0FBcUIsS0FBSyxDQUFDLE9BQU4sQ0FBYyxJQUFJLENBQUMsT0FBbkIsQ0FBckIsRUFBa0Q7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U0FBWixDQUFYLEVBQW1DLFVBQW5DLEVBUm5CO0dBQUEsYUFBQTtJQVNNO0FBQ0Y7TUFDSSxLQUFBLEdBQVEsT0FBQSxDQUFRLFNBQVI7TUFDUixJQUFHLE9BQU8sQ0FBQyxJQUFLLENBQUEsQ0FBQSxDQUFFLENBQUMsTUFBaEIsSUFBMkIsUUFBQSxLQUFLLENBQUMsSUFBTixDQUFXLE9BQU8sQ0FBQyxJQUFLLENBQUEsQ0FBQSxDQUF4QixFQUFBLEtBQWdDLE1BQWhDLElBQUEsR0FBQSxLQUF3QyxRQUF4QyxDQUE5QjtRQUNJLDJDQUFrQixDQUFFLGVBQXBCO1VBQ0ksSUFBSSxDQUFDLEVBQUwsR0FBVSxLQUFLLENBQUMsSUFBTixDQUFXLE9BQU8sQ0FBQyxJQUFLLENBQUEsQ0FBQSxDQUF4QixFQURkO1NBREo7T0FBQSxNQUFBO1FBSUksT0FBTyxDQUFDLEdBQVIsQ0FBWSwyQ0FBWixFQUF5RCxPQUFPLENBQUMsSUFBSSxDQUFDLElBQWIsQ0FBa0IsR0FBbEIsQ0FBekQsRUFKSjtPQUZKO0tBQUEsYUFBQTtNQU9NO01BQ0YsS0FSSjtLQVZKOzs7RUFvQkEsTUFBTSxDQUFDLE9BQVAsR0FBaUI7QUF6SmpCIiwic291cmNlc0NvbnRlbnQiOlsiIyMjXG4wMDAgICAgICAgMDAwMDAwMCAgICAwMDAwMDAwICAgICBcbjAwMCAgICAgIDAwMCAgIDAwMCAgMDAwICAgICAgICAgIFxuMDAwICAgICAgMDAwICAgMDAwICAwMDAgIDAwMDAgICAgXG4wMDAgICAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgICBcbjAwMDAwMDAgICAwMDAwMDAwICAgIDAwMDAwMDAgICAgIFxuIyMjXG5cbnBvc3QgICAgPSByZXF1aXJlICcuL3Bwb3N0J1xuc3RyICAgICA9IHJlcXVpcmUgJy4vc3RyJ1xub3MgICAgICA9IHJlcXVpcmUgJ29zJ1xuZnMgICAgICA9IHJlcXVpcmUgJ2ZzJ1xuXyAgICAgICA9IHJlcXVpcmUgJ2xvZGFzaCdcbm5vb24gICAgPSByZXF1aXJlICdub29uJ1xuc3V0aWwgICA9IHJlcXVpcmUgJ3N0YWNrLXV0aWxzJ1xuc29yY2VyeSA9IHJlcXVpcmUgJ3NvcmNlcnknXG5cbnN0YWNrICAgPSBuZXcgc3V0aWwgY3dkOiBwcm9jZXNzLmN3ZCgpLCBpbnRlcm5hbHM6IHN1dGlsLm5vZGVJbnRlcm5hbHMoKVxuXG4jIDAwMDAwMDAwICAwMDAgIDAwMCAgICAgIDAwMDAwMDAwICBcbiMgMDAwICAgICAgIDAwMCAgMDAwICAgICAgMDAwICAgICAgIFxuIyAwMDAwMDAgICAgMDAwICAwMDAgICAgICAwMDAwMDAwICAgXG4jIDAwMCAgICAgICAwMDAgIDAwMCAgICAgIDAwMCAgICAgICBcbiMgMDAwICAgICAgIDAwMCAgMDAwMDAwMCAgMDAwMDAwMDAgIFxuXG5pbmZvcyA9IFtdXG5cbmR1bXBJbmZvcyA9IC0+XG4gICAgXG4gICAgc2xhc2ggID0gcmVxdWlyZSAnLi9zbGFzaCdcbiAgICBzdHJlYW0gPSBmcy5jcmVhdGVXcml0ZVN0cmVhbSBzbGFzaC5yZXNvbHZlKHNsb2cubG9nRmlsZSksIGZsYWdzOidhJywgZW5jb2Rpbmc6ICd1dGY4J1xuICAgIHdoaWxlIGluZm9zLmxlbmd0aFxuICAgICAgICBpbmZvID0gaW5mb3Muc2hpZnQoKVxuICAgICAgICBzdHJlYW0ud3JpdGUgSlNPTi5zdHJpbmdpZnkoaW5mbykrJ1xcbidcbiAgICBzdHJlYW0uZW5kKClcblxuZHVtcFRpbWVyID0gbnVsbFxuICAgIFxuZmlsZUxvZyA9IChpbmZvKSAtPlxuICAgIFxuICAgIHRyeVxuICAgICAgICBpbmZvLmlkICAgPSBzbG9nLmlkXG4gICAgICAgIGluZm8uaWNvbiA9IHNsb2cuaWNvblxuICAgICAgICBpbmZvLnR5cGUgPSBzbG9nLnR5cGVcbiAgICAgICAgbGluZXMgPSBpbmZvLnN0ci5zcGxpdCAnXFxuJ1xuICAgICAgICBpZiBsaW5lcy5sZW5ndGhcbiAgICAgICAgICAgIGZvciBsaW5lIGluIGxpbmVzXG4gICAgICAgICAgICAgICAgaW5mby5zdHIgPSBsaW5lXG4gICAgICAgICAgICAgICAgaW5mb3MucHVzaCBfLmNsb25lIGluZm9cbiAgICAgICAgICAgICAgICBpbmZvLnNlcCAgPSAnJ1xuICAgICAgICAgICAgICAgIGluZm8uaWNvbiA9ICcnXG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGluZm9zLnB1c2ggaW5mb1xuICAgICAgICBjbGVhckltbWVkaWF0ZSBkdW1wVGltZXJcbiAgICAgICAgZHVtcFRpbWVyID0gc2V0SW1tZWRpYXRlIGR1bXBJbmZvc1xuICAgIGNhdGNoIGVyclxuICAgICAgICBjb25zb2xlLmxvZyBcImZpbGVMb2cgZXJyb3IgLS0gXCIsIGVyci5zdGFja1xuICAgICAgICBzbG9nLmZpbGUgPSBmYWxzZVxuXG4jICAwMDAwMDAwICAwMDAgICAgICAgMDAwMDAwMCAgICAwMDAwMDAwICAgXG4jIDAwMCAgICAgICAwMDAgICAgICAwMDAgICAwMDAgIDAwMCAgICAgICAgXG4jIDAwMDAwMDAgICAwMDAgICAgICAwMDAgICAwMDAgIDAwMCAgMDAwMCAgXG4jICAgICAgMDAwICAwMDAgICAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgXG4jIDAwMDAwMDAgICAwMDAwMDAwICAgMDAwMDAwMCAgICAwMDAwMDAwICAgXG5cbnNsb2cgPSAocykgLT5cbiAgICBcbiAgICBzbGFzaCA9IHJlcXVpcmUgJy4vc2xhc2gnXG4gICAgXG4gICAgdHJ5ICMgZmFuY3kgbG9nIHdpdGggc291cmNlLW1hcHBlZCBmaWxlcyBhbmQgbGluZSBudW1iZXJzXG4gICAgICAgIGYgPSBzdGFjay5jYXB0dXJlKClbc2xvZy5kZXB0aF1cbiAgICAgICAgaWYgY2hhaW4gPSBzb3JjZXJ5LmxvYWRTeW5jKGYuZ2V0RmlsZU5hbWUoKSlcbiAgICAgICAgICAgIGluZm8gPSBjaGFpbi50cmFjZShmLmdldExpbmVOdW1iZXIoKSwgMClcbiAgICAgICAgICAgIGlmIG5vdCBzbGFzaC5zYW1lUGF0aCBmLmdldFNjcmlwdE5hbWVPclNvdXJjZVVSTCgpLCBmLmdldEZpbGVOYW1lKClcbiAgICAgICAgICAgICAgICBpZiBzbGFzaC5pc0Fic29sdXRlIGYuZ2V0U2NyaXB0TmFtZU9yU291cmNlVVJMKClcbiAgICAgICAgICAgICAgICAgICAgc291cmNlID0gc2xhc2gucGF0aCBmLmdldFNjcmlwdE5hbWVPclNvdXJjZVVSTCgpXG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBzb3VyY2UgPSBzbGFzaC5yZXNvbHZlIHNsYXNoLmpvaW4gc2xhc2guZGlyKGYuZ2V0RmlsZU5hbWUoKSksIGYuZ2V0U2NyaXB0TmFtZU9yU291cmNlVVJMKClcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBzb3VyY2UgPSBmLmdldEZpbGVOYW1lKClcbiAgICAgICAgICAgIGluZm8uc291cmNlID0gc2xhc2gudGlsZGUgc291cmNlXG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGluZm8gPSBzb3VyY2U6IHNsYXNoLnRpbGRlKGYuZ2V0RmlsZU5hbWUoKSksIGxpbmU6IGYuZ2V0TGluZU51bWJlcigpXG5cbiAgICAgICAgZmlsZSA9IF8ucGFkU3RhcnQgXCIje2luZm8uc291cmNlfToje2luZm8ubGluZX1cIiwgc2xvZy5maWxlcGFkXG4gICAgICAgIG1ldGggPSBfLnBhZEVuZCBmLmdldEZ1bmN0aW9uTmFtZSgpLCBzbG9nLm1ldGhwYWRcbiAgICAgICAgaW5mby5zdHIgPSBzXG4gICAgICAgIHMgPSBcIiN7ZmlsZX0je3Nsb2cuZmlsZXNlcH0je21ldGh9I3tzbG9nLm1ldGhzZXB9I3tzfVwiXG4gICAgICAgIHBvc3QuZW1pdCAnc2xvZycsIHMsIGluZm9cbiAgICAgICAgaWYgc2xvZy5maWxlXG4gICAgICAgICAgICBmaWxlTG9nIGluZm8gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgIGNhdGNoIGVyclxuICAgICAgICBwb3N0LmVtaXQgJ3Nsb2cnLCBcIiEje3Nsb2cubWV0aHNlcH0je3N9ICN7ZXJyfVwiXG5cbiMgMDAwICAgICAgIDAwMDAwMDAgICAgMDAwMDAwMCAgIFxuIyAwMDAgICAgICAwMDAgICAwMDAgIDAwMCAgICAgICAgXG4jIDAwMCAgICAgIDAwMCAgIDAwMCAgMDAwICAwMDAwICBcbiMgMDAwICAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgIFxuIyAwMDAwMDAwICAgMDAwMDAwMCAgICAwMDAwMDAwICAgXG5cbmxvZyA9IC0+XG4gICAgXG4gICAgcyA9IChzdHIocykgZm9yIHMgaW4gW10uc2xpY2UuY2FsbCBhcmd1bWVudHMsIDApLmpvaW4gXCIgXCIgXG4gICAgXG4gICAgcG9zdC5lbWl0ICdsb2cnLCBzXG4gICAgY29uc29sZS5sb2cgc1xuICAgIHNsb2cgc1xuXG4jICAwMDAwMDAwICAgMDAwMDAwMCAgIDAwMCAgIDAwMCAgMDAwMDAwMDAgIDAwMCAgIDAwMDAwMDAgICAgIFxuIyAwMDAgICAgICAgMDAwICAgMDAwICAwMDAwICAwMDAgIDAwMCAgICAgICAwMDAgIDAwMCAgICAgICAgICBcbiMgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwIDAgMDAwICAwMDAwMDAgICAgMDAwICAwMDAgIDAwMDAgICAgXG4jIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAgMDAwMCAgMDAwICAgICAgIDAwMCAgMDAwICAgMDAwICAgIFxuIyAgMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAwMDAwMDAwICAgICBcbiAgICBcbnNsb2cuZmlsZSA9IHRydWVcbmlmIHByb2Nlc3MucGxhdGZvcm0gPT0gJ3dpbjMyJ1xuICAgIHNsb2cubG9nRmlsZSA9ICd+L0FwcERhdGEvUm9hbWluZy9rbG9nLnR4dCdcbmVsc2VcbiAgICBzbG9nLmxvZ0ZpbGUgPSAnfi9MaWJyYXJ5L0FwcGxpY2F0aW9uIFN1cHBvcnQva2xvZy50eHQnXG5cbnNsb2cuaWQgICAgICA9ICc/Pz8nXG5zbG9nLnR5cGUgICAgPSBpZiBwcm9jZXNzLnR5cGUgPT0gJ3JlbmRlcmVyJyB0aGVuICd3aW4nIGVsc2UgJ21haW4nXG5zbG9nLmljb24gICAgPSBpZiBwcm9jZXNzLnR5cGUgPT0gJ3JlbmRlcmVyJyB0aGVuICfil48nIGVsc2UgJ+KXvCdcbnNsb2cuZGVwdGggICA9IDJcbnNsb2cuZmlsZXNlcCA9ICcgPiAnICMnIOKmvyAnXG5zbG9nLm1ldGhzZXAgPSAnID4+ICcgIycg4pa4ICdcbnNsb2cuZmlsZXBhZCA9IDMwXG5zbG9nLm1ldGhwYWQgPSAxNVxuXG5sb2cuc2xvZyAgICAgPSBzbG9nXG5sb2cuZmxvZyAgICAgPSBmaWxlTG9nXG5cbnRyeVxuICAgIGVsZWN0cm9uID0gcmVxdWlyZSAnZWxlY3Ryb24nXG4gICAgaWYgcHJvY2Vzcy50eXBlID09ICdyZW5kZXJlcidcbiAgICAgICAgYXBwID0gZWxlY3Ryb24ucmVtb3RlLmFwcFxuICAgIGVsc2VcbiAgICAgICAgYXBwID0gZWxlY3Ryb24uYXBwXG4gICAgc2xvZy5pZCA9IGFwcC5nZXROYW1lKClcbiAgICBzbGFzaCA9IHJlcXVpcmUgJy4vc2xhc2gnXG4gICAgc2xvZy5sb2dGaWxlID0gc2xhc2guam9pbiBhcHAuZ2V0UGF0aCgnYXBwRGF0YScpLCAna2xvZy50eHQnXG5jYXRjaCBlcnJcbiAgICB0cnlcbiAgICAgICAgc2xhc2ggPSByZXF1aXJlICcuL3NsYXNoJ1xuICAgICAgICBpZiBwcm9jZXNzLmFyZ3ZbMF0ubGVuZ3RoIGFuZCBzbGFzaC5iYXNlKHByb2Nlc3MuYXJndlswXSkgaW4gWydub2RlJywgJ2NvZmZlZSddXG4gICAgICAgICAgICBpZiBwcm9jZXNzLmFyZ3ZbMV0/Lmxlbmd0aFxuICAgICAgICAgICAgICAgIHNsb2cuaWQgPSBzbGFzaC5iYXNlIHByb2Nlc3MuYXJndlsxXVxuICAgICAgICBlbHNlXG4gICAgICAgICAgICBjb25zb2xlLmxvZyBcImNhbid0IGZpZ3VyZSBvdXQgc2xvZy5pZCAtLSBwcm9jZXNzLmFyZ3Y6XCIsIHByb2Nlc3MuYXJndi5qb2luICcgJ1xuICAgIGNhdGNoIGVyclxuICAgICAgICBudWxsXG4gICAgXG5tb2R1bGUuZXhwb3J0cyA9IGxvZ1xuXG4iXX0=
//# sourceURL=../coffee/log.coffee