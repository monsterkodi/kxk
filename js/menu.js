(function() {
  /*
  00     00  00000000  000   000  000   000  
  000   000  000       0000  000  000   000  
  000000000  0000000   000 0 000  000   000  
  000 0 000  000       000  0000  000   000  
  000   000  00000000  000   000   0000000   
  */
  var Menu, elem, keyinfo, log, popup, post, stopEvent;

  ({stopEvent, keyinfo, popup, post, elem, log} = require('./kxk'));

  Menu = class Menu {
    constructor(opt) {
      var combo, div, i, item, len, ref;
      
      // 00000000   0000000    0000000  000   000   0000000  
      // 000       000   000  000       000   000  000       
      // 000000    000   000  000       000   000  0000000   
      // 000       000   000  000       000   000       000  
      // 000        0000000    0000000   0000000   0000000   
      this.focus = this.focus.bind(this);
      this.blur = this.blur.bind(this);
      this.onHover = this.onHover.bind(this);
      this.onFocusOut = this.onFocusOut.bind(this);
      
      //  0000000  000       0000000    0000000  00000000  
      // 000       000      000   000  000       000       
      // 000       000      000   000  0000000   0000000   
      // 000       000      000   000       000  000       
      //  0000000  0000000   0000000   0000000   00000000  
      this.close = this.close.bind(this);
      
      // 000   000  00000000  000   000  
      // 000  000   000        000 000   
      // 0000000    0000000     00000    
      // 000  000   000          000     
      // 000   000  00000000     000     
      this.onKeyDown = this.onKeyDown.bind(this);
      this.onClick = this.onClick.bind(this);
      this.elem = elem({
        class: 'menu',
        tabindex: 3
      });
      ref = opt.items;
      for (i = 0, len = ref.length; i < len; i++) {
        item = ref[i];
        if (item.hide) {
          continue;
        }
        div = elem({
          class: 'menuItem',
          text: item.text
        });
        div.item = item;
        div.addEventListener('click', this.onClick);
        if (item.combo != null) {
          combo = elem('span', {
            class: 'popupCombo',
            text: keyinfo.short(item.combo)
          });
          div.appendChild(combo);
        }
        this.elem.appendChild(div);
      }
      this.select(this.elem.firstChild);
      this.elem.addEventListener('keydown', this.onKeyDown);
      this.elem.addEventListener('focusout', this.onFocusOut);
      this.elem.addEventListener('mouseover', this.onHover);
    }

    focus() {
      this.focusElem = document.activeElement;
      return this.elem.focus();
    }

    blur() {
      var ref;
      this.close();
      return (ref = this.focusElem) != null ? typeof ref.focus === "function" ? ref.focus() : void 0 : void 0;
    }

    onHover(event) {
      return this.select(event.target, {
        selectFirstItem: false
      });
    }

    onFocusOut(event) {
      var ref;
      if (this.popup && !((ref = event.relatedTarget) != null ? ref.classList.contains('popup') : void 0)) {
        this.popup.close({
          focus: false
        });
        return delete this.popup;
      }
    }

    
    //  0000000   00000000   00000000  000   000  
    // 000   000  000   000  000       0000  000  
    // 000   000  00000000   0000000   000 0 000  
    // 000   000  000        000       000  0000  
    //  0000000   000        00000000  000   000  
    open() {
      return this.select(this.elem.firstChild, {
        activate: true
      });
    }

    close(opt = {}) {
      var ref;
      if (this.popup != null) {
        this.popup.close({
          focus: false
        });
        delete this.popup;
        if (opt.focus !== false) {
          return this.elem.focus();
        }
      } else {
        if (opt.focus !== false) {
          return (ref = this.focusElem) != null ? typeof ref.focus === "function" ? ref.focus() : void 0 : void 0;
        }
      }
    }

    childClosed(child, opt) {
      if (child === this.popup) {
        delete this.popup;
        if (opt.focus !== false) {
          return this.elem.focus();
        }
      }
    }

    
    //  0000000  00000000  000      00000000   0000000  000000000  
    // 000       000       000      000       000          000     
    // 0000000   0000000   000      0000000   000          000     
    //      000  000       000      000       000          000     
    // 0000000   00000000  0000000  00000000   0000000     000     
    select(item, opt = {}) {
      var hadPopup, ref;
      if (item == null) {
        return;
      }
      if (this.popup != null) {
        hadPopup = true;
        this.popup.close({
          focus: false
        });
      }
      if ((ref = this.selected) != null) {
        ref.classList.remove('selected');
      }
      this.selected = item;
      this.selected.classList.add('selected');
      if (hadPopup || opt.activate) {
        delete this.popup;
        return this.activate(item, opt);
      }
    }

    
    //  0000000    0000000  000000000  000  000   000   0000000   000000000  00000000  
    // 000   000  000          000     000  000   000  000   000     000     000       
    // 000000000  000          000     000   000 000   000000000     000     0000000   
    // 000   000  000          000     000     000     000   000     000     000       
    // 000   000   0000000     000     000      0      000   000     000     00000000  
    activate(item, opt = {}) {
      var br, items, pr;
      items = item.item.menu;
      if (items) {
        if (this.popup) {
          this.popup.close({
            focus: false
          });
          delete this.popup;
        }
        br = item.getBoundingClientRect();
        pr = item.parentNode.getBoundingClientRect();
        opt.items = items;
        opt.parent = this;
        opt.x = br.left;
        opt.y = pr.top + pr.height;
        this.popup = popup.menu(opt);
        if (opt.selectFirstItem === false) {
          return this.elem.focus();
        }
      }
    }

    toggle(item) {
      if (this.popup) {
        this.popup.close({
          focus: false
        });
        return delete this.popup;
      } else {
        return this.activate(item, {
          selectFirstItem: false
        });
      }
    }

    itemSelected(item, elem) {}

    deactivate(item) {
      return log(item.item);
    }

    navigateLeft() {
      var ref;
      return this.select((ref = this.selected) != null ? ref.previousSibling : void 0, {
        activate: true,
        selectFirstItem: false
      });
    }

    navigateRight() {
      var ref;
      return this.select((ref = this.selected) != null ? ref.nextSibling : void 0, {
        activate: true,
        selectFirstItem: false
      });
    }

    onKeyDown(event) {
      var combo, key, mod;
      ({mod, key, combo} = keyinfo.forEvent(event));
      switch (combo) {
        case 'end':
        case 'page down':
          return stopEvent(event, this.select(this.elem.lastChild, {
            activate: true,
            selectFirstItem: false
          }));
        case 'home':
        case 'page up':
          return stopEvent(event, this.select(this.elem.firstChild, {
            activate: true,
            selectFirstItem: false
          }));
        case 'enter':
        case 'down':
        case 'space':
          return stopEvent(event, this.activate(this.selected));
        case 'esc':
          return stopEvent(event, this.close());
        case 'right':
          return stopEvent(event, this.navigateRight());
        case 'left':
          return stopEvent(event, this.navigateLeft());
      }
    }

    onClick(e) {
      return this.toggle(e.target);
    }

  };

  module.exports = Menu;

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWVudS5qcyIsInNvdXJjZVJvb3QiOiIuIiwic291cmNlcyI6WyIuLi9jb2ZmZWUvbWVudS5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFBQTs7Ozs7OztBQUFBLE1BQUEsSUFBQSxFQUFBLElBQUEsRUFBQSxPQUFBLEVBQUEsR0FBQSxFQUFBLEtBQUEsRUFBQSxJQUFBLEVBQUE7O0VBUUEsQ0FBQSxDQUFFLFNBQUYsRUFBYSxPQUFiLEVBQXNCLEtBQXRCLEVBQTZCLElBQTdCLEVBQW1DLElBQW5DLEVBQXlDLEdBQXpDLENBQUEsR0FBaUQsT0FBQSxDQUFRLE9BQVIsQ0FBakQ7O0VBRU0sT0FBTixNQUFBLEtBQUE7SUFFSSxXQUFhLENBQUMsR0FBRCxDQUFBO0FBRVQsVUFBQSxLQUFBLEVBQUEsR0FBQSxFQUFBLENBQUEsRUFBQSxJQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUE7Ozs7Ozs7VUF3QkosQ0FBQSxZQUFBLENBQUE7VUFLQSxDQUFBLFdBQUEsQ0FBQTtVQUVBLENBQUEsY0FBQSxDQUFBO1VBRUEsQ0FBQSxpQkFBQSxDQUFBLHNCQWpDSTs7Ozs7OztVQXFESixDQUFBLFlBQUEsQ0FBQSxpQkFyREk7Ozs7Ozs7VUE0SUosQ0FBQSxnQkFBQSxDQUFBO1VBYUEsQ0FBQSxjQUFBLENBQUE7TUF6SkksSUFBQyxDQUFBLElBQUQsR0FBUSxJQUFBLENBQUs7UUFBQSxLQUFBLEVBQU8sTUFBUDtRQUFlLFFBQUEsRUFBVTtNQUF6QixDQUFMO0FBRVI7TUFBQSxLQUFBLHFDQUFBOztRQUNJLElBQVksSUFBSSxDQUFDLElBQWpCO0FBQUEsbUJBQUE7O1FBQ0EsR0FBQSxHQUFNLElBQUEsQ0FBSztVQUFBLEtBQUEsRUFBTyxVQUFQO1VBQW1CLElBQUEsRUFBTSxJQUFJLENBQUM7UUFBOUIsQ0FBTDtRQUNOLEdBQUcsQ0FBQyxJQUFKLEdBQVc7UUFDWCxHQUFHLENBQUMsZ0JBQUosQ0FBcUIsT0FBckIsRUFBOEIsSUFBQyxDQUFBLE9BQS9CO1FBQ0Es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O1lBQUEsUUFBQSxFQUFTLElBQVQ7WUFBZSxlQUFBLEVBQWdCO1VBQS9CLENBQTFCLENBQWpCO0FBSHpDLGFBSVMsT0FKVDtBQUFBLGFBSWtCLE1BSmxCO0FBQUEsYUFJMEIsT0FKMUI7aUJBSXlDLFNBQUEsQ0FBVSxLQUFWLEVBQWlCLElBQUMsQ0FBQSxRQUFELENBQVUsSUFBQyxDQUFBLFFBQVgsQ0FBakI7QUFKekMsYUFLUyxLQUxUO2lCQUt5QyxTQUFBLENBQVUsS0FBVixFQUFpQixJQUFDLENBQUEsS0FBRCxDQUFBLENBQWpCO0FBTHpDLGFBTVMsT0FOVDtpQkFNeUMsU0FBQSxDQUFVLEtBQVYsRUFBaUIsSUFBQyxDQUFBLGFBQUQsQ0FBQSxDQUFqQjtBQU56QyxhQU9TLE1BUFQ7aUJBT3lDLFNBQUEsQ0FBVSxLQUFWLEVBQWlCLElBQUMsQ0FBQSxZQUFELENBQUEsQ0FBakI7QUFQekM7SUFKTzs7SUFhWCxPQUFTLENBQUMsQ0FBRCxDQUFBO2FBQU8sSUFBQyxDQUFBLE1BQUQsQ0FBUSxDQUFDLENBQUMsTUFBVjtJQUFQOztFQTdKYjs7RUErSkEsTUFBTSxDQUFDLE9BQVAsR0FBaUI7QUF6S2pCIiwic291cmNlc0NvbnRlbnQiOlsiIyMjXG4wMCAgICAgMDAgIDAwMDAwMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgXG4wMDAgICAwMDAgIDAwMCAgICAgICAwMDAwICAwMDAgIDAwMCAgIDAwMCAgXG4wMDAwMDAwMDAgIDAwMDAwMDAgICAwMDAgMCAwMDAgIDAwMCAgIDAwMCAgXG4wMDAgMCAwMDAgIDAwMCAgICAgICAwMDAgIDAwMDAgIDAwMCAgIDAwMCAgXG4wMDAgICAwMDAgIDAwMDAwMDAwICAwMDAgICAwMDAgICAwMDAwMDAwICAgXG4jIyNcblxueyBzdG9wRXZlbnQsIGtleWluZm8sIHBvcHVwLCBwb3N0LCBlbGVtLCBsb2cgfSA9IHJlcXVpcmUgJy4va3hrJ1xuXG5jbGFzcyBNZW51XG4gICAgXG4gICAgY29uc3RydWN0b3I6IChvcHQpIC0+XG4gICAgICAgIFxuICAgICAgICBAZWxlbSA9IGVsZW0gY2xhc3M6ICdtZW51JywgdGFiaW5kZXg6IDNcbiAgICAgICAgXG4gICAgICAgIGZvciBpdGVtIGluIG9wdC5pdGVtc1xuICAgICAgICAgICAgY29udGludWUgaWYgaXRlbS5oaWRlXG4gICAgICAgICAgICBkaXYgPSBlbGVtIGNsYXNzOiAnbWVudUl0ZW0nLCB0ZXh0OiBpdGVtLnRleHRcbiAgICAgICAgICAgIGRpdi5pdGVtID0gaXRlbVxuICAgICAgICAgICAgZGl2LmFkZEV2ZW50TGlzdGVuZXIgJ2NsaWNrJywgQG9uQ2xpY2tcbiAgICAgICAgICAgIGlmIGl0ZW0uY29tYm8/XG4gICAgICAgICAgICAgICAgY29tYm8gPSBlbGVtICdzcGFuJywgY2xhc3M6ICdwb3B1cENvbWJvJywgdGV4dDoga2V5aW5mby5zaG9ydCBpdGVtLmNvbWJvXG4gICAgICAgICAgICAgICAgZGl2LmFwcGVuZENoaWxkIGNvbWJvXG4gICAgICAgICAgICBAZWxlbS5hcHBlbmRDaGlsZCBkaXZcblxuICAgICAgICBAc2VsZWN0IEBlbGVtLmZpcnN0Q2hpbGRcbiAgICAgICAgICAgIFxuICAgICAgICBAZWxlbS5hZGRFdmVudExpc3RlbmVyICdrZXlkb3duJywgICBAb25LZXlEb3duXG4gICAgICAgIEBlbGVtLmFkZEV2ZW50TGlzdGVuZXIgJ2ZvY3Vzb3V0JywgIEBvbkZvY3VzT3V0XG4gICAgICAgIEBlbGVtLmFkZEV2ZW50TGlzdGVuZXIgJ21vdXNlb3ZlcicsIEBvbkhvdmVyXG4gICAgICAgIFxuICAgICMgMDAwMDAwMDAgICAwMDAwMDAwICAgIDAwMDAwMDAgIDAwMCAgIDAwMCAgIDAwMDAwMDAgIFxuICAgICMgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgICAgIFxuICAgICMgMDAwMDAwICAgIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwMDAwMCAgIFxuICAgICMgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMCAgIDAwMCAgICAgICAwMDAgIFxuICAgICMgMDAwICAgICAgICAwMDAwMDAwICAgIDAwMDAwMDAgICAwMDAwMDAwICAgMDAwMDAwMCAgIFxuICAgIFxuICAgIGZvY3VzOiA9PiBcbiAgICAgICAgXG4gICAgICAgIEBmb2N1c0VsZW0gPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50XG4gICAgICAgIEBlbGVtLmZvY3VzKClcbiAgICAgICAgXG4gICAgYmx1cjogPT4gQGNsb3NlKCk7IEBmb2N1c0VsZW0/LmZvY3VzPygpXG4gICAgXG4gICAgb25Ib3ZlcjogKGV2ZW50KSA9PiBAc2VsZWN0IGV2ZW50LnRhcmdldCwgc2VsZWN0Rmlyc3RJdGVtOmZhbHNlXG4gICAgXG4gICAgb25Gb2N1c091dDogKGV2ZW50KSA9PiBcbiAgICAgICAgXG4gICAgICAgIGlmIEBwb3B1cCBhbmQgbm90IGV2ZW50LnJlbGF0ZWRUYXJnZXQ/LmNsYXNzTGlzdC5jb250YWlucyAncG9wdXAnXG4gICAgICAgICAgICBAcG9wdXAuY2xvc2UgZm9jdXM6ZmFsc2VcbiAgICAgICAgICAgIGRlbGV0ZSBAcG9wdXBcbiAgICBcbiAgICAjICAwMDAwMDAwICAgMDAwMDAwMDAgICAwMDAwMDAwMCAgMDAwICAgMDAwICBcbiAgICAjIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAgICAgMDAwMCAgMDAwICBcbiAgICAjIDAwMCAgIDAwMCAgMDAwMDAwMDAgICAwMDAwMDAwICAgMDAwIDAgMDAwICBcbiAgICAjIDAwMCAgIDAwMCAgMDAwICAgICAgICAwMDAgICAgICAgMDAwICAwMDAwICBcbiAgICAjICAwMDAwMDAwICAgMDAwICAgICAgICAwMDAwMDAwMCAgMDAwICAgMDAwICBcbiAgICBcbiAgICBvcGVuOiAtPiBAc2VsZWN0IEBlbGVtLmZpcnN0Q2hpbGQsIGFjdGl2YXRlOnRydWVcbiAgICAgICAgICAgIFxuICAgICMgIDAwMDAwMDAgIDAwMCAgICAgICAwMDAwMDAwICAgIDAwMDAwMDAgIDAwMDAwMDAwICBcbiAgICAjIDAwMCAgICAgICAwMDAgICAgICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAgICAgXG4gICAgIyAwMDAgICAgICAgMDAwICAgICAgMDAwICAgMDAwICAwMDAwMDAwICAgMDAwMDAwMCAgIFxuICAgICMgMDAwICAgICAgIDAwMCAgICAgIDAwMCAgIDAwMCAgICAgICAwMDAgIDAwMCAgICAgICBcbiAgICAjICAwMDAwMDAwICAwMDAwMDAwICAgMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAwMDAwMCAgXG4gICAgXG4gICAgY2xvc2U6IChvcHQ9e30pID0+XG4gICAgICAgIFxuICAgICAgICBpZiBAcG9wdXA/XG4gICAgICAgICAgICBAcG9wdXAuY2xvc2UgZm9jdXM6ZmFsc2VcbiAgICAgICAgICAgIGRlbGV0ZSBAcG9wdXBcbiAgICAgICAgICAgIGlmIG9wdC5mb2N1cyAhPSBmYWxzZVxuICAgICAgICAgICAgICAgIEBlbGVtLmZvY3VzKClcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgaWYgb3B0LmZvY3VzICE9IGZhbHNlXG4gICAgICAgICAgICAgICAgQGZvY3VzRWxlbT8uZm9jdXM/KClcbiAgICAgICAgICAgIFxuICAgIGNoaWxkQ2xvc2VkOiAoY2hpbGQsIG9wdCkgLT5cbiAgICAgICAgXG4gICAgICAgIGlmIGNoaWxkID09IEBwb3B1cFxuICAgICAgICAgICAgZGVsZXRlIEBwb3B1cFxuICAgICAgICAgICAgaWYgb3B0LmZvY3VzICE9IGZhbHNlXG4gICAgICAgICAgICAgICAgQGVsZW0uZm9jdXMoKVxuICAgIFxuICAgICMgIDAwMDAwMDAgIDAwMDAwMDAwICAwMDAgICAgICAwMDAwMDAwMCAgIDAwMDAwMDAgIDAwMDAwMDAwMCAgXG4gICAgIyAwMDAgICAgICAgMDAwICAgICAgIDAwMCAgICAgIDAwMCAgICAgICAwMDAgICAgICAgICAgMDAwICAgICBcbiAgICAjIDAwMDAwMDAgICAwMDAwMDAwICAgMDAwICAgICAgMDAwMDAwMCAgIDAwMCAgICAgICAgICAwMDAgICAgIFxuICAgICMgICAgICAwMDAgIDAwMCAgICAgICAwMDAgICAgICAwMDAgICAgICAgMDAwICAgICAgICAgIDAwMCAgICAgXG4gICAgIyAwMDAwMDAwICAgMDAwMDAwMDAgIDAwMDAwMDAgIDAwMDAwMDAwICAgMDAwMDAwMCAgICAgMDAwICAgICBcbiAgICBcbiAgICBzZWxlY3Q6IChpdGVtLCBvcHQ9e30pIC0+IFxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGlmIG5vdCBpdGVtP1xuICAgICAgICBcbiAgICAgICAgaWYgQHBvcHVwP1xuICAgICAgICAgICAgaGFkUG9wdXAgPSB0cnVlXG4gICAgICAgICAgICBAcG9wdXAuY2xvc2UgZm9jdXM6ZmFsc2VcbiAgICAgICAgXG4gICAgICAgIEBzZWxlY3RlZD8uY2xhc3NMaXN0LnJlbW92ZSAnc2VsZWN0ZWQnXG4gICAgICAgIEBzZWxlY3RlZCA9IGl0ZW1cbiAgICAgICAgQHNlbGVjdGVkLmNsYXNzTGlzdC5hZGQgJ3NlbGVjdGVkJ1xuICAgICAgICBcbiAgICAgICAgaWYgaGFkUG9wdXAgb3Igb3B0LmFjdGl2YXRlXG4gICAgICAgICAgICBkZWxldGUgQHBvcHVwXG4gICAgICAgICAgICBAYWN0aXZhdGUgaXRlbSwgb3B0XG4gICAgICAgIFxuICAgICMgIDAwMDAwMDAgICAgMDAwMDAwMCAgMDAwMDAwMDAwICAwMDAgIDAwMCAgIDAwMCAgIDAwMDAwMDAgICAwMDAwMDAwMDAgIDAwMDAwMDAwICBcbiAgICAjIDAwMCAgIDAwMCAgMDAwICAgICAgICAgIDAwMCAgICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgICAgMDAwICAgICAwMDAgICAgICAgXG4gICAgIyAwMDAwMDAwMDAgIDAwMCAgICAgICAgICAwMDAgICAgIDAwMCAgIDAwMCAwMDAgICAwMDAwMDAwMDAgICAgIDAwMCAgICAgMDAwMDAwMCAgIFxuICAgICMgMDAwICAgMDAwICAwMDAgICAgICAgICAgMDAwICAgICAwMDAgICAgIDAwMCAgICAgMDAwICAgMDAwICAgICAwMDAgICAgIDAwMCAgICAgICBcbiAgICAjIDAwMCAgIDAwMCAgIDAwMDAwMDAgICAgIDAwMCAgICAgMDAwICAgICAgMCAgICAgIDAwMCAgIDAwMCAgICAgMDAwICAgICAwMDAwMDAwMCAgXG4gICAgXG4gICAgYWN0aXZhdGU6IChpdGVtLCBvcHQ9e30pIC0+IFxuICAgICAgICBcbiAgICAgICAgaXRlbXMgPSBpdGVtLml0ZW0ubWVudVxuICAgICAgICBcbiAgICAgICAgaWYgaXRlbXNcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgQHBvcHVwXG4gICAgICAgICAgICAgICAgQHBvcHVwLmNsb3NlIGZvY3VzOmZhbHNlXG4gICAgICAgICAgICAgICAgZGVsZXRlIEBwb3B1cFxuXG4gICAgICAgICAgICBiciA9IGl0ZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgICAgICAgICAgIHByID0gaXRlbS5wYXJlbnROb2RlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gICAgICAgICAgICBvcHQuaXRlbXMgPSBpdGVtc1xuICAgICAgICAgICAgb3B0LnBhcmVudCA9IEBcbiAgICAgICAgICAgIG9wdC54ID0gYnIubGVmdFxuICAgICAgICAgICAgb3B0LnkgPSBwci50b3ArcHIuaGVpZ2h0XG4gICAgICAgICAgICBAcG9wdXAgPSBwb3B1cC5tZW51IG9wdFxuICAgICAgICAgICAgaWYgb3B0LnNlbGVjdEZpcnN0SXRlbSA9PSBmYWxzZVxuICAgICAgICAgICAgICAgIEBlbGVtLmZvY3VzKClcblxuICAgIHRvZ2dsZTogKGl0ZW0pIC0+XG4gICAgICAgIFxuICAgICAgICBpZiBAcG9wdXBcbiAgICAgICAgICAgIEBwb3B1cC5jbG9zZSBmb2N1czpmYWxzZVxuICAgICAgICAgICAgZGVsZXRlIEBwb3B1cFxuICAgICAgICBlbHNlXG4gICAgICAgICAgICBAYWN0aXZhdGUgaXRlbSwgc2VsZWN0Rmlyc3RJdGVtOmZhbHNlXG4gICAgICAgICAgICBcbiAgICBpdGVtU2VsZWN0ZWQ6IChpdGVtLCBlbGVtKSAtPlxuICAgICAgICAgICAgXG4gICAgZGVhY3RpdmF0ZTogKGl0ZW0pIC0+IGxvZyBpdGVtLml0ZW1cblxuICAgIG5hdmlnYXRlTGVmdDogIC0+IEBzZWxlY3QgQHNlbGVjdGVkPy5wcmV2aW91c1NpYmxpbmcsIGFjdGl2YXRlOnRydWUsIHNlbGVjdEZpcnN0SXRlbTpmYWxzZVxuICAgIG5hdmlnYXRlUmlnaHQ6IC0+IEBzZWxlY3QgQHNlbGVjdGVkPy5uZXh0U2libGluZywgICAgIGFjdGl2YXRlOnRydWUsIHNlbGVjdEZpcnN0SXRlbTpmYWxzZVxuICAgIFxuICAgICMgMDAwICAgMDAwICAwMDAwMDAwMCAgMDAwICAgMDAwICBcbiAgICAjIDAwMCAgMDAwICAgMDAwICAgICAgICAwMDAgMDAwICAgXG4gICAgIyAwMDAwMDAwICAgIDAwMDAwMDAgICAgIDAwMDAwICAgIFxuICAgICMgMDAwICAwMDAgICAwMDAgICAgICAgICAgMDAwICAgICBcbiAgICAjIDAwMCAgIDAwMCAgMDAwMDAwMDAgICAgIDAwMCAgICAgXG4gICAgXG4gICAgb25LZXlEb3duOiAoZXZlbnQpID0+XG4gICAgICAgIFxuICAgICAgICB7IG1vZCwga2V5LCBjb21ibyB9ID0ga2V5aW5mby5mb3JFdmVudCBldmVudFxuICAgICAgICBcbiAgICAgICAgc3dpdGNoIGNvbWJvXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHdoZW4gJ2VuZCcsICdwYWdlIGRvd24nICAgICAgICAgdGhlbiBzdG9wRXZlbnQgZXZlbnQsIEBzZWxlY3QgQGVsZW0ubGFzdENoaWxkLCAgYWN0aXZhdGU6dHJ1ZSwgc2VsZWN0Rmlyc3RJdGVtOmZhbHNlXG4gICAgICAgICAgICB3aGVuICdob21lJywgJ3BhZ2UgdXAnICAgICAgICAgIHRoZW4gc3RvcEV2ZW50IGV2ZW50LCBAc2VsZWN0IEBlbGVtLmZpcnN0Q2hpbGQsIGFjdGl2YXRlOnRydWUsIHNlbGVjdEZpcnN0SXRlbTpmYWxzZVxuICAgICAgICAgICAgd2hlbiAnZW50ZXInLCAnZG93bicsICdzcGFjZScgICB0aGVuIHN0b3BFdmVudCBldmVudCwgQGFjdGl2YXRlIEBzZWxlY3RlZFxuICAgICAgICAgICAgd2hlbiAnZXNjJyAgICAgICAgICAgICAgICAgICAgICB0aGVuIHN0b3BFdmVudCBldmVudCwgQGNsb3NlKClcbiAgICAgICAgICAgIHdoZW4gJ3JpZ2h0JyAgICAgICAgICAgICAgICAgICAgdGhlbiBzdG9wRXZlbnQgZXZlbnQsIEBuYXZpZ2F0ZVJpZ2h0KClcbiAgICAgICAgICAgIHdoZW4gJ2xlZnQnICAgICAgICAgICAgICAgICAgICAgdGhlbiBzdG9wRXZlbnQgZXZlbnQsIEBuYXZpZ2F0ZUxlZnQoKVxuICAgICAgICAgICAgXG4gICAgb25DbGljazogKGUpID0+IEB0b2dnbGUgZS50YXJnZXRcbiAgICAgICAgXG5tb2R1bGUuZXhwb3J0cyA9IE1lbnVcbiJdfQ==
//# sourceURL=../coffee/menu.coffee