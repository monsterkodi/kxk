(function() {
  /*
  00     00   0000000   000000000   0000000  000   000  00000000 
  000   000  000   000     000     000       000   000  000   000
  000000000  000000000     000     000       000000000  0000000  
  000 0 000  000   000     000     000       000   000  000   000
  000   000  000   000     000      0000000  000   000  000   000
  */
  var _, config, dissect, empty, last, merge, ranges, sortRanges, str;

  ({empty, last, str, _} = require('./kxk'));

  //  0000000   0000000   000   000  00000000  000   0000000 
  // 000       000   000  0000  000  000       000  000      
  // 000       000   000  000 0 000  000000    000  000  0000
  // 000       000   000  000  0000  000       000  000   000
  //  0000000   0000000   000   000  000       000   0000000 

  // convert the patterns object to a list of [RegExp(key), value] pairs
  config = function(patterns, flags) {
    var a, p, results;
    results = [];
    for (p in patterns) {
      a = patterns[p];
      results.push([new RegExp(p, flags), a]);
    }
    return results;
  };

  sortRanges = function(rgs) {
    return rgs.sort(function(a, b) {
      if (a.start === b.start) {
        return a.index - b.index;
      } else {
        return a.start - b.start;
      }
    });
  };

  // 00000000    0000000   000   000   0000000   00000000   0000000
  // 000   000  000   000  0000  000  000        000       000     
  // 0000000    000000000  000 0 000  000  0000  0000000   0000000 
  // 000   000  000   000  000  0000  000   000  000            000
  // 000   000  000   000  000   000   0000000   00000000  0000000 

  // accepts a list of [regexp, value(s)] pairs and a string
  // returns a list of objects with information about the matches:

  //     match: the matched substring
  //     start: position of match in str
  //     value: the value for the match
  //     index: index of the regexp

  //     the objects are sorted by start and index

  //     if the regexp has capture groups then 
  //         the value for the match of the nth group is
  //             the nth item of values(s) if value(s) is an array
  //             the nth [key, value] pair if value(s) is an object
  ranges = function(regexes, text, flags) {
    var arg, gi, gs, i, j, k, l, match, r, ref, ref1, reg, rgs, s, value;
    if (!_.isArray(regexes)) {
      if (_.isString(regexes)) {
        if (regexes.indexOf('|') >= 0) {
          regexes = (function() {
            var k, len, ref, results;
            ref = regexes.split('|');
            results = [];
            for (k = 0, len = ref.length; k < len; k++) {
              r = ref[k];
              results.push([new RegExp(r, flags), 'found']);
            }
            return results;
          })();
        } else {
          regexes = [[new RegExp(regexes, flags), 'found']];
        }
      } else {
        regexes = [[regexes, 'found']];
      }
    } else if (!_.isArray(regexes[0])) {
      regexes = [regexes];
    }
    rgs = [];
    if (text == null) {
      return rgs;
    }
    for (r = k = 0, ref = regexes.length; (0 <= ref ? k < ref : k > ref); r = 0 <= ref ? ++k : --k) {
      reg = regexes[r][0];
      if ((reg == null) || (reg.exec == null)) {
        console.error('no reg?', regexes, text, flags);
        return rgs;
      }
      arg = regexes[r][1];
      i = 0;
      s = text;
      while (s.length) {
        match = reg.exec(s);
        if (match == null) {
          break;
        }
        if (match.length === 1) {
          if (match[0].length > 0) {
            rgs.push({
              start: match.index + i,
              match: match[0],
              value: arg,
              index: r
            });
          }
          i += match.index + Math.max(1, match[0].length);
          s = text.slice(i);
        } else {
          gs = 0;
          for (j = l = 0, ref1 = match.length - 2; (0 <= ref1 ? l <= ref1 : l >= ref1); j = 0 <= ref1 ? ++l : --l) {
            value = arg;
            if (_.isArray(value) && j < value.length) {
              value = value[j];
            } else if (_.isObject(value) && j < _.size(value)) {
              value = [_.keys(value)[j], value[_.keys(value)[j]]];
            }
            if (match[j + 1] == null) {
              break;
            }
            gi = match[0].slice(gs).indexOf(match[j + 1]);
            rgs.push({
              start: match.index + i + gs + gi,
              match: match[j + 1],
              value: value,
              index: r
            });
            gs += match[j + 1].length;
          }
          i += match.index + match[0].length;
          s = text.slice(i);
        }
      }
    }
    return sortRanges(rgs);
  };

  
  // 0000000    000   0000000   0000000  00000000   0000000  000000000
  // 000   000  000  000       000       000       000          000   
  // 000   000  000  0000000   0000000   0000000   000          000   
  // 000   000  000       000       000  000       000          000   
  // 0000000    000  0000000   0000000   00000000   0000000     000   

  // accepts a list of ranges
  // returns a list of objects:

  //     match: the matched substring
  //     start: position of match in str
  //     clss:  string of classnames joined with a space

  //     with none of the [start, start+match.length] ranges overlapping
  dissect = function(ranges, opt = {
      join: false
    }) {
    var c, d, di, dps, i, k, l, len, len1, len2, len3, len4, len5, m, n, o, p, pn, q, r, ref, ref1, ref2, ref3, ref4, rg, ri, si, t, u;
    
    // log = opt?.log ? ->
    if (!ranges.length) {
      return [];
    }
    // console.log "dissect -- #{JSON.stringify ranges}"
    di = []; // collect a list of positions where a match starts or ends
    for (k = 0, len = ranges.length; k < len; k++) {
      rg = ranges[k];
      di.push([rg.start, rg.index]);
      di.push([rg.start + rg.match.length, rg.index]);
    }
    di.sort(function(a, b) { // sort the start/end positions by x or index
      if (a[0] === b[0]) {
        return a[1] - b[1];
      } else {
        return a[0] - b[0];
      }
    });
    d = [];
    si = -1;
// create a list of dummy ranges 
    for (l = 0, len1 = di.length; l < len1; l++) {
      dps = di[l];
      if (dps[0] > si) { // one range for each position
        si = dps[0];
        d.push({
          start: si,
          cls: []
        });
      }
    }
    p = 0;
    for (ri = m = 0, ref = ranges.length; (0 <= ref ? m < ref : m > ref); ri = 0 <= ref ? ++m : --m) {
      rg = ranges[ri];
      while (d[p].start < rg.start) {
        p += 1;
      }
      pn = p;
      while (d[pn].start < rg.start + rg.match.length) {
        if (rg.value != null) {
          if (rg.value.split == null) {
            ref1 = rg.value;
            for (n = 0, len2 = ref1.length; n < len2; n++) {
              r = ref1[n];
              if (r.split == null) {
                continue;
              }
              ref2 = r.split('.');
              for (o = 0, len3 = ref2.length; o < len3; o++) {
                c = ref2[o];
                if (d[pn].cls.indexOf(c) < 0) {
                  d[pn].cls.push(c);
                }
              }
            }
          } else {
            ref3 = rg.value.split('.');
            for (q = 0, len4 = ref3.length; q < len4; q++) {
              c = ref3[q];
              if (d[pn].cls.indexOf(c) < 0) {
                d[pn].cls.push(c);
              }
            }
          }
        }
        if (pn + 1 < d.length) {
          if (!d[pn].match) {
            d[pn].match = rg.match.substr(d[pn].start - rg.start, d[pn + 1].start - d[pn].start);
          }
          pn += 1;
        } else {
          if (!d[pn].match) {
            d[pn].match = rg.match.substr(d[pn].start - rg.start);
          }
          break;
        }
      }
    }
    d = d.filter(function(i) {
      var ref4;
      return (ref4 = i.match) != null ? ref4.trim().length : void 0;
    });
    for (t = 0, len5 = d.length; t < len5; t++) {
      i = d[t];
      i.clss = i.cls.join(' ');
      delete i.cls;
    }
    if (d.length > 1) {
      for (i = u = ref4 = d.length - 2; (ref4 <= 0 ? u <= 0 : u >= 0); i = ref4 <= 0 ? ++u : --u) {
        if (d[i].start + d[i].match.length === d[i + 1].start) {
          if (d[i].clss === d[i + 1].clss) {
            d[i].match += d[i + 1].match;
            d.splice(i + 1, 1);
          }
        }
      }
    }
    return d;
  };

  // 00     00  00000000  00000000    0000000   00000000  
  // 000   000  000       000   000  000        000       
  // 000000000  0000000   0000000    000  0000  0000000   
  // 000 0 000  000       000   000  000   000  000       
  // 000   000  00000000  000   000   0000000   00000000  

  // merges two sorted lists of dissections
  merge = function(dssA, dssB) {
    var A, B, d, result;
    result = [];
    A = dssA.shift();
    B = dssB.shift();
    while (A && B) {
      if (A.start + A.match.length < B.start) {
        result.push(A);
        A = dssA.shift();
        continue;
      }
      if (B.start + B.match.length < A.start) {
        result.push(B);
        B = dssB.shift();
        continue;
      }
      if (A.start < B.start) {
        d = B.start - A.start;
        result.push({
          start: A.start,
          clss: A.clss,
          match: A.match.slice(0, d)
        });
        A.start += d;
        A.match = A.match.slice(d);
        continue;
      }
      if (B.start < A.start) {
        d = A.start - B.start;
        result.push({
          start: B.start,
          clss: B.clss,
          match: B.match.slice(0, d)
        });
        B.start += d;
        B.match = B.match.slice(d);
        continue;
      }
      if (A.start === B.start) {
        d = A.match.length - B.match.length;
        result.push({
          start: A.start,
          clss: A.clss + " " + B.clss,
          match: d >= 0 && B.match || A.match
        });
        if (d > 0) {
          A.match = A.match.slice(B.match.length);
          A.start += B.match.length;
          B = dssB.shift();
        } else if (d < 0) {
          B.match = B.match.slice(A.match.length);
          B.start += A.match.length;
          A = dssA.shift();
        } else {
          A = dssA.shift();
          B = dssB.shift();
        }
      }
    }
    if (B && !A) {
      result = result.concat([B], dssB);
    }
    if (A && !B) {
      result = result.concat([A], dssA);
    }
    return result;
  };

  module.exports = {
    config: config,
    ranges: ranges,
    dissect: dissect,
    sortRanges: sortRanges,
    merge: merge
  };

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWF0Y2hyLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWUvbWF0Y2hyLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUFBOzs7Ozs7O0FBQUEsTUFBQSxDQUFBLEVBQUEsTUFBQSxFQUFBLE9BQUEsRUFBQSxLQUFBLEVBQUEsSUFBQSxFQUFBLEtBQUEsRUFBQSxNQUFBLEVBQUEsVUFBQSxFQUFBOztFQVFBLENBQUEsQ0FBRSxLQUFGLEVBQVMsSUFBVCxFQUFlLEdBQWYsRUFBb0IsQ0FBcEIsQ0FBQSxHQUEwQixPQUFBLENBQVEsT0FBUixDQUExQixFQVJBOzs7Ozs7Ozs7RUFrQkEsTUFBQSxHQUFTLFFBQUEsQ0FBQyxRQUFELEVBQVcsS0FBWCxDQUFBO0FBQXFCLFFBQUEsQ0FBQSxFQUFBLENBQUEsRUFBQTtBQUE0QjtJQUFBLEtBQUEsYUFBQTs7bUJBQTFCLENBQUMsSUFBSSxNQUFKLENBQVcsQ0FBWCxFQUFjLEtBQWQsQ0FBRCxFQUF1QixDQUF2QjtJQUEwQixDQUFBOztFQUFqRDs7RUFFVCxVQUFBLEdBQWEsUUFBQSxDQUFDLEdBQUQsQ0FBQTtXQUVULEdBQUcsQ0FBQyxJQUFKLENBQVMsUUFBQSxDQUFDLENBQUQsRUFBRyxDQUFILENBQUE7TUFDTCxJQUFHLENBQUMsQ0FBQyxLQUFGLEtBQVcsQ0FBQyxDQUFDLEtBQWhCO2VBQ0ksQ0FBQyxDQUFDLEtBQUYsR0FBVSxDQUFDLENBQUMsTUFEaEI7T0FBQSxNQUFBO2VBR0ksQ0FBQyxDQUFDLEtBQUYsR0FBVSxDQUFDLENBQUMsTUFIaEI7O0lBREssQ0FBVDtFQUZTLEVBcEJiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0VBaURBLE1BQUEsR0FBUyxRQUFBLENBQUMsT0FBRCxFQUFVLElBQVYsRUFBZ0IsS0FBaEIsQ0FBQTtBQUVMLFFBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsQ0FBQSxFQUFBLENBQUEsRUFBQSxDQUFBLEVBQUEsQ0FBQSxFQUFBLEtB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Q0FBQSxHQUFJLElBQUksQ0FBQyxLQUFMLENBQUEsRUFOSDtTQVZUOztJQWhDSjtJQWtEQSxJQUFHLENBQUEsSUFBTSxDQUFJLENBQWI7TUFDSSxNQUFBLEdBQVMsTUFBTSxDQUFDLE1BQVAsQ0FBYyxDQUFDLENBQUQsQ0FBZCxFQUFtQixJQUFuQixFQURiOztJQUVBLElBQUcsQ0FBQSxJQUFNLENBQUksQ0FBYjtNQUNJLE1BQUEsR0FBUyxNQUFNLENBQUMsTUFBUCxDQUFjLENBQUMsQ0FBRCxDQUFkLEVBQW1CLElBQW5CLEVBRGI7O1dBRUE7RUE1REk7O0VBOERSLE1BQU0sQ0FBQyxPQUFQLEdBQ0k7SUFBQSxNQUFBLEVBQVksTUFBWjtJQUNBLE1BQUEsRUFBWSxNQURaO0lBRUEsT0FBQSxFQUFZLE9BRlo7SUFHQSxVQUFBLEVBQVksVUFIWjtJQUlBLEtBQUEsRUFBWTtFQUpaO0FBaFJKIiwic291cmNlc0NvbnRlbnQiOlsiIyMjXHJcbjAwICAgICAwMCAgIDAwMDAwMDAgICAwMDAwMDAwMDAgICAwMDAwMDAwICAwMDAgICAwMDAgIDAwMDAwMDAwIFxyXG4wMDAgICAwMDAgIDAwMCAgIDAwMCAgICAgMDAwICAgICAwMDAgICAgICAgMDAwICAgMDAwICAwMDAgICAwMDBcclxuMDAwMDAwMDAwICAwMDAwMDAwMDAgICAgIDAwMCAgICAgMDAwICAgICAgIDAwMDAwMDAwMCAgMDAwMDAwMCAgXHJcbjAwMCAwIDAwMCAgMDAwICAgMDAwICAgICAwMDAgICAgIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAgIDAwMFxyXG4wMDAgICAwMDAgIDAwMCAgIDAwMCAgICAgMDAwICAgICAgMDAwMDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDBcclxuIyMjXHJcblxyXG57IGVtcHR5LCBsYXN0LCBzdHIsIF8gfSA9IHJlcXVpcmUgJy4va3hrJ1xyXG5cclxuIyAgMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAgICAwMDAgIDAwMDAwMDAwICAwMDAgICAwMDAwMDAwIFxyXG4jIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMDAgIDAwMCAgMDAwICAgICAgIDAwMCAgMDAwICAgICAgXHJcbiMgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwIDAgMDAwICAwMDAwMDAgICAgMDAwICAwMDAgIDAwMDBcclxuIyAwMDAgICAgICAgMDAwICAgMDAwICAwMDAgIDAwMDAgIDAwMCAgICAgICAwMDAgIDAwMCAgIDAwMFxyXG4jICAwMDAwMDAwICAgMDAwMDAwMCAgIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMCAgIDAwMDAwMDAgXHJcblxyXG4jIGNvbnZlcnQgdGhlIHBhdHRlcm5zIG9iamVjdCB0byBhIGxpc3Qgb2YgW1JlZ0V4cChrZXkpLCB2YWx1ZV0gcGFpcnNcclxuXHJcbmNvbmZpZyA9IChwYXR0ZXJucywgZmxhZ3MpIC0+ICggW25ldyBSZWdFeHAocCwgZmxhZ3MpLCBhXSBmb3IgcCxhIG9mIHBhdHRlcm5zIClcclxuXHJcbnNvcnRSYW5nZXMgPSAocmdzKSAtPlxyXG4gICAgXHJcbiAgICByZ3Muc29ydCAoYSxiKSAtPlxyXG4gICAgICAgIGlmIGEuc3RhcnQgPT0gYi5zdGFydFxyXG4gICAgICAgICAgICBhLmluZGV4IC0gYi5pbmRleFxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgYS5zdGFydCAtIGIuc3RhcnRcclxuXHJcbiMgMDAwMDAwMDAgICAgMDAwMDAwMCAgIDAwMCAgIDAwMCAgIDAwMDAwMDAgICAwMDAwMDAwMCAgIDAwMDAwMDBcclxuIyAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwMCAgMDAwICAwMDAgICAgICAgIDAwMCAgICAgICAwMDAgICAgIFxyXG4jIDAwMDAwMDAgICAgMDAwMDAwMDAwICAwMDAgMCAwMDAgIDAwMCAgMDAwMCAgMDAwMDAwMCAgIDAwMDAwMDAgXHJcbiMgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgMDAwMCAgMDAwICAgMDAwICAwMDAgICAgICAgICAgICAwMDBcclxuIyAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAgMDAwMDAwMCAgIDAwMDAwMDAwICAwMDAwMDAwIFxyXG5cclxuIyBhY2NlcHRzIGEgbGlzdCBvZiBbcmVnZXhwLCB2YWx1ZShzKV0gcGFpcnMgYW5kIGEgc3RyaW5nXHJcbiMgcmV0dXJucyBhIGxpc3Qgb2Ygb2JqZWN0cyB3aXRoIGluZm9ybWF0aW9uIGFib3V0IHRoZSBtYXRjaGVzOlxyXG4gIFxyXG4jICAgICBtYXRjaDogdGhlIG1hdGNoZWQgc3Vic3RyaW5nXHJcbiMgICAgIHN0YXJ0OiBwb3NpdGlvbiBvZiBtYXRjaCBpbiBzdHJcclxuIyAgICAgdmFsdWU6IHRoZSB2YWx1ZSBmb3IgdGhlIG1hdGNoXHJcbiMgICAgIGluZGV4OiBpbmRleCBvZiB0aGUgcmVnZXhwXHJcbiAgICBcclxuIyAgICAgdGhlIG9iamVjdHMgYXJlIHNvcnRlZCBieSBzdGFydCBhbmQgaW5kZXhcclxuICAgICAgXHJcbiMgICAgIGlmIHRoZSByZWdleHAgaGFzIGNhcHR1cmUgZ3JvdXBzIHRoZW4gXHJcbiMgICAgICAgICB0aGUgdmFsdWUgZm9yIHRoZSBtYXRjaCBvZiB0aGUgbnRoIGdyb3VwIGlzXHJcbiMgICAgICAgICAgICAgdGhlIG50aCBpdGVtIG9mIHZhbHVlcyhzKSBpZiB2YWx1ZShzKSBpcyBhbiBhcnJheVxyXG4jICAgICAgICAgICAgIHRoZSBudGggW2tleSwgdmFsdWVdIHBhaXIgaWYgdmFsdWUocykgaXMgYW4gb2JqZWN0XHJcblxyXG5yYW5nZXMgPSAocmVnZXhlcywgdGV4dCwgZmxhZ3MpIC0+XHJcbiAgICBcclxuICAgIGlmIG5vdCBfLmlzQXJyYXkgcmVnZXhlc1xyXG4gICAgICAgIGlmIF8uaXNTdHJpbmcgcmVnZXhlc1xyXG4gICAgICAgICAgICBpZiByZWdleGVzLmluZGV4T2YoJ3wnKSA+PSAwXHJcbiAgICAgICAgICAgICAgICByZWdleGVzID0gKFtuZXcgUmVnRXhwKHIsIGZsYWdzKSwgJ2ZvdW5kJ10gZm9yIHIgaW4gcmVnZXhlcy5zcGxpdCgnfCcpKVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICByZWdleGVzID0gW1tuZXcgUmVnRXhwKHJlZ2V4ZXMsIGZsYWdzKSwgJ2ZvdW5kJ11dXHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICByZWdleGVzID0gW1tyZWdleGVzLCAnZm91bmQnXV1cclxuICAgIGVsc2UgaWYgbm90IF8uaXNBcnJheSByZWdleGVzWzBdXHJcbiAgICAgICAgcmVnZXhlcyA9IFtyZWdleGVzXVxyXG5cclxuICAgIHJncyA9IFtdXHJcbiAgICByZXR1cm4gcmdzIGlmIG5vdCB0ZXh0P1xyXG4gICAgXHJcbiAgICBmb3IgciBpbiBbMC4uLnJlZ2V4ZXMubGVuZ3RoXVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJlZyA9IHJlZ2V4ZXNbcl1bMF1cclxuICAgICAgICBcclxuICAgICAgICBpZiBub3QgcmVnPyBvciBub3QgcmVnLmV4ZWM/XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IgJ25vIHJlZz8nLCByZWdleGVzLCB0ZXh0LCBmbGFnc1xyXG4gICAgICAgICAgICByZXR1cm4gcmdzXHJcbiAgICAgICAgXHJcbiAgICAgICAgYXJnID0gcmVnZXhlc1tyXVsxXVxyXG4gICAgICAgIGkgPSAwXHJcbiAgICAgICAgcyA9IHRleHRcclxuXHJcbiAgICAgICAgd2hpbGUgcy5sZW5ndGhcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIG1hdGNoID0gcmVnLmV4ZWMgc1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgYnJlYWsgaWYgbm90IG1hdGNoP1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgbWF0Y2gubGVuZ3RoID09IDFcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgbWF0Y2hbMF0ubGVuZ3RoID4gMFxyXG4gICAgICAgICAgICAgICAgICAgIHJncy5wdXNoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0OiBtYXRjaC5pbmRleCArIGlcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2g6IG1hdGNoWzBdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBhcmdcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IHJcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGkgKz0gbWF0Y2guaW5kZXggKyBNYXRoLm1heCAxLCBtYXRjaFswXS5sZW5ndGhcclxuICAgICAgICAgICAgICAgIHMgPSB0ZXh0LnNsaWNlIGlcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGdzID0gMFxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBmb3IgaiBpbiBbMC4ubWF0Y2gubGVuZ3RoLTJdXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBhcmdcclxuICAgICAgICAgICAgICAgICAgICBpZiBfLmlzQXJyYXkodmFsdWUpIGFuZCBqIDwgdmFsdWUubGVuZ3RoIHRoZW4gdmFsdWUgPSB2YWx1ZVtqXVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgXy5pc09iamVjdCh2YWx1ZSkgYW5kIGogPCBfLnNpemUodmFsdWUpIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IFtfLmtleXModmFsdWUpW2pdLCB2YWx1ZVtfLmtleXModmFsdWUpW2pdXV1cclxuICAgICAgICAgICAgICAgICAgICBicmVhayBpZiBub3QgbWF0Y2hbaisxXT9cclxuICAgICAgICAgICAgICAgICAgICBnaSA9IG1hdGNoWzBdLnNsaWNlKGdzKS5pbmRleE9mIG1hdGNoW2orMV1cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICByZ3MucHVzaFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydDogbWF0Y2guaW5kZXggKyBpICsgZ3MgKyBnaVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRjaDogbWF0Y2hbaisxXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IHJcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgZ3MgKz0gbWF0Y2hbaisxXS5sZW5ndGhcclxuICAgICAgICAgICAgICAgIGkgKz0gbWF0Y2guaW5kZXggKyBtYXRjaFswXS5sZW5ndGhcclxuICAgICAgICAgICAgICAgIHMgPSB0ZXh0LnNsaWNlIGlcclxuXHJcbiAgICBzb3J0UmFuZ2VzIHJncyAgICAgICAgXHJcblxyXG4jIDAwMDAwMDAgICAgMDAwICAgMDAwMDAwMCAgIDAwMDAwMDAgIDAwMDAwMDAwICAgMDAwMDAwMCAgMDAwMDAwMDAwXHJcbiMgMDAwICAgMDAwICAwMDAgIDAwMCAgICAgICAwMDAgICAgICAgMDAwICAgICAgIDAwMCAgICAgICAgICAwMDAgICBcclxuIyAwMDAgICAwMDAgIDAwMCAgMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAwMDAwICAgMDAwICAgICAgICAgIDAwMCAgIFxyXG4jIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMCAgICAgICAwMDAgIDAwMCAgICAgICAwMDAgICAgICAgICAgMDAwICAgXHJcbiMgMDAwMDAwMCAgICAwMDAgIDAwMDAwMDAgICAwMDAwMDAwICAgMDAwMDAwMDAgICAwMDAwMDAwICAgICAwMDAgICBcclxuIFxyXG4jIGFjY2VwdHMgYSBsaXN0IG9mIHJhbmdlc1xyXG4jIHJldHVybnMgYSBsaXN0IG9mIG9iamVjdHM6XHJcbiBcclxuIyAgICAgbWF0Y2g6IHRoZSBtYXRjaGVkIHN1YnN0cmluZ1xyXG4jICAgICBzdGFydDogcG9zaXRpb24gb2YgbWF0Y2ggaW4gc3RyXHJcbiMgICAgIGNsc3M6ICBzdHJpbmcgb2YgY2xhc3NuYW1lcyBqb2luZWQgd2l0aCBhIHNwYWNlXHJcbiAgICAgXHJcbiMgICAgIHdpdGggbm9uZSBvZiB0aGUgW3N0YXJ0LCBzdGFydCttYXRjaC5sZW5ndGhdIHJhbmdlcyBvdmVybGFwcGluZ1xyXG5cclxuZGlzc2VjdCA9IChyYW5nZXMsIG9wdCA9IGpvaW46ZmFsc2UpIC0+IFxyXG4gICAgXHJcbiAgICAjIGxvZyA9IG9wdD8ubG9nID8gLT5cclxuICAgICAgICBcclxuICAgIHJldHVybiBbXSBpZiBub3QgcmFuZ2VzLmxlbmd0aFxyXG4gICAgIyBjb25zb2xlLmxvZyBcImRpc3NlY3QgLS0gI3tKU09OLnN0cmluZ2lmeSByYW5nZXN9XCJcclxuICAgIFxyXG4gICAgZGkgPSBbXSAjIGNvbGxlY3QgYSBsaXN0IG9mIHBvc2l0aW9ucyB3aGVyZSBhIG1hdGNoIHN0YXJ0cyBvciBlbmRzXHJcbiAgICBmb3IgcmcgaW4gcmFuZ2VzXHJcbiAgICAgICAgZGkucHVzaCBbcmcuc3RhcnQsIHJnLmluZGV4XVxyXG4gICAgICAgIGRpLnB1c2ggW3JnLnN0YXJ0ICsgcmcubWF0Y2gubGVuZ3RoLCByZy5pbmRleF1cclxuICAgICAgICBcclxuICAgIGRpLnNvcnQgKGEsYikgLT4gIyBzb3J0IHRoZSBzdGFydC9lbmQgcG9zaXRpb25zIGJ5IHggb3IgaW5kZXhcclxuICAgICAgICBpZiBhWzBdPT1iWzBdIFxyXG4gICAgICAgICAgICBhWzFdLWJbMV1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIGFbMF0tYlswXVxyXG4gICAgICAgICAgICBcclxuICAgIGQgPSBbXSBcclxuICAgIHNpID0gLTFcclxuXHJcbiAgICBmb3IgZHBzIGluIGRpICAgICAgICAgICMgY3JlYXRlIGEgbGlzdCBvZiBkdW1teSByYW5nZXMgXHJcbiAgICAgICAgaWYgZHBzWzBdID4gc2kgICAgICMgb25lIHJhbmdlIGZvciBlYWNoIHBvc2l0aW9uXHJcbiAgICAgICAgICAgIHNpID0gZHBzWzBdXHJcbiAgICAgICAgICAgIGQucHVzaFxyXG4gICAgICAgICAgICAgICAgc3RhcnQ6IHNpXHJcbiAgICAgICAgICAgICAgICBjbHM6ICAgW11cclxuXHJcbiAgICBwID0gMFxyXG4gICAgZm9yIHJpIGluIFswLi4ucmFuZ2VzLmxlbmd0aF1cclxuICAgICAgICByZyA9IHJhbmdlc1tyaV1cclxuICAgICAgICB3aGlsZSBkW3BdLnN0YXJ0IDwgcmcuc3RhcnQgXHJcbiAgICAgICAgICAgIHAgKz0gMSBcclxuICAgICAgICBwbiA9IHBcclxuICAgICAgICB3aGlsZSBkW3BuXS5zdGFydCA8IHJnLnN0YXJ0K3JnLm1hdGNoLmxlbmd0aFxyXG4gICAgICAgICAgICBpZiByZy52YWx1ZT9cclxuICAgICAgICAgICAgICAgIGlmIG5vdCByZy52YWx1ZS5zcGxpdD9cclxuICAgICAgICAgICAgICAgICAgICBmb3IgciBpbiByZy52YWx1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZSBpZiBub3Qgci5zcGxpdD9cclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGMgaW4gci5zcGxpdCAnLicgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkW3BuXS5jbHMucHVzaCBjIGlmIGRbcG5dLmNscy5pbmRleE9mKGMpIDwgMFxyXG4gICAgICAgICAgICAgICAgZWxzZSBcclxuICAgICAgICAgICAgICAgICAgICBmb3IgYyBpbiByZy52YWx1ZS5zcGxpdCAnLicgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRbcG5dLmNscy5wdXNoIGMgaWYgZFtwbl0uY2xzLmluZGV4T2YoYykgPCAwXHJcbiAgICAgICAgICAgIGlmIHBuKzEgPCBkLmxlbmd0aFxyXG4gICAgICAgICAgICAgICAgaWYgbm90IGRbcG5dLm1hdGNoXHJcbiAgICAgICAgICAgICAgICAgICAgZFtwbl0ubWF0Y2ggPSByZy5tYXRjaC5zdWJzdHIgZFtwbl0uc3RhcnQtcmcuc3RhcnQsIGRbcG4rMV0uc3RhcnQtZFtwbl0uc3RhcnRcclxuICAgICAgICAgICAgICAgIHBuICs9IDFcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgaWYgbm90IGRbcG5dLm1hdGNoXHJcbiAgICAgICAgICAgICAgICAgICAgZFtwbl0ubWF0Y2ggPSByZy5tYXRjaC5zdWJzdHIgZFtwbl0uc3RhcnQtcmcuc3RhcnRcclxuICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgICAgICBcclxuICAgIGQgPSBkLmZpbHRlciAoaSkgLT4gaS5tYXRjaD8udHJpbSgpLmxlbmd0aFxyXG4gICAgXHJcbiAgICBmb3IgaSBpbiBkXHJcbiAgICAgICAgaS5jbHNzID0gaS5jbHMuam9pbiAnICdcclxuICAgICAgICBkZWxldGUgaS5jbHNcclxuICAgICAgICBcclxuICAgIGlmIGQubGVuZ3RoID4gMVxyXG4gICAgICAgIGZvciBpIGluIFtkLmxlbmd0aC0yLi4wXVxyXG4gICAgICAgICAgICBpZiBkW2ldLnN0YXJ0ICsgZFtpXS5tYXRjaC5sZW5ndGggPT0gZFtpKzFdLnN0YXJ0XHJcbiAgICAgICAgICAgICAgICBpZiBkW2ldLmNsc3MgPT0gZFtpKzFdLmNsc3NcclxuICAgICAgICAgICAgICAgICAgICBkW2ldLm1hdGNoICs9IGRbaSsxXS5tYXRjaFxyXG4gICAgICAgICAgICAgICAgICAgIGQuc3BsaWNlIGkrMSwgMVxyXG4gICAgZFxyXG5cclxuIyAwMCAgICAgMDAgIDAwMDAwMDAwICAwMDAwMDAwMCAgICAwMDAwMDAwICAgMDAwMDAwMDAgIFxyXG4jIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgICAgICAwMDAgICAgICAgXHJcbiMgMDAwMDAwMDAwICAwMDAwMDAwICAgMDAwMDAwMCAgICAwMDAgIDAwMDAgIDAwMDAwMDAgICBcclxuIyAwMDAgMCAwMDAgIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgIFxyXG4jIDAwMCAgIDAwMCAgMDAwMDAwMDAgIDAwMCAgIDAwMCAgIDAwMDAwMDAgICAwMDAwMDAwMCAgXHJcbiBcclxuIyBtZXJnZXMgdHdvIHNvcnRlZCBsaXN0cyBvZiBkaXNzZWN0aW9uc1xyXG4gICAgXHJcbm1lcmdlID0gKGRzc0EsIGRzc0IpIC0+XHJcbiAgICBcclxuICAgIHJlc3VsdCA9IFtdXHJcbiAgICBBID0gZHNzQS5zaGlmdCgpXHJcbiAgICBCID0gZHNzQi5zaGlmdCgpXHJcbiAgICBcclxuICAgIHdoaWxlIEEgYW5kIEJcclxuXHJcbiAgICAgICAgaWYgQS5zdGFydCtBLm1hdGNoLmxlbmd0aCA8IEIuc3RhcnRcclxuICAgICAgICAgICAgcmVzdWx0LnB1c2ggQVxyXG4gICAgICAgICAgICBBID0gZHNzQS5zaGlmdCgpXHJcbiAgICAgICAgICAgIGNvbnRpbnVlXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIGlmIEIuc3RhcnQrQi5tYXRjaC5sZW5ndGggPCBBLnN0YXJ0XHJcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoIEJcclxuICAgICAgICAgICAgQiA9IGRzc0Iuc2hpZnQoKVxyXG4gICAgICAgICAgICBjb250aW51ZVxyXG4gICAgICAgICAgICBcclxuICAgICAgICBpZiBBLnN0YXJ0IDwgQi5zdGFydFxyXG4gICAgICAgICAgICBkID0gQi5zdGFydC1BLnN0YXJ0XHJcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoXHJcbiAgICAgICAgICAgICAgICBzdGFydDogQS5zdGFydFxyXG4gICAgICAgICAgICAgICAgY2xzczogIEEuY2xzc1xyXG4gICAgICAgICAgICAgICAgbWF0Y2g6IEEubWF0Y2guc2xpY2UgMCwgZFxyXG4gICAgICAgICAgICBBLnN0YXJ0ICs9IGRcclxuICAgICAgICAgICAgQS5tYXRjaCA9IEEubWF0Y2guc2xpY2UgZFxyXG4gICAgICAgICAgICBjb250aW51ZVxyXG4gICAgICAgICAgICBcclxuICAgICAgICBpZiBCLnN0YXJ0IDwgQS5zdGFydFxyXG4gICAgICAgICAgICBkID0gQS5zdGFydC1CLnN0YXJ0XHJcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoXHJcbiAgICAgICAgICAgICAgICBzdGFydDogQi5zdGFydFxyXG4gICAgICAgICAgICAgICAgY2xzczogIEIuY2xzc1xyXG4gICAgICAgICAgICAgICAgbWF0Y2g6IEIubWF0Y2guc2xpY2UgMCwgZFxyXG4gICAgICAgICAgICBCLnN0YXJ0ICs9IGRcclxuICAgICAgICAgICAgQi5tYXRjaCA9IEIubWF0Y2guc2xpY2UgZFxyXG4gICAgICAgICAgICBjb250aW51ZVxyXG4gICAgICAgICAgICBcclxuICAgICAgICBpZiBBLnN0YXJ0ID09IEIuc3RhcnRcclxuICAgICAgICAgICAgZCA9IEEubWF0Y2gubGVuZ3RoIC0gQi5tYXRjaC5sZW5ndGhcclxuICAgICAgICAgICAgcmVzdWx0LnB1c2hcclxuICAgICAgICAgICAgICAgIHN0YXJ0OiBBLnN0YXJ0XHJcbiAgICAgICAgICAgICAgICBjbHNzOiAgQS5jbHNzICsgXCIgXCIgKyBCLmNsc3NcclxuICAgICAgICAgICAgICAgIG1hdGNoOiBkID49IDAgYW5kIEIubWF0Y2ggb3IgQS5tYXRjaFxyXG4gICAgICAgICAgICBpZiBkID4gMFxyXG4gICAgICAgICAgICAgICAgQS5tYXRjaCA9IEEubWF0Y2guc2xpY2UgQi5tYXRjaC5sZW5ndGhcclxuICAgICAgICAgICAgICAgIEEuc3RhcnQgKz0gQi5tYXRjaC5sZW5ndGhcclxuICAgICAgICAgICAgICAgIEIgPSBkc3NCLnNoaWZ0KClcclxuICAgICAgICAgICAgZWxzZSBpZiBkIDwgMFxyXG4gICAgICAgICAgICAgICAgQi5tYXRjaCA9IEIubWF0Y2guc2xpY2UgQS5tYXRjaC5sZW5ndGhcclxuICAgICAgICAgICAgICAgIEIuc3RhcnQgKz0gQS5tYXRjaC5sZW5ndGhcclxuICAgICAgICAgICAgICAgIEEgPSBkc3NBLnNoaWZ0KClcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgQSA9IGRzc0Euc2hpZnQoKVxyXG4gICAgICAgICAgICAgICAgQiA9IGRzc0Iuc2hpZnQoKVxyXG4gICAgICAgIFxyXG4gICAgaWYgQiBhbmQgbm90IEFcclxuICAgICAgICByZXN1bHQgPSByZXN1bHQuY29uY2F0IFtCXSwgZHNzQiBcclxuICAgIGlmIEEgYW5kIG5vdCBCXHJcbiAgICAgICAgcmVzdWx0ID0gcmVzdWx0LmNvbmNhdCBbQV0sIGRzc0EgXHJcbiAgICByZXN1bHRcclxuICAgIFxyXG5tb2R1bGUuZXhwb3J0cyA9IFxyXG4gICAgY29uZmlnOiAgICAgY29uZmlnXHJcbiAgICByYW5nZXM6ICAgICByYW5nZXNcclxuICAgIGRpc3NlY3Q6ICAgIGRpc3NlY3RcclxuICAgIHNvcnRSYW5nZXM6IHNvcnRSYW5nZXNcclxuICAgIG1lcmdlOiAgICAgIG1lcmdlXHJcbiJdfQ==
//# sourceURL=C:/Users/t.kohnhorst/s/kxk/coffee/matchr.coffee