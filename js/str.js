// koffee 0.50.0

/*
 0000000  000000000  00000000 
000          000     000   000
0000000      000     0000000  
     000     000     000   000
0000000      000     000   000
 */
var ESCAPEREGEXP, STRIPANSI, str;

str = function(o) {
    var noon;
    if (o == null) {
        return 'null';
    }
    if (typeof o === 'object') {
        if (o._str != null) {
            return o._str();
        } else {
            noon = require('noon');
            return "\n" + noon.stringify(o, {
                circular: true
            });
        }
    } else {
        return String(o);
    }
};


/*
00000000  000   000   0000000   0000000   0000000    00000000
000       0000  000  000       000   000  000   000  000     
0000000   000 0 000  000       000   000  000   000  0000000 
000       000  0000  000       000   000  000   000  000     
00000000  000   000   0000000   0000000   0000000    00000000
 */

str.encode = function(s, spaces) {
    var entity, r, xmlEntities;
    if (spaces == null) {
        spaces = true;
    }
    entity = require('html-entities');
    xmlEntities = new entity.XmlEntities();
    if (s) {
        r = xmlEntities.encode(s);
        if (spaces) {
            r = r.replace(/\s/g, '&nbsp;');
        }
        return r;
    } else {
        return '';
    }
};

ESCAPEREGEXP = /[-\\^$*+?.()|[\]{}\/]/g;

str.escapeRegexp = function(s) {
    return s.replace(ESCAPEREGEXP, '\\$&');
};

STRIPANSI = /\x1B[[(?);]{0,2}(;?\d)*./g;

str.stripAnsi = function(s) {
    return s.replace(STRIPANSI, '');
};

str.lpad = function(s, l) {
    s = String(s);
    while (s.length < l) {
        s = ' ' + s;
    }
    return s;
};

str.rpad = function(s, l) {
    s = String(s);
    while (s.length < l) {
        s += ' ';
    }
    return s;
};

str.replaceTabs = function(s) {
    var i;
    i = 0;
    while (i < s.length) {
        if (s[i] === '\t') {
            s = s.splice(i, 1, str.lpad('', 4 - (i % 4)));
        }
        i += 1;
    }
    return s;
};

str.time = function(t) {
    var f, j, len, ref, u;
    if (typeof t === 'bigint') {
        f = 1000n;
        ref = ['ns', 'Î¼s', 'ms', 's'];
        for (j = 0, len = ref.length; j < len; j++) {
            u = ref[j];
            if (u === 's' || t < f) {
                return '' + (1000n * t / f) + u;
            }
            f *= 1000n;
        }
    } else {
        return require('pretty-time')(t);
    }
};

str.ansi2html = function(s) {
    var AnsiDiss;
    AnsiDiss = require('./ansidiss');
    return AnsiDiss.ansi2html(s);
};

module.exports = str;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RyLmpzIiwic291cmNlUm9vdCI6Ii4iLCJzb3VyY2VzIjpbIiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBOzs7Ozs7O0FBQUEsSUFBQTs7QUFRQSxHQUFBLEdBQU0sU0FBQyxDQUFEO0FBQ0YsUUFBQTtJQUFBLElBQXFCLFNBQXJCO0FBQUEsZUFBTyxPQUFQOztJQUNBLElBQUcsT0FBTyxDQUFQLEtBQWEsUUFBaEI7UUFDSSxJQUFHLGNBQUg7bUJBQ0ksQ0FBQyxDQUFDLElBQUYsQ0FBQSxFQURKO1NBQUEsTUFBQTtZQUdJLElBQUEsR0FBTyxPQUFBLENBQVEsTUFBUjttQkFDUCxJQUFBLEdBQU8sSUFBSSxDQUFDLFNBQUwsQ0FBZSxDQUFmLEVBQWtCO2dCQUFBLFFBQUEsRUFBVSxJQUFWO2FBQWxCLEVBSlg7U0FESjtLQUFBLE1BQUE7ZUFPSSxNQUFBLENBQU8sQ0FBUCxFQVBKOztBQUZFOzs7QUFXTjs7Ozs7Ozs7QUFRQSxHQUFHLENBQUMsTUFBSixHQUFhLFNBQUMsQ0FBRCxFQUFJLE1BQUo7QUFFVCxRQUFBOztRQUZhLFNBQU87O0lBRXBCLE1BQUEsR0FBUyxPQUFBLENBQVEsZUFBUjtJQUNULFdBQUEsR0FBYyxJQUFJLE1BQU0sQ0FBQyxXQUFYLENBQUE7SUFFZCxJQUFHLENBQUg7UUFDSSxDQUFBLEdBQUksV0FBVyxDQUFDLE1BQVosQ0FBbUIsQ0FBbkI7UUFDSixJQUFHLE1BQUg7WUFDSSxDQUFBLEdBQUksQ0FBQyxDQUFDLE9BQUYsQ0FBVSxLQUFWLEVBQWlCLFFBQWpCLEVBRFI7O2VBRUEsRUFKSjtLQUFBLE1BQUE7ZUFNSSxHQU5KOztBQUxTOztBQWNiLFlBQUEsR0FBZTs7QUFDZixHQUFHLENBQUMsWUFBSixHQUFtQixTQUFDLENBQUQ7V0FDZixDQUFDLENBQUMsT0FBRixDQUFVLFlBQVYsRUFBd0IsTUFBeEI7QUFEZTs7QUFHbkIsU0FBQSxHQUFZOztBQUNaLEdBQUcsQ0FBQyxTQUFKLEdBQWdCLFNBQUMsQ0FBRDtXQUNaLENBQUMsQ0FBQyxPQUFGLENBQVUsU0FBVixFQUFxQixFQUFyQjtBQURZOztBQUdoQixHQUFHLENBQUMsSUFBSixHQUFXLFNBQUMsQ0FBRCxFQUFJLENBQUo7SUFDUCxDQUFBLEdBQUksTUFBQSxDQUFPLENBQVA7QUFDSixXQUFNLENBQUMsQ0FBQyxNQUFGLEdBQVcsQ0FBakI7UUFBd0IsQ0FBQSxHQUFJLEdBQUEsR0FBTTtJQUFsQztXQUNBO0FBSE87O0FBS1gsR0FBRyxDQUFDLElBQUosR0FBVyxTQUFDLENBQUQsRUFBSSxDQUFKO0lBQ1AsQ0FBQSxHQUFJLE1BQUEsQ0FBTyxDQUFQO0FBQ0osV0FBTSxDQUFDLENBQUMsTUFBRixHQUFXLENBQWpCO1FBQXdCLENBQUEsSUFBSztJQUE3QjtXQUNBO0FBSE87O0FBS1gsR0FBRyxDQUFDLFdBQUosR0FBa0IsU0FBQyxDQUFEO0FBQ2QsUUFBQTtJQUFBLENBQUEsR0FBSTtBQUNKLFdBQU0sQ0FBQSxHQUFJLENBQUMsQ0FBQyxNQUFaO1FBQ0ksSUFBRyxDQUFFLENBQUEsQ0FBQSxDQUFGLEtBQVEsSUFBWDtZQUNJLENBQUEsR0FBSSxDQUFDLENBQUMsTUFBRixDQUFTLENBQVQsRUFBWSxDQUFaLEVBQWUsR0FBRyxDQUFDLElBQUosQ0FBUyxFQUFULEVBQWEsQ0FBQSxHQUFFLENBQUMsQ0FBQSxHQUFFLENBQUgsQ0FBZixDQUFmLEVBRFI7O1FBRUEsQ0FBQSxJQUFLO0lBSFQ7V0FJQTtBQU5jOztBQVFsQixHQUFHLENBQUMsSUFBSixHQUFXLFNBQUMsQ0FBRDtBQUNQLFFBQUE7SUFBQSxJQUFHLE9BQU8sQ0FBUCxLQUFhLFFBQWhCO1FBQ0ksQ0FBQSxHQUFJO0FBQ0o7QUFBQSxhQUFBLHFDQUFBOztZQUNJLElBQUcsQ0FBQSxLQUFLLEdBQUwsSUFBWSxDQUFBLEdBQUksQ0FBbkI7QUFDSSx1QkFBTyxFQUFBLEdBQUssQ0FBQyxLQUFBLEdBQVEsQ0FBUixHQUFZLENBQWIsQ0FBTCxHQUF1QixFQURsQzs7WUFFQSxDQUFBLElBQUs7QUFIVCxTQUZKO0tBQUEsTUFBQTtlQU9JLE9BQUEsQ0FBUSxhQUFSLENBQUEsQ0FBdUIsQ0FBdkIsRUFQSjs7QUFETzs7QUFVWCxHQUFHLENBQUMsU0FBSixHQUFnQixTQUFDLENBQUQ7QUFDWixRQUFBO0lBQUEsUUFBQSxHQUFXLE9BQUEsQ0FBUSxZQUFSO1dBQ1gsUUFBUSxDQUFDLFNBQVQsQ0FBbUIsQ0FBbkI7QUFGWTs7QUFJaEIsTUFBTSxDQUFDLE9BQVAsR0FBaUIiLCJzb3VyY2VzQ29udGVudCI6WyIjIyNcbiAwMDAwMDAwICAwMDAwMDAwMDAgIDAwMDAwMDAwIFxuMDAwICAgICAgICAgIDAwMCAgICAgMDAwICAgMDAwXG4wMDAwMDAwICAgICAgMDAwICAgICAwMDAwMDAwICBcbiAgICAgMDAwICAgICAwMDAgICAgIDAwMCAgIDAwMFxuMDAwMDAwMCAgICAgIDAwMCAgICAgMDAwICAgMDAwXG4jIyNcblxuc3RyID0gKG8pIC0+XG4gICAgcmV0dXJuICdudWxsJyBpZiBub3Qgbz9cbiAgICBpZiB0eXBlb2YobykgPT0gJ29iamVjdCdcbiAgICAgICAgaWYgby5fc3RyP1xuICAgICAgICAgICAgby5fc3RyKClcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgbm9vbiA9IHJlcXVpcmUgJ25vb24nXG4gICAgICAgICAgICBcIlxcblwiICsgbm9vbi5zdHJpbmdpZnkgbywgY2lyY3VsYXI6IHRydWVcbiAgICBlbHNlXG4gICAgICAgIFN0cmluZyBvXG5cbiMjI1xuMDAwMDAwMDAgIDAwMCAgIDAwMCAgIDAwMDAwMDAgICAwMDAwMDAwICAgMDAwMDAwMCAgICAwMDAwMDAwMFxuMDAwICAgICAgIDAwMDAgIDAwMCAgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAgIFxuMDAwMDAwMCAgIDAwMCAwIDAwMCAgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAwMDAwIFxuMDAwICAgICAgIDAwMCAgMDAwMCAgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAgIFxuMDAwMDAwMDAgIDAwMCAgIDAwMCAgIDAwMDAwMDAgICAwMDAwMDAwICAgMDAwMDAwMCAgICAwMDAwMDAwMFxuIyMjXG5cbnN0ci5lbmNvZGUgPSAocywgc3BhY2VzPXRydWUpIC0+XG4gICAgXG4gICAgZW50aXR5ID0gcmVxdWlyZSAnaHRtbC1lbnRpdGllcydcbiAgICB4bWxFbnRpdGllcyA9IG5ldyBlbnRpdHkuWG1sRW50aXRpZXMoKVxuICAgIFxuICAgIGlmIHNcbiAgICAgICAgciA9IHhtbEVudGl0aWVzLmVuY29kZSBzXG4gICAgICAgIGlmIHNwYWNlc1xuICAgICAgICAgICAgciA9IHIucmVwbGFjZSAvXFxzL2csICcmbmJzcDsnXG4gICAgICAgIHJcbiAgICBlbHNlXG4gICAgICAgICcnXG4gIFxuIyBFU0NBUEVSRUdFWFAgPSAvW1xcXFxeJCorPy4oKXxbXFxde31dL2dcbkVTQ0FQRVJFR0VYUCA9IC9bLVxcXFxeJCorPy4oKXxbXFxde31cXC9dL2dcbnN0ci5lc2NhcGVSZWdleHAgPSAocykgLT5cbiAgICBzLnJlcGxhY2UgRVNDQVBFUkVHRVhQLCAnXFxcXCQmJ1xuICAgICAgICBcblNUUklQQU5TSSA9IC9cXHgxQltbKD8pO117MCwyfSg7P1xcZCkqLi9nXG5zdHIuc3RyaXBBbnNpID0gKHMpIC0+XG4gICAgcy5yZXBsYWNlIFNUUklQQU5TSSwgJydcbiAgICAgICAgXG5zdHIubHBhZCA9IChzLCBsKSAtPlxuICAgIHMgPSBTdHJpbmcgc1xuICAgIHdoaWxlIHMubGVuZ3RoIDwgbCB0aGVuIHMgPSAnICcgKyBzXG4gICAgc1xuXG5zdHIucnBhZCA9IChzLCBsKSAtPlxuICAgIHMgPSBTdHJpbmcgc1xuICAgIHdoaWxlIHMubGVuZ3RoIDwgbCB0aGVuIHMgKz0gJyAnXG4gICAgc1xuICAgIFxuc3RyLnJlcGxhY2VUYWJzID0gKHMpIC0+XG4gICAgaSA9IDBcbiAgICB3aGlsZSBpIDwgcy5sZW5ndGhcbiAgICAgICAgaWYgc1tpXSA9PSAnXFx0J1xuICAgICAgICAgICAgcyA9IHMuc3BsaWNlIGksIDEsIHN0ci5scGFkICcnLCA0LShpJTQpXG4gICAgICAgIGkgKz0gMVxuICAgIHNcbiAgICBcbnN0ci50aW1lID0gKHQpIC0+XG4gICAgaWYgdHlwZW9mKHQpID09ICdiaWdpbnQnXG4gICAgICAgIGYgPSAxMDAwbiBcbiAgICAgICAgZm9yIHUgaW4gWyducycnzrxzJydtcycncyddIFxuICAgICAgICAgICAgaWYgdSA9PSAncycgb3IgdCA8IGYgXG4gICAgICAgICAgICAgICAgcmV0dXJuICcnICsgKDEwMDBuICogdCAvIGYpICsgdSBcbiAgICAgICAgICAgIGYgKj0gMTAwMG4gICAgXG4gICAgZWxzZVxuICAgICAgICByZXF1aXJlKCdwcmV0dHktdGltZScpIHRcbiAgICAgICAgXG5zdHIuYW5zaTJodG1sID0gKHMpIC0+XG4gICAgQW5zaURpc3MgPSByZXF1aXJlICcuL2Fuc2lkaXNzJ1xuICAgIEFuc2lEaXNzLmFuc2kyaHRtbCBzXG4gICAgICAgIFxubW9kdWxlLmV4cG9ydHMgPSBzdHJcbiJdfQ==
//# sourceURL=../coffee/str.coffee