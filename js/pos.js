// koffee 1.4.0

/*
0000000    0000000    0000000
00   000  000   000  000     
0000000   000   000  0000000 
00        000   000       000
00         0000000   0000000
 */
var Pos, clamp;

clamp = require('./kxk').clamp;

Pos = (function() {
    function Pos(x1, y1) {
        var event, ref;
        this.x = x1;
        this.y = y1;
        if (((ref = this.x) != null ? ref.clientX : void 0) != null) {
            event = this.x;
            if (isNaN(window.scrollX)) {
                this.x = event.clientX + document.documentElement.scrollLeft + document.body.scrollLeft;
                this.y = event.clientY + document.documentElement.scrollTop + document.body.scrollTop;
            } else {
                this.x = event.clientX + window.scrollX + 1;
                this.y = event.clientY + window.scrollY + 1;
            }
        } else if ((this.y == null) && Pos.isPos(this.x)) {
            this.y = this.x.y;
            this.x = this.x.x;
        }
        if (isNaN(this.x)) {
            this.x = 0;
        }
        if (isNaN(this.y)) {
            this.y = 0;
        }
    }

    Pos.prototype.copy = function() {
        return new Pos(this.x, this.y);
    };

    Pos.prototype.plus = function(val) {
        var newPos;
        newPos = this.copy();
        if (val != null) {
            if (!isNaN(val.x)) {
                newPos.x += val.x;
            }
            if (!isNaN(val.y)) {
                newPos.y += val.y;
            }
        }
        return newPos;
    };

    Pos.prototype.minus = function(val) {
        var newPos;
        newPos = this.copy();
        if (val != null) {
            if (!isNaN(val.x)) {
                newPos.x -= val.x;
            }
            if (!isNaN(val.y)) {
                newPos.y -= val.y;
            }
        }
        return newPos;
    };

    Pos.prototype.times = function(val) {
        return this.copy().scale(val);
    };

    Pos.prototype.clamped = function(lower, upper) {
        return this.copy().clamp(lower, upper);
    };

    Pos.prototype.rounded = function(v) {
        if (v == null) {
            v = 1.0;
        }
        return new Pos(Math.round(this.x / v) * v, Math.round(this.y / v) * v);
    };

    Pos.prototype.to = function(other) {
        return other.minus(this);
    };

    Pos.prototype.mid = function(other) {
        return this.plus(other).scale(0.5);
    };

    Pos.prototype.interpolate = function(other, f) {
        return this.plus(this.to(other).scale(f));
    };

    Pos.prototype.min = function(val) {
        var newPos;
        newPos = this.copy();
        if (val == null) {
            return newPos;
        }
        if (!isNaN(val.x) && this.x > val.x) {
            newPos.x = val.x;
        }
        if (!isNaN(val.y) && this.y > val.y) {
            newPos.y = val.y;
        }
        return newPos;
    };

    Pos.prototype.max = function(val) {
        var newPos;
        newPos = this.copy();
        if (val == null) {
            return newPos;
        }
        if (!isNaN(val.x) && this.x < val.x) {
            newPos.x = val.x;
        }
        if (!isNaN(val.y) && this.y < val.y) {
            newPos.y = val.y;
        }
        return newPos;
    };

    Pos.prototype.normal = function() {
        return this.copy().normalize();
    };

    Pos.prototype.neg = function() {
        return this.copy().negate();
    };

    Pos.prototype.length = function() {
        return Math.sqrt(this.square());
    };

    Pos.prototype.dot = function(o) {
        return this.x * o.x + this.y * o.y;
    };

    Pos.prototype.cross = function(o) {
        return this.x * o.y - this.y * o.x;
    };

    Pos.prototype.square = function() {
        return (this.x * this.x) + (this.y * this.y);
    };

    Pos.prototype.distSquare = function(o) {
        return this.minus(o).square();
    };

    Pos.prototype.dist = function(o) {
        return Math.sqrt(this.distSquare(o));
    };

    Pos.prototype.equals = function(o) {
        return this.x === (o != null ? o.x : void 0) && this.y === (o != null ? o.y : void 0);
    };

    Pos.prototype.deg2rad = function(d) {
        return Math.PI * d / 180.0;
    };

    Pos.prototype.rad2deg = function(r) {
        return r * 180.0 / Math.PI;
    };

    Pos.prototype.isClose = function(o, dist) {
        if (dist == null) {
            dist = 0.1;
        }
        return Math.abs(this.x - o.x) + Math.abs(this.y - o.y) < dist;
    };

    Pos.prototype.isZero = function(e) {
        if (e == null) {
            e = 0.000001;
        }
        return Math.abs(this.x) < e && Math.abs(this.y) < e;
    };

    Pos.prototype.angle = function(o) {
        if (o == null) {
            o = new Pos(0, 1);
        }
        return this.rad2deg(Math.acos(this.normal().dot(o.normal())));
    };

    Pos.prototype.perp = function() {
        return new Pos(-this.y, this.x);
    };

    Pos.prototype.rotation = function(o) {
        var d, s;
        d = o.dot(this.perp());
        if (Math.abs(d) < 0.0001) {
            if (this.dot(o) > 0) {
                return 0;
            }
            return 180;
        }
        s = d > 0 && -1 || 1;
        return s * this.angle(o);
    };

    Pos.prototype.check = function() {
        var newPos;
        newPos = this.copy();
        if (isNaN(newPos.x)) {
            newPos.x = 0;
        }
        if (isNaN(newPos.y)) {
            newPos.y = 0;
        }
        return newPos;
    };

    Pos.prototype._str = function() {
        var s;
        s = (this.x != null ? "<x:" + this.x + " " : void 0) || "<NaN ";
        return s += (this.y != null ? "y:" + this.y + ">" : void 0) || "NaN>";
    };

    Pos.isPos = function(o) {
        return (o != null) && (o.x != null) && (o.y != null) && Number.isFinite(o.x) && Number.isFinite(o.y);
    };

    Pos.prototype.fade = function(o, val) {
        this.x = this.x * (1 - val) + o.x * val;
        this.y = this.y * (1 - val) + o.y * val;
        return this;
    };

    Pos.prototype.scale = function(val) {
        this.x *= val;
        this.y *= val;
        return this;
    };

    Pos.prototype.mul = function(other) {
        this.x *= other.x;
        this.y *= other.y;
        return this;
    };

    Pos.prototype.div = function(other) {
        this.x /= other.x;
        this.y /= other.y;
        return this;
    };

    Pos.prototype.add = function(other) {
        this.x += other.x;
        this.y += other.y;
        return this;
    };

    Pos.prototype.sub = function(other) {
        this.x -= other.x;
        this.y -= other.y;
        return this;
    };

    Pos.prototype.clamp = function(lower, upper) {
        if ((lower != null) && (upper != null)) {
            this.x = clamp(lower.x, upper.x, this.x);
            this.y = clamp(lower.y, upper.y, this.y);
        }
        return this;
    };

    Pos.prototype.normalize = function() {
        var l;
        l = this.length();
        if (l) {
            l = 1.0 / l;
            this.x *= l;
            this.y *= l;
        }
        return this;
    };

    Pos.prototype.negate = function() {
        this.x *= -1;
        this.y *= -1;
        return this;
    };

    Pos.prototype.rotate = function(angle) {
        var cos, rad, sin, x;
        while (angle > 360) {
            angle -= 360;
        }
        while (angle < -360) {
            angle += 360;
        }
        if (angle === 0) {
            return this;
        }
        rad = this.deg2rad(angle);
        cos = Math.cos(rad);
        sin = Math.sin(rad);
        x = this.x;
        this.x = cos * this.x - sin * this.y;
        this.y = sin * x + cos * this.y;
        return this;
    };

    return Pos;

})();

module.exports = function(x, y) {
    return new Pos(x, y);
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG9zLmpzIiwic291cmNlUm9vdCI6Ii4iLCJzb3VyY2VzIjpbIiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBOzs7Ozs7O0FBQUEsSUFBQTs7QUFRRSxRQUFVLE9BQUEsQ0FBUSxPQUFSOztBQUVOO0lBRUMsYUFBQyxFQUFELEVBQUssRUFBTDtBQUNDLFlBQUE7UUFEQSxJQUFDLENBQUEsSUFBRDtRQUFJLElBQUMsQ0FBQSxJQUFEO1FBQ0osSUFBRyx1REFBSDtZQUNJLEtBQUEsR0FBUSxJQUFDLENBQUE7WUFDVCxJQUFHLEtBQUEsQ0FBTSxNQUFNLENBQUMsT0FBYixDQUFIO2dCQUNJLElBQUMsQ0FBQSxDQUFELEdBQUssS0FBSyxDQUFDLE9BQU4sR0FBZ0IsUUFBUSxDQUFDLGVBQWUsQ0FBQyxVQUF6QyxHQUFzRCxRQUFRLENBQUMsSUFBSSxDQUFDO2dCQUN6RSxJQUFDLENBQUEsQ0FBRCxHQUFLLEtBQUssQ0FBQyxPQUFOLEdBQWdCLFFBQVEsQ0FBQyxlQUFlLENBQUMsU0FBekMsR0FBcUQsUUFBUSxDQUFDLElBQUksQ0FBQyxVQUY1RTthQUFBLE1BQUE7Z0JBSUksSUFBQyxDQUFBLENBQUQsR0FBSyxLQUFLLENBQUMsT0FBTixHQUFnQixNQUFNLENBQUMsT0FBdkIsR0FBaUM7Z0JBQ3RDLElBQUMsQ0FBQSxDQUFELEdBQUssS0FBSyxDQUFDLE9BQU4sR0FBZ0IsTUFBTSxDQUFDLE9BQXZCLEdBQWlDLEVBTDFDO2FBRko7U0FBQSxNQVFLLElBQU8sZ0JBQUosSUFBWSxHQUFHLENBQUMsS0FBSixDQUFVLElBQUMsQ0FBQSxDQUFYLENBQWY7WUFDRCxJQUFDLENBQUEsQ0FBRCxHQUFLLElBQUMsQ0FBQSxDQUFDLENBQUM7WUFDUixJQUFDLENBQUEsQ0FBRCxHQUFLLElBQUMsQ0FBQSxDQUFDLENBQUMsRUFGUDs7UUFHTCxJQUFVLEtBQUEsQ0FBTSxJQUFDLENBQUEsQ0FBUCxDQUFWO1lBQUEsSUFBQyxDQUFBLENBQUQsR0FBSyxFQUFMOztRQUNBLElB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LElBQUMsQ0FBQSxDQUFMLEdBQVMsR0FBQSxHQUFJLElBQUMsQ0FBQTtRQUNuQixJQUFDLENBQUEsQ0FBRCxHQUFLLEdBQUEsR0FBSyxDQUFMLEdBQVMsR0FBQSxHQUFJLElBQUMsQ0FBQTtlQUNuQjtJQVZJOzs7Ozs7QUFZWixNQUFNLENBQUMsT0FBUCxHQUFpQixTQUFDLENBQUQsRUFBRyxDQUFIO1dBQVMsSUFBSSxHQUFKLENBQVEsQ0FBUixFQUFVLENBQVY7QUFBVCIsInNvdXJjZXNDb250ZW50IjpbIiMjI1xuMDAwMDAwMCAgICAwMDAwMDAwICAgIDAwMDAwMDBcbjAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgICAgXG4wMDAwMDAwICAgMDAwICAgMDAwICAwMDAwMDAwIFxuMDAgICAgICAgIDAwMCAgIDAwMCAgICAgICAwMDBcbjAwICAgICAgICAgMDAwMDAwMCAgIDAwMDAwMDAgXG4jIyNcblxueyBjbGFtcCB9ID0gcmVxdWlyZSAnLi9reGsnXG5cbmNsYXNzIFBvc1xuXG4gICAgQDogKEB4LCBAeSkgLT5cbiAgICAgICAgaWYgQHg/LmNsaWVudFg/XG4gICAgICAgICAgICBldmVudCA9IEB4XG4gICAgICAgICAgICBpZiBpc05hTiB3aW5kb3cuc2Nyb2xsWFxuICAgICAgICAgICAgICAgIEB4ID0gZXZlbnQuY2xpZW50WCArIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0ICsgZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0XG4gICAgICAgICAgICAgICAgQHkgPSBldmVudC5jbGllbnRZICsgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCArIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wXG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgQHggPSBldmVudC5jbGllbnRYICsgd2luZG93LnNjcm9sbFggKyAxXG4gICAgICAgICAgICAgICAgQHkgPSBldmVudC5jbGllbnRZICsgd2luZG93LnNjcm9sbFkgKyAxXG4gICAgICAgIGVsc2UgaWYgbm90IEB5PyBhbmQgUG9zLmlzUG9zIEB4XG4gICAgICAgICAgICBAeSA9IEB4LnlcbiAgICAgICAgICAgIEB4ID0gQHgueFxuICAgICAgICBAeCA9IDAgaWYgaXNOYU4gQHhcbiAgICAgICAgQHkgPSAwIGlmIGlzTmFOIEB5XG4gICAgICAgIFxuICAgIGNvcHk6IC0+IG5ldyBQb3MgQHgsIEB5XG5cbiAgICBwbHVzOiAodmFsKSAtPlxuICAgICAgICBuZXdQb3MgPSBAY29weSgpXG4gICAgICAgIGlmIHZhbD9cbiAgICAgICAgICAgIG5ld1Bvcy54ICs9IHZhbC54ICB1bmxlc3MgaXNOYU4odmFsLngpXG4gICAgICAgICAgICBuZXdQb3MueSArPSB2YWwueSAgdW5sZXNzIGlzTmFOKHZhbC55KVxuICAgICAgICBuZXdQb3NcblxuICAgIG1pbnVzOiAodmFsKSAtPlxuICAgICAgICBuZXdQb3MgPSBAY29weSgpXG4gICAgICAgIGlmIHZhbD9cbiAgICAgICAgICAgIG5ld1Bvcy54IC09IHZhbC54ICB1bmxlc3MgaXNOYU4odmFsLngpXG4gICAgICAgICAgICBuZXdQb3MueSAtPSB2YWwueSAgdW5sZXNzIGlzTmFOKHZhbC55KVxuICAgICAgICBuZXdQb3NcbiAgICAgICAgXG4gICAgdGltZXM6ICh2YWwpIC0+IEBjb3B5KCkuc2NhbGUgdmFsXG4gICAgICAgIFxuICAgIGNsYW1wZWQ6IChsb3dlciwgdXBwZXIpIC0+IEBjb3B5KCkuY2xhbXAgbG93ZXIsIHVwcGVyXG4gICAgcm91bmRlZDogKHY9MS4wKSAtPiBuZXcgUG9zIE1hdGgucm91bmQoQHgvdikqdiwgTWF0aC5yb3VuZChAeS92KSp2XG4gICAgICAgIFxuICAgIHRvOiAgKG90aGVyKSAtPiBvdGhlci5taW51cyBAXG4gICAgbWlkOiAob3RoZXIpIC0+IEBwbHVzKG90aGVyKS5zY2FsZSAwLjVcbiAgICBpbnRlcnBvbGF0ZTogKG90aGVyLCBmKSAtPiBAcGx1cyBAdG8ob3RoZXIpLnNjYWxlIGZcblxuICAgIG1pbjogKHZhbCkgLT5cbiAgICAgICAgbmV3UG9zID0gQGNvcHkoKVxuICAgICAgICByZXR1cm4gbmV3UG9zIHVubGVzcyB2YWw/XG4gICAgICAgIG5ld1Bvcy54ID0gdmFsLnggIGlmIG5vdCBpc05hTih2YWwueCkgYW5kIEB4ID4gdmFsLnhcbiAgICAgICAgbmV3UG9zLnkgPSB2YWwueSAgaWYgbm90IGlzTmFOKHZhbC55KSBhbmQgQHkgPiB2YWwueVxuICAgICAgICBuZXdQb3NcblxuICAgIG1heDogKHZhbCkgLT5cbiAgICAgICAgbmV3UG9zID0gQGNvcHkoKVxuICAgICAgICByZXR1cm4gbmV3UG9zIHVubGVzcyB2YWw/XG4gICAgICAgIG5ld1Bvcy54ID0gdmFsLnggIGlmIG5vdCBpc05hTih2YWwueCkgYW5kIEB4IDwgdmFsLnhcbiAgICAgICAgbmV3UG9zLnkgPSB2YWwueSAgaWYgbm90IGlzTmFOKHZhbC55KSBhbmQgQHkgPCB2YWwueVxuICAgICAgICBuZXdQb3NcblxuICAgIG5vcm1hbDogICAgICAgICAtPiBAY29weSgpLm5vcm1hbGl6ZSgpXG4gICAgbmVnOiAgICAgICAgICAgIC0+IEBjb3B5KCkubmVnYXRlKClcbiAgICBsZW5ndGg6ICAgICAgICAgLT4gcmV0dXJuIE1hdGguc3FydCBAc3F1YXJlKClcbiAgICBkb3Q6ICAgICAgICAobykgLT4gQHgqby54ICsgQHkqby55XG4gICAgY3Jvc3M6ICAgICAgKG8pIC0+IEB4Km8ueSAtIEB5Km8ueFxuICAgIHNxdWFyZTogICAgICAgICAtPiAoQHggKiBAeCkgKyAoQHkgKiBAeSlcbiAgICBkaXN0U3F1YXJlOiAobykgLT4gQG1pbnVzKG8pLnNxdWFyZSgpXG4gICAgZGlzdDogICAgICAgKG8pIC0+IE1hdGguc3FydCBAZGlzdFNxdWFyZShvKVxuICAgIGVxdWFsczogICAgIChvKSAtPiBAeCA9PSBvPy54IGFuZCBAeSA9PSBvPy55XG4gICAgZGVnMnJhZDogICAgKGQpIC0+IE1hdGguUEkqZC8xODAuMFxuICAgIHJhZDJkZWc6ICAgIChyKSAtPiByKjE4MC4wL01hdGguUElcbiAgICBcbiAgICBpc0Nsb3NlOiAgICAobyxkaXN0PTAuMSkgLT4gTWF0aC5hYnMoQHgtby54KStNYXRoLmFicyhAeS1vLnkpIDwgZGlzdFxuICAgIGlzWmVybzogICAgIChlPTAuMDAwMDAxKSAtPiBNYXRoLmFicyhAeCk8ZSBhbmQgTWF0aC5hYnMoQHkpPGVcbiAgICBcbiAgICBhbmdsZTogKG89bmV3IFBvcygwLDEpKSAtPlxuICAgICAgICBAcmFkMmRlZyBNYXRoLmFjb3MgQG5vcm1hbCgpLmRvdCBvLm5vcm1hbCgpXG4gICAgICAgIFxuICAgIHBlcnA6IC0+IG5ldyBQb3MgLUB5LCBAeFxuICAgIFxuICAgIHJvdGF0aW9uOiAobykgLT4gXG4gICAgICAgIGQgPSBvLmRvdCBAcGVycCgpXG4gICAgICAgIGlmIE1hdGguYWJzKGQpIDwgMC4wMDAxXG4gICAgICAgICAgICByZXR1cm4gMCBpZiBAZG90KG8pID4gMFxuICAgICAgICAgICAgcmV0dXJuIDE4MFxuICAgICAgICBzID0gZCA+IDAgYW5kIC0xIG9yIDFcbiAgICAgICAgcyAqIEBhbmdsZSBvXG4gICAgICAgICAgICBcbiAgICBjaGVjazogLT5cbiAgICAgICAgbmV3UG9zID0gQGNvcHkoKVxuICAgICAgICBuZXdQb3MueCA9IDAgaWYgaXNOYU4obmV3UG9zLngpXG4gICAgICAgIG5ld1Bvcy55ID0gMCBpZiBpc05hTihuZXdQb3MueSlcbiAgICAgICAgbmV3UG9zXG5cbiAgICBfc3RyOiAtPiBcbiAgICAgICAgcyAgPSAoXCI8eDoje0B4fSBcIiBpZiBAeD8pIG9yIFwiPE5hTiBcIlxuICAgICAgICBzICs9IChcInk6I3tAeX0+XCIgaWYgQHk/KSBvciBcIk5hTj5cIlxuXG4gICAgQGlzUG9zOiAobykgLT4gbz8gYW5kIG8ueD8gYW5kIG8ueT8gYW5kIE51bWJlci5pc0Zpbml0ZShvLngpIGFuZCBOdW1iZXIuaXNGaW5pdGUoby55KVxuICAgIFxuICAgICNfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18gZGVzdHJ1Y3RpdmVcbiAgICBcbiAgICBmYWRlOiAobywgdmFsKSAtPlxuICAgICAgICBAeCA9IEB4ICogKDEtdmFsKSArIG8ueCAqIHZhbFxuICAgICAgICBAeSA9IEB5ICogKDEtdmFsKSArIG8ueSAqIHZhbFxuICAgICAgICBAXG4gICAgXG4gICAgc2NhbGU6ICh2YWwpIC0+XG4gICAgICAgIEB4ICo9IHZhbFxuICAgICAgICBAeSAqPSB2YWxcbiAgICAgICAgQFxuXG4gICAgbXVsOiAob3RoZXIpIC0+XG4gICAgICAgIEB4ICo9IG90aGVyLnhcbiAgICAgICAgQHkgKj0gb3RoZXIueVxuICAgICAgICBAXG4gICAgICAgIFxuICAgIGRpdjogKG90aGVyKSAtPlxuICAgICAgICBAeCAvPSBvdGhlci54XG4gICAgICAgIEB5IC89IG90aGVyLnlcbiAgICAgICAgQFxuICAgICAgICBcbiAgICBhZGQ6IChvdGhlcikgLT5cbiAgICAgICAgQHggKz0gb3RoZXIueFxuICAgICAgICBAeSArPSBvdGhlci55XG4gICAgICAgIEBcblxuICAgIHN1YjogKG90aGVyKSAtPlxuICAgICAgICBAeCAtPSBvdGhlci54XG4gICAgICAgIEB5IC09IG90aGVyLnlcbiAgICAgICAgQFxuXG4gICAgY2xhbXA6IChsb3dlciwgdXBwZXIpIC0+ICAgICAgICBcbiAgICAgICAgaWYgbG93ZXI/IGFuZCB1cHBlcj8gICAgICAgICAgICBcbiAgICAgICAgICAgIEB4ID0gY2xhbXAobG93ZXIueCwgdXBwZXIueCwgQHgpXG4gICAgICAgICAgICBAeSA9IGNsYW1wKGxvd2VyLnksIHVwcGVyLnksIEB5KVxuICAgICAgICBAXG4gICAgICAgIFxuICAgIG5vcm1hbGl6ZTogLT5cbiAgICAgICAgbCA9IEBsZW5ndGgoKVxuICAgICAgICBpZiBsXG4gICAgICAgICAgICBsID0gMS4wL2xcbiAgICAgICAgICAgIEB4ICo9IGxcbiAgICAgICAgICAgIEB5ICo9IGxcbiAgICAgICAgQCAgICBcblxuICAgIG5lZ2F0ZTogLT5cbiAgICAgICAgQHggKj0gLTFcbiAgICAgICAgQHkgKj0gLTFcbiAgICAgICAgQFxuICAgICAgICBcbiAgICByb3RhdGU6IChhbmdsZSkgLT5cbiAgICAgICAgYW5nbGUgLT0gMzYwIHdoaWxlIGFuZ2xlID4gIDM2MCBcbiAgICAgICAgYW5nbGUgKz0gMzYwIHdoaWxlIGFuZ2xlIDwgLTM2MCBcbiAgICAgICAgcmV0dXJuIEAgaWYgYW5nbGUgPT0gMFxuICAgICAgICByYWQgPSBAZGVnMnJhZCBhbmdsZVxuICAgICAgICBjb3MgPSBNYXRoLmNvcyByYWRcbiAgICAgICAgc2luID0gTWF0aC5zaW4gcmFkXG4gICAgICAgIHggID0gQHhcbiAgICAgICAgQHggPSBjb3MqQHggLSBzaW4qQHlcbiAgICAgICAgQHkgPSBzaW4qIHggKyBjb3MqQHlcbiAgICAgICAgQFxuXG5tb2R1bGUuZXhwb3J0cyA9ICh4LHkpIC0+IG5ldyBQb3MgeCx5XG4iXX0=
//# sourceURL=../coffee/pos.coffee