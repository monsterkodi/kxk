// koffee 1.3.0

/*
0000000    0000000    0000000
00   000  000   000  000     
0000000   000   000  0000000 
00        000   000       000
00         0000000   0000000
 */
var Pos, clamp;

clamp = require('./kxk').clamp;

Pos = (function() {
    function Pos(x1, y1) {
        var event, ref;
        this.x = x1;
        this.y = y1;
        if (((ref = this.x) != null ? ref.clientX : void 0) != null) {
            event = this.x;
            if (isNaN(window.scrollX)) {
                this.x = event.clientX + document.documentElement.scrollLeft + document.body.scrollLeft;
                this.y = event.clientY + document.documentElement.scrollTop + document.body.scrollTop;
            } else {
                this.x = event.clientX + window.scrollX + 1;
                this.y = event.clientY + window.scrollY + 1;
            }
        } else if ((this.y == null) && Pos.isPos(this.x)) {
            this.y = this.x.y;
            this.x = this.x.x;
        }
    }

    Pos.prototype.copy = function() {
        return new Pos(this.x, this.y);
    };

    Pos.prototype.plus = function(val) {
        var newPos;
        newPos = this.copy();
        if (val != null) {
            if (!isNaN(val.x)) {
                newPos.x += val.x;
            }
            if (!isNaN(val.y)) {
                newPos.y += val.y;
            }
        }
        return newPos;
    };

    Pos.prototype.minus = function(val) {
        var newPos;
        newPos = this.copy();
        if (val != null) {
            if (!isNaN(val.x)) {
                newPos.x -= val.x;
            }
            if (!isNaN(val.y)) {
                newPos.y -= val.y;
            }
        }
        return newPos;
    };

    Pos.prototype.times = function(val) {
        return this.copy().scale(val);
    };

    Pos.prototype.clamped = function(lower, upper) {
        return this.copy().clamp(lower, upper);
    };

    Pos.prototype.rounded = function(v) {
        if (v == null) {
            v = 1.0;
        }
        return new Pos(Math.round(this.x / v) * v, Math.round(this.y / v) * v);
    };

    Pos.prototype.to = function(other) {
        return other.minus(this);
    };

    Pos.prototype.mid = function(other) {
        return this.plus(other).scale(0.5);
    };

    Pos.prototype.interpolate = function(other, f) {
        return this.plus(this.to(other).scale(f));
    };

    Pos.prototype.min = function(val) {
        var newPos;
        newPos = this.copy();
        if (val == null) {
            return newPos;
        }
        if (!isNaN(val.x) && this.x > val.x) {
            newPos.x = val.x;
        }
        if (!isNaN(val.y) && this.y > val.y) {
            newPos.y = val.y;
        }
        return newPos;
    };

    Pos.prototype.max = function(val) {
        var newPos;
        newPos = this.copy();
        if (val == null) {
            return newPos;
        }
        if (!isNaN(val.x) && this.x < val.x) {
            newPos.x = val.x;
        }
        if (!isNaN(val.y) && this.y < val.y) {
            newPos.y = val.y;
        }
        return newPos;
    };

    Pos.prototype.normal = function() {
        return this.copy().normalize();
    };

    Pos.prototype.neg = function() {
        return this.copy().negate();
    };

    Pos.prototype.length = function() {
        return Math.sqrt(this.square());
    };

    Pos.prototype.dot = function(o) {
        return this.x * o.x + this.y * o.y;
    };

    Pos.prototype.cross = function(o) {
        return this.x * o.y - this.y * o.x;
    };

    Pos.prototype.square = function() {
        return (this.x * this.x) + (this.y * this.y);
    };

    Pos.prototype.distSquare = function(o) {
        return this.minus(o).square();
    };

    Pos.prototype.dist = function(o) {
        return Math.sqrt(this.distSquare(o));
    };

    Pos.prototype.equals = function(o) {
        return this.x === (o != null ? o.x : void 0) && this.y === (o != null ? o.y : void 0);
    };

    Pos.prototype.deg2rad = function(d) {
        return Math.PI * d / 180.0;
    };

    Pos.prototype.rad2deg = function(r) {
        return r * 180.0 / Math.PI;
    };

    Pos.prototype.isClose = function(o, dist) {
        if (dist == null) {
            dist = 0.1;
        }
        return Math.abs(this.x - o.x) + Math.abs(this.y - o.y) < dist;
    };

    Pos.prototype.isZero = function(e) {
        if (e == null) {
            e = 0.000001;
        }
        return Math.abs(this.x) < e && Math.abs(this.y) < e;
    };

    Pos.prototype.angle = function(o) {
        if (o == null) {
            o = new Pos(0, 1);
        }
        return this.rad2deg(Math.acos(this.normal().dot(o.normal())));
    };

    Pos.prototype.perp = function() {
        return new Pos(-this.y, this.x);
    };

    Pos.prototype.rotation = function(o) {
        var d, s;
        d = o.dot(this.perp());
        if (Math.abs(d) < 0.0001) {
            if (this.dot(o) > 0) {
                return 0;
            }
            return 180;
        }
        s = d > 0 && -1 || 1;
        return s * this.angle(o);
    };

    Pos.prototype.check = function() {
        var newPos;
        newPos = this.copy();
        if (isNaN(newPos.x)) {
            newPos.x = 0;
        }
        if (isNaN(newPos.y)) {
            newPos.y = 0;
        }
        return newPos;
    };

    Pos.prototype._str = function() {
        var s;
        s = (this.x != null ? "<x:" + this.x + " " : void 0) || "<NaN ";
        return s += (this.y != null ? "y:" + this.y + ">" : void 0) || "NaN>";
    };

    Pos.isPos = function(o) {
        return (o != null) && (o.x != null) && (o.y != null) && Number.isFinite(o.x) && Number.isFinite(o.y);
    };

    Pos.prototype.fade = function(o, val) {
        this.x = this.x * (1 - val) + o.x * val;
        this.y = this.y * (1 - val) + o.y * val;
        return this;
    };

    Pos.prototype.scale = function(val) {
        this.x *= val;
        this.y *= val;
        return this;
    };

    Pos.prototype.mul = function(other) {
        this.x *= other.x;
        this.y *= other.y;
        return this;
    };

    Pos.prototype.div = function(other) {
        this.x /= other.x;
        this.y /= other.y;
        return this;
    };

    Pos.prototype.add = function(other) {
        this.x += other.x;
        this.y += other.y;
        return this;
    };

    Pos.prototype.sub = function(other) {
        this.x -= other.x;
        this.y -= other.y;
        return this;
    };

    Pos.prototype.clamp = function(lower, upper) {
        if ((lower != null) && (upper != null)) {
            this.x = clamp(lower.x, upper.x, this.x);
            this.y = clamp(lower.y, upper.y, this.y);
        }
        return this;
    };

    Pos.prototype.normalize = function() {
        var l;
        l = this.length();
        if (l) {
            l = 1.0 / l;
            this.x *= l;
            this.y *= l;
        }
        return this;
    };

    Pos.prototype.negate = function() {
        this.x *= -1;
        this.y *= -1;
        return this;
    };

    Pos.prototype.rotate = function(angle) {
        var cos, rad, sin, x;
        while (angle > 360) {
            angle -= 360;
        }
        while (angle < -360) {
            angle += 360;
        }
        if (angle === 0) {
            return this;
        }
        rad = this.deg2rad(angle);
        cos = Math.cos(rad);
        sin = Math.sin(rad);
        x = this.x;
        this.x = cos * this.x - sin * this.y;
        this.y = sin * x + cos * this.y;
        return this;
    };

    return Pos;

})();

module.exports = function(x, y) {
    return new Pos(x, y);
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG9zLmpzIiwic291cmNlUm9vdCI6Ii4iLCJzb3VyY2VzIjpbIiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBOzs7Ozs7O0FBQUEsSUFBQTs7QUFRRSxRQUFVLE9BQUEsQ0FBUSxPQUFSOztBQUVOO0lBRVcsYUFBQyxFQUFELEVBQUssRUFBTDtBQUNULFlBQUE7UUFEVSxJQUFDLENBQUEsSUFBRDtRQUFJLElBQUMsQ0FBQSxJQUFEO1FBQ2QsSUFBRyx1REFBSDtZQUNJLEtBQUEsR0FBUSxJQUFDLENBQUE7WUFDVCxJQUFHLEtBQUEsQ0FBTSxNQUFNLENBQUMsT0FBYixDQUFIO2dCQUNJLElBQUMsQ0FBQSxDQUFELEdBQUssS0FBSyxDQUFDLE9BQU4sR0FBZ0IsUUFBUSxDQUFDLGVBQWUsQ0FBQyxVQUF6QyxHQUFzRCxRQUFRLENBQUMsSUFBSSxDQUFDO2dCQUN6RSxJQUFDLENBQUEsQ0FBRCxHQUFLLEtBQUssQ0FBQyxPQUFOLEdBQWdCLFFBQVEsQ0FBQyxlQUFlLENBQUMsU0FBekMsR0FBcUQsUUFBUSxDQUFDLElBQUksQ0FBQyxVQUY1RTthQUFBLE1BQUE7Z0JBSUksSUFBQyxDQUFBLENBQUQsR0FBSyxLQUFLLENBQUMsT0FBTixHQUFnQixNQUFNLENBQUMsT0FBdkIsR0FBaUM7Z0JBQ3RDLElBQUMsQ0FBQSxDQUFELEdBQUssS0FBSyxDQUFDLE9BQU4sR0FBZ0IsTUFBTSxDQUFDLE9BQXZCLEdBQWlDLEVBTDFDO2FBRko7U0FBQSxNQVFLLElBQU8sZ0JBQUosSUFBWSxHQUFHLENBQUMsS0FBSixDQUFVLElBQUMsQ0FBQSxDQUFYLENBQWY7WUFDRCxJQUFDLENBQUEsQ0FBRCxHQUFLLElBQUMsQ0FBQSxDQUFDLENBQUM7WUFDUixJQUFDLENBQUEsQ0FBRCxHQUFLLElBQUMsQ0FBQSxDQUFDLENBQUMsRUFGUDs7SUFUSTs7a0JBYWIsSUFBQSxHQUFNLFNBQUE7ZUFBRyxJQUFJLEdBQUosQ0FBUSxJQUFDLENBQUEsQ0FBVCxFQUFZLElBQUMsQ0FBQSxD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LEdBQWlCLFNBQUMsQ0FBRCxFQUFHLENBQUg7V0FBUyxJQUFJLEdBQUosQ0FBUSxDQUFSLEVBQVUsQ0FBVjtBQUFUIiwic291cmNlc0NvbnRlbnQiOlsiIyMjXG4wMDAwMDAwICAgIDAwMDAwMDAgICAgMDAwMDAwMFxuMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICBcbjAwMDAwMDAgICAwMDAgICAwMDAgIDAwMDAwMDAgXG4wMCAgICAgICAgMDAwICAgMDAwICAgICAgIDAwMFxuMDAgICAgICAgICAwMDAwMDAwICAgMDAwMDAwMCBcbiMjI1xuXG57IGNsYW1wIH0gPSByZXF1aXJlICcuL2t4aydcblxuY2xhc3MgUG9zXG5cbiAgICBjb25zdHJ1Y3RvcjogKEB4LCBAeSkgLT5cbiAgICAgICAgaWYgQHg/LmNsaWVudFg/XG4gICAgICAgICAgICBldmVudCA9IEB4XG4gICAgICAgICAgICBpZiBpc05hTiB3aW5kb3cuc2Nyb2xsWFxuICAgICAgICAgICAgICAgIEB4ID0gZXZlbnQuY2xpZW50WCArIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0ICsgZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0XG4gICAgICAgICAgICAgICAgQHkgPSBldmVudC5jbGllbnRZICsgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCArIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wXG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgQHggPSBldmVudC5jbGllbnRYICsgd2luZG93LnNjcm9sbFggKyAxXG4gICAgICAgICAgICAgICAgQHkgPSBldmVudC5jbGllbnRZICsgd2luZG93LnNjcm9sbFkgKyAxXG4gICAgICAgIGVsc2UgaWYgbm90IEB5PyBhbmQgUG9zLmlzUG9zIEB4XG4gICAgICAgICAgICBAeSA9IEB4LnlcbiAgICAgICAgICAgIEB4ID0gQHgueFxuICAgICAgICBcbiAgICBjb3B5OiAtPiBuZXcgUG9zIEB4LCBAeVxuXG4gICAgcGx1czogKHZhbCkgLT5cbiAgICAgICAgbmV3UG9zID0gQGNvcHkoKVxuICAgICAgICBpZiB2YWw/XG4gICAgICAgICAgICBuZXdQb3MueCArPSB2YWwueCAgdW5sZXNzIGlzTmFOKHZhbC54KVxuICAgICAgICAgICAgbmV3UG9zLnkgKz0gdmFsLnkgIHVubGVzcyBpc05hTih2YWwueSlcbiAgICAgICAgbmV3UG9zXG5cbiAgICBtaW51czogKHZhbCkgLT5cbiAgICAgICAgbmV3UG9zID0gQGNvcHkoKVxuICAgICAgICBpZiB2YWw/XG4gICAgICAgICAgICBuZXdQb3MueCAtPSB2YWwueCAgdW5sZXNzIGlzTmFOKHZhbC54KVxuICAgICAgICAgICAgbmV3UG9zLnkgLT0gdmFsLnkgIHVubGVzcyBpc05hTih2YWwueSlcbiAgICAgICAgbmV3UG9zXG4gICAgICAgIFxuICAgIHRpbWVzOiAodmFsKSAtPiBAY29weSgpLnNjYWxlIHZhbFxuICAgICAgICBcbiAgICBjbGFtcGVkOiAobG93ZXIsIHVwcGVyKSAtPiBAY29weSgpLmNsYW1wIGxvd2VyLCB1cHBlclxuICAgIHJvdW5kZWQ6ICh2PTEuMCkgLT4gbmV3IFBvcyBNYXRoLnJvdW5kKEB4L3YpKnYsIE1hdGgucm91bmQoQHkvdikqdlxuICAgICAgICBcbiAgICB0bzogIChvdGhlcikgLT4gb3RoZXIubWludXMgQFxuICAgIG1pZDogKG90aGVyKSAtPiBAcGx1cyhvdGhlcikuc2NhbGUgMC41XG4gICAgaW50ZXJwb2xhdGU6IChvdGhlciwgZikgLT4gQHBsdXMgQHRvKG90aGVyKS5zY2FsZSBmXG5cbiAgICBtaW46ICh2YWwpIC0+XG4gICAgICAgIG5ld1BvcyA9IEBjb3B5KClcbiAgICAgICAgcmV0dXJuIG5ld1BvcyB1bmxlc3MgdmFsP1xuICAgICAgICBuZXdQb3MueCA9IHZhbC54ICBpZiBub3QgaXNOYU4odmFsLngpIGFuZCBAeCA+IHZhbC54XG4gICAgICAgIG5ld1Bvcy55ID0gdmFsLnkgIGlmIG5vdCBpc05hTih2YWwueSkgYW5kIEB5ID4gdmFsLnlcbiAgICAgICAgbmV3UG9zXG5cbiAgICBtYXg6ICh2YWwpIC0+XG4gICAgICAgIG5ld1BvcyA9IEBjb3B5KClcbiAgICAgICAgcmV0dXJuIG5ld1BvcyB1bmxlc3MgdmFsP1xuICAgICAgICBuZXdQb3MueCA9IHZhbC54ICBpZiBub3QgaXNOYU4odmFsLngpIGFuZCBAeCA8IHZhbC54XG4gICAgICAgIG5ld1Bvcy55ID0gdmFsLnkgIGlmIG5vdCBpc05hTih2YWwueSkgYW5kIEB5IDwgdmFsLnlcbiAgICAgICAgbmV3UG9zXG5cbiAgICBub3JtYWw6ICAgICAgICAgLT4gQGNvcHkoKS5ub3JtYWxpemUoKVxuICAgIG5lZzogICAgICAgICAgICAtPiBAY29weSgpLm5lZ2F0ZSgpXG4gICAgbGVuZ3RoOiAgICAgICAgIC0+IHJldHVybiBNYXRoLnNxcnQgQHNxdWFyZSgpXG4gICAgZG90OiAgICAgICAgKG8pIC0+IEB4Km8ueCArIEB5Km8ueVxuICAgIGNyb3NzOiAgICAgIChvKSAtPiBAeCpvLnkgLSBAeSpvLnhcbiAgICBzcXVhcmU6ICAgICAgICAgLT4gKEB4ICogQHgpICsgKEB5ICogQHkpXG4gICAgZGlzdFNxdWFyZTogKG8pIC0+IEBtaW51cyhvKS5zcXVhcmUoKVxuICAgIGRpc3Q6ICAgICAgIChvKSAtPiBNYXRoLnNxcnQgQGRpc3RTcXVhcmUobylcbiAgICBlcXVhbHM6ICAgICAobykgLT4gQHggPT0gbz8ueCBhbmQgQHkgPT0gbz8ueVxuICAgIGRlZzJyYWQ6ICAgIChkKSAtPiBNYXRoLlBJKmQvMTgwLjBcbiAgICByYWQyZGVnOiAgICAocikgLT4gcioxODAuMC9NYXRoLlBJXG4gICAgXG4gICAgaXNDbG9zZTogICAgKG8sZGlzdD0wLjEpIC0+IE1hdGguYWJzKEB4LW8ueCkrTWF0aC5hYnMoQHktby55KSA8IGRpc3RcbiAgICBpc1plcm86ICAgICAoZT0wLjAwMDAwMSkgLT4gTWF0aC5hYnMoQHgpPGUgYW5kIE1hdGguYWJzKEB5KTxlXG4gICAgXG4gICAgYW5nbGU6IChvPW5ldyBQb3MoMCwxKSkgLT5cbiAgICAgICAgQHJhZDJkZWcgTWF0aC5hY29zIEBub3JtYWwoKS5kb3Qgby5ub3JtYWwoKVxuICAgICAgICBcbiAgICBwZXJwOiAtPiBuZXcgUG9zIC1AeSwgQHhcbiAgICBcbiAgICByb3RhdGlvbjogKG8pIC0+IFxuICAgICAgICBkID0gby5kb3QgQHBlcnAoKVxuICAgICAgICBpZiBNYXRoLmFicyhkKSA8IDAuMDAwMVxuICAgICAgICAgICAgcmV0dXJuIDAgaWYgQGRvdChvKSA+IDBcbiAgICAgICAgICAgIHJldHVybiAxODBcbiAgICAgICAgcyA9IGQgPiAwIGFuZCAtMSBvciAxXG4gICAgICAgIHMgKiBAYW5nbGUgb1xuICAgICAgICAgICAgXG4gICAgY2hlY2s6IC0+XG4gICAgICAgIG5ld1BvcyA9IEBjb3B5KClcbiAgICAgICAgbmV3UG9zLnggPSAwIGlmIGlzTmFOKG5ld1Bvcy54KVxuICAgICAgICBuZXdQb3MueSA9IDAgaWYgaXNOYU4obmV3UG9zLnkpXG4gICAgICAgIG5ld1Bvc1xuXG4gICAgX3N0cjogLT4gXG4gICAgICAgIHMgID0gKFwiPHg6I3tAeH0gXCIgaWYgQHg/KSBvciBcIjxOYU4gXCJcbiAgICAgICAgcyArPSAoXCJ5OiN7QHl9PlwiIGlmIEB5Pykgb3IgXCJOYU4+XCJcblxuICAgIEBpc1BvczogKG8pIC0+IG8/IGFuZCBvLng/IGFuZCBvLnk/IGFuZCBOdW1iZXIuaXNGaW5pdGUoby54KSBhbmQgTnVtYmVyLmlzRmluaXRlKG8ueSlcbiAgICBcbiAgICAjX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fIGRlc3RydWN0aXZlXG4gICAgXG4gICAgZmFkZTogKG8sIHZhbCkgLT5cbiAgICAgICAgQHggPSBAeCAqICgxLXZhbCkgKyBvLnggKiB2YWxcbiAgICAgICAgQHkgPSBAeSAqICgxLXZhbCkgKyBvLnkgKiB2YWxcbiAgICAgICAgQFxuICAgIFxuICAgIHNjYWxlOiAodmFsKSAtPlxuICAgICAgICBAeCAqPSB2YWxcbiAgICAgICAgQHkgKj0gdmFsXG4gICAgICAgIEBcblxuICAgIG11bDogKG90aGVyKSAtPlxuICAgICAgICBAeCAqPSBvdGhlci54XG4gICAgICAgIEB5ICo9IG90aGVyLnlcbiAgICAgICAgQFxuICAgICAgICBcbiAgICBkaXY6IChvdGhlcikgLT5cbiAgICAgICAgQHggLz0gb3RoZXIueFxuICAgICAgICBAeSAvPSBvdGhlci55XG4gICAgICAgIEBcbiAgICAgICAgXG4gICAgYWRkOiAob3RoZXIpIC0+XG4gICAgICAgIEB4ICs9IG90aGVyLnhcbiAgICAgICAgQHkgKz0gb3RoZXIueVxuICAgICAgICBAXG5cbiAgICBzdWI6IChvdGhlcikgLT5cbiAgICAgICAgQHggLT0gb3RoZXIueFxuICAgICAgICBAeSAtPSBvdGhlci55XG4gICAgICAgIEBcblxuICAgIGNsYW1wOiAobG93ZXIsIHVwcGVyKSAtPiAgICAgICAgXG4gICAgICAgIGlmIGxvd2VyPyBhbmQgdXBwZXI/ICAgICAgICAgICAgXG4gICAgICAgICAgICBAeCA9IGNsYW1wKGxvd2VyLngsIHVwcGVyLngsIEB4KVxuICAgICAgICAgICAgQHkgPSBjbGFtcChsb3dlci55LCB1cHBlci55LCBAeSlcbiAgICAgICAgQFxuICAgICAgICBcbiAgICBub3JtYWxpemU6IC0+XG4gICAgICAgIGwgPSBAbGVuZ3RoKClcbiAgICAgICAgaWYgbFxuICAgICAgICAgICAgbCA9IDEuMC9sXG4gICAgICAgICAgICBAeCAqPSBsXG4gICAgICAgICAgICBAeSAqPSBsXG4gICAgICAgIEAgICAgXG5cbiAgICBuZWdhdGU6IC0+XG4gICAgICAgIEB4ICo9IC0xXG4gICAgICAgIEB5ICo9IC0xXG4gICAgICAgIEBcbiAgICAgICAgXG4gICAgcm90YXRlOiAoYW5nbGUpIC0+XG4gICAgICAgIGFuZ2xlIC09IDM2MCB3aGlsZSBhbmdsZSA+ICAzNjAgXG4gICAgICAgIGFuZ2xlICs9IDM2MCB3aGlsZSBhbmdsZSA8IC0zNjAgXG4gICAgICAgIHJldHVybiBAIGlmIGFuZ2xlID09IDBcbiAgICAgICAgcmFkID0gQGRlZzJyYWQgYW5nbGVcbiAgICAgICAgY29zID0gTWF0aC5jb3MgcmFkXG4gICAgICAgIHNpbiA9IE1hdGguc2luIHJhZFxuICAgICAgICB4ICA9IEB4XG4gICAgICAgIEB4ID0gY29zKkB4IC0gc2luKkB5XG4gICAgICAgIEB5ID0gc2luKiB4ICsgY29zKkB5XG4gICAgICAgIEBcblxubW9kdWxlLmV4cG9ydHMgPSAoeCx5KSAtPiBuZXcgUG9zIHgseVxuIl19
//# sourceURL=../coffee/pos.coffee