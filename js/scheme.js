(function() {
  /*
   0000000   0000000  000   000  00000000  00     00  00000000
  000       000       000   000  000       000   000  000
  0000000   000       000000000  0000000   000000000  0000000
       000  000       000   000  000       000 0 000  000
  0000000    0000000  000   000  00000000  000   000  00000000
  */
  var $, Scheme, _, elem, post, prefs, slash;

  ({prefs, elem, post, slash, $, _} = require('./kxk'));

  Scheme = class Scheme {
    static toggle(schemes = ['dark', 'bright']) {
      var currentScheme, link, nextScheme, nextSchemeIndex;
      if (link = $('style-link')) {
        currentScheme = slash.basename(_.last(link.href.split('/')), '.css');
        nextSchemeIndex = (schemes.indexOf(currentScheme) + 1) % schemes.length;
        nextScheme = schemes[nextSchemeIndex];
        return Scheme.set(nextScheme);
      }
    }

    static set(scheme) {
      var href, link, newlink;
      scheme = slash.basename(scheme, '.css');
      prefs.set('scheme', scheme);
      link = $("#style-link");
      newlink = elem('link', {
        href: `css/${scheme}.css`,
        rel: 'stylesheet',
        type: 'text/css',
        id: 'style-link'
      });
      link.parentNode.replaceChild(newlink, link);
      if (link = $("#style-title")) {
        href = slash.join(slash.dir(link.href), `${scheme}.css`);
        newlink = elem('link', {
          href: href,
          rel: 'stylesheet',
          type: 'text/css',
          id: 'style-title'
        });
        link.parentNode.replaceChild(newlink, link);
      }
      return post.emit('schemeChanged', scheme);
    }

  };

  module.exports = Scheme;

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NoZW1lLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWUvc2NoZW1lLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUFBOzs7Ozs7O0FBQUEsTUFBQSxDQUFBLEVBQUEsTUFBQSxFQUFBLENBQUEsRUFBQSxJQUFBLEVBQUEsSUFBQSxFQUFBLEtBQUEsRUFBQTs7RUFRQSxDQUFBLENBQUUsS0FBRixFQUFTLElBQVQsRUFBZSxJQUFmLEVBQXFCLEtBQXJCLEVBQTRCLENBQTVCLEVBQStCLENBQS9CLENBQUEsR0FBcUMsT0FBQSxDQUFRLE9BQVIsQ0FBckM7O0VBRU0sU0FBTixNQUFBLE9BQUE7SUFFYSxPQUFSLE1BQVEsQ0FBQyxVQUFVLENBQUMsTUFBRCxFQUFTLFFBQVQsQ0FBWCxDQUFBO0FBRUwsVUFBQSxhQUFBLEVBQUEsSUFBQSxFQUFBLFVBQUEsRUFBQTtNQUFBLElBQUcsSUFBQSxHQUFNLENBQUEsQ0FBRSxZQUFGLENBQVQ7UUFDSSxhQUFBLEdBQWdCLEtBQUssQ0FBQyxRQUFOLENBQWUsQ0FBQyxDQUFDLElBQUYsQ0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQVYsQ0FBZ0IsR0FBaEIsQ0FBUCxDQUFmLEVBQTZDLE1BQTdDO1FBQ2hCLGVBQUEsR0FBa0IsQ0FBRSxPQUFPLENBQUMsT0FBUixDQUFnQixhQUFoQixDQUFBLEdBQWlDLENBQW5DLENBQUEsR0FBd0MsT0FBTyxDQUFDO1FBQ2xFLFVBQUEsR0FBYSxPQUFRLENBQUEsZUFBQTtlQUNyQixNQUFNLENBQUMsR0FBUCxDQUFXLFVBQVgsRUFKSjs7SUFGSzs7SUFRSCxPQUFMLEdBQUssQ0FBQyxNQUFELENBQUE7QUFFRixVQUFBLElBQUEsRUFBQSxJQUFBLEVBQUE7TUFBQSxNQUFBLEdBQVMsS0FBSyxDQUFDLFFBQU4sQ0FBZSxNQUFmLEVBQXVCLE1BQXZCO01BQ1QsS0FBSyxDQUFDLEdBQU4sQ0FBVSxRQUFWLEVBQW9CLE1BQXBCO01BRUEsSUFBQSxHQUFNLENBQUEsQ0FBRSxhQUFGO01BQ04sT0FBQSxHQUFVLElBQUEsQ0FBSyxNQUFMLEVBQ047UUFBQSxJQUFBLEVBQU0sQ0FBQSxJQUFBLENBQUEsQ0FBTyxNQUFQLENBQWMsSUFBZCxDQUFOO1FBQ0EsR0FBQSxFQUFNLFlBRE47UUFFQSxJQUFBLEVBQU0sVUFGTjtRQUdBLEVBQUEsRUFBTTtNQUhOLENBRE07TUFLVixJQUFJLENBQUMsVUFBVSxDQUFDLFlBQWhCLENBQTZCLE9BQTdCLEVBQXNDLElBQXRDO01BRUEsSUFBRyxJQUFBLEdBQU0sQ0FBQSxDQUFFLGNBQUYsQ0FBVDtRQUNJLElBQUEsR0FBTyxLQUFLLENBQUMsSUFBTixDQUFXLEtBQUssQ0FBQyxHQUFOLENBQVUsSUFBSSxDQUFDLElBQWYsQ0FBWCxFQUFpQyxDQUFBLENBQUEsQ0FBRyxNQUFILENBQVUsSUFBVixDQUFqQztRQUNQLE9BQUEsR0FBVSxJQUFBLENBQUssTUFBTCxFQUNOO1VBQUEsSUFBQSxFQUFNLElBQU47VUFDQSxHQUFBLEVBQU0sWUFETjtVQUVBLElBQUEsRUFBTSxVQUZOO1VBR0EsRUFBQSxFQUFNO1FBSE4sQ0FETTtRQUtWLElBQUksQ0FBQyxVQUFVLENBQUMsWUFBaEIsQ0FBNkIsT0FBN0IsRUFBc0MsSUFBdEMsRUFQSjs7YUFTQSxJQUFJLENBQUMsSUFBTCxDQUFVLGVBQVYsRUFBMkIsTUFBM0I7SUF0QkU7O0VBVlY7O0VBa0NBLE1BQU0sQ0FBQyxPQUFQLEdBQWlCO0FBNUNqQiIsInNvdXJjZXNDb250ZW50IjpbIiMjI1xyXG4gMDAwMDAwMCAgIDAwMDAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMDAgIDAwICAgICAwMCAgMDAwMDAwMDBcclxuMDAwICAgICAgIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMFxyXG4wMDAwMDAwICAgMDAwICAgICAgIDAwMDAwMDAwMCAgMDAwMDAwMCAgIDAwMDAwMDAwMCAgMDAwMDAwMFxyXG4gICAgIDAwMCAgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMCAwIDAwMCAgMDAwXHJcbjAwMDAwMDAgICAgMDAwMDAwMCAgMDAwICAgMDAwICAwMDAwMDAwMCAgMDAwICAgMDAwICAwMDAwMDAwMFxyXG4jIyNcclxuXHJcbnsgcHJlZnMsIGVsZW0sIHBvc3QsIHNsYXNoLCAkLCBfIH0gPSByZXF1aXJlICcuL2t4aydcclxuXHJcbmNsYXNzIFNjaGVtZVxyXG5cclxuICAgIEB0b2dnbGU6IChzY2hlbWVzID0gWydkYXJrJywgJ2JyaWdodCddKSAtPlxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIGxpbmsgPSQgJ3N0eWxlLWxpbmsnXHJcbiAgICAgICAgICAgIGN1cnJlbnRTY2hlbWUgPSBzbGFzaC5iYXNlbmFtZSBfLmxhc3QobGluay5ocmVmLnNwbGl0KCcvJykpLCAnLmNzcydcclxuICAgICAgICAgICAgbmV4dFNjaGVtZUluZGV4ID0gKCBzY2hlbWVzLmluZGV4T2YoY3VycmVudFNjaGVtZSkgKyAxKSAlIHNjaGVtZXMubGVuZ3RoXHJcbiAgICAgICAgICAgIG5leHRTY2hlbWUgPSBzY2hlbWVzW25leHRTY2hlbWVJbmRleF1cclxuICAgICAgICAgICAgU2NoZW1lLnNldCBuZXh0U2NoZW1lXHJcblxyXG4gICAgQHNldDogKHNjaGVtZSkgLT5cclxuICAgICAgICBcclxuICAgICAgICBzY2hlbWUgPSBzbGFzaC5iYXNlbmFtZSBzY2hlbWUsICcuY3NzJ1xyXG4gICAgICAgIHByZWZzLnNldCAnc2NoZW1lJywgc2NoZW1lXHJcbiAgICAgICAgXHJcbiAgICAgICAgbGluayA9JCBcIiNzdHlsZS1saW5rXCJcclxuICAgICAgICBuZXdsaW5rID0gZWxlbSAnbGluaycsXHJcbiAgICAgICAgICAgIGhyZWY6IFwiY3NzLyN7c2NoZW1lfS5jc3NcIlxyXG4gICAgICAgICAgICByZWw6ICAnc3R5bGVzaGVldCdcclxuICAgICAgICAgICAgdHlwZTogJ3RleHQvY3NzJ1xyXG4gICAgICAgICAgICBpZDogICAnc3R5bGUtbGluaycgICAgICAgICAgIFxyXG4gICAgICAgIGxpbmsucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQgbmV3bGluaywgbGlua1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIGxpbmsgPSQgXCIjc3R5bGUtdGl0bGVcIlxyXG4gICAgICAgICAgICBocmVmID0gc2xhc2guam9pbiBzbGFzaC5kaXIobGluay5ocmVmKSwgXCIje3NjaGVtZX0uY3NzXCJcclxuICAgICAgICAgICAgbmV3bGluayA9IGVsZW0gJ2xpbmsnLFxyXG4gICAgICAgICAgICAgICAgaHJlZjogaHJlZlxyXG4gICAgICAgICAgICAgICAgcmVsOiAgJ3N0eWxlc2hlZXQnXHJcbiAgICAgICAgICAgICAgICB0eXBlOiAndGV4dC9jc3MnXHJcbiAgICAgICAgICAgICAgICBpZDogICAnc3R5bGUtdGl0bGUnICAgICAgICAgICBcclxuICAgICAgICAgICAgbGluay5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZCBuZXdsaW5rLCBsaW5rXHJcbiAgICAgICAgXHJcbiAgICAgICAgcG9zdC5lbWl0ICdzY2hlbWVDaGFuZ2VkJywgc2NoZW1lXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFNjaGVtZVxyXG4iXX0=
//# sourceURL=C:/Users/t.kohnhorst/s/kxk/coffee/scheme.coffee