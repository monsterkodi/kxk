(function() {
  /*
   0000000   0000000  000   000  00000000  00     00  00000000
  000       000       000   000  000       000   000  000
  0000000   000       000000000  0000000   000000000  0000000
       000  000       000   000  000       000 0 000  000
  0000000    0000000  000   000  00000000  000   000  00000000
  */
  var $, Scheme, _, elem, post, prefs, slash;

  ({prefs, elem, post, slash, $, _} = require('./kxk'));

  Scheme = class Scheme {
    static toggle(schemes = ['dark', 'bright']) {
      var currentScheme, link, nextScheme, nextSchemeIndex;
      if (link = $('style-link')) {
        currentScheme = slash.basename(_.last(link.href.split('/')), '.css');
        nextSchemeIndex = (schemes.indexOf(currentScheme) + 1) % schemes.length;
        nextScheme = schemes[nextSchemeIndex];
        return Scheme.set(nextScheme);
      }
    }

    static set(scheme) {
      var href, link, newlink;
      scheme = slash.basename(scheme, '.css');
      prefs.set('scheme', scheme);
      link = $("#style-link");
      newlink = elem('link', {
        href: `css/${scheme}.css`,
        rel: 'stylesheet',
        type: 'text/css',
        id: 'style-link'
      });
      link.parentNode.replaceChild(newlink, link);
      if (link = $("#style-title")) {
        href = slash.join(slash.dir(link.href), `${scheme}.css`);
        newlink = elem('link', {
          href: href,
          rel: 'stylesheet',
          type: 'text/css',
          id: 'style-title'
        });
        link.parentNode.replaceChild(newlink, link);
      }
      return post.emit('schemeChanged', scheme);
    }

  };

  module.exports = Scheme;

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NoZW1lLmpzIiwic291cmNlUm9vdCI6Ii4iLCJzb3VyY2VzIjpbIi4uL2NvZmZlZS9zY2hlbWUuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQUE7Ozs7Ozs7QUFBQSxNQUFBLENBQUEsRUFBQSxNQUFBLEVBQUEsQ0FBQSxFQUFBLElBQUEsRUFBQSxJQUFBLEVBQUEsS0FBQSxFQUFBOztFQVFBLENBQUEsQ0FBRSxLQUFGLEVBQVMsSUFBVCxFQUFlLElBQWYsRUFBcUIsS0FBckIsRUFBNEIsQ0FBNUIsRUFBK0IsQ0FBL0IsQ0FBQSxHQUFxQyxPQUFBLENBQVEsT0FBUixDQUFyQzs7RUFFTSxTQUFOLE1BQUEsT0FBQTtJQUVhLE9BQVIsTUFBUSxDQUFDLFVBQVUsQ0FBQyxNQUFELEVBQVMsUUFBVCxDQUFYLENBQUE7QUFFTCxVQUFBLGFBQUEsRUFBQSxJQUFBLEVBQUEsVUFBQSxFQUFBO01BQUEsSUFBRyxJQUFBLEdBQU0sQ0FBQSxDQUFFLFlBQUYsQ0FBVDtRQUNJLGFBQUEsR0FBZ0IsS0FBSyxDQUFDLFFBQU4sQ0FBZSxDQUFDLENBQUMsSUFBRixDQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBVixDQUFnQixHQUFoQixDQUFQLENBQWYsRUFBNkMsTUFBN0M7UUFDaEIsZUFBQSxHQUFrQixDQUFFLE9BQU8sQ0FBQyxPQUFSLENBQWdCLGFBQWhCLENBQUEsR0FBaUMsQ0FBbkMsQ0FBQSxHQUF3QyxPQUFPLENBQUM7UUFDbEUsVUFBQSxHQUFhLE9BQVEsQ0FBQSxlQUFBO2VBQ3JCLE1BQU0sQ0FBQyxHQUFQLENBQVcsVUFBWCxFQUpKOztJQUZLOztJQVFILE9BQUwsR0FBSyxDQUFDLE1BQUQsQ0FBQTtBQUVGLFVBQUEsSUFBQSxFQUFBLElBQUEsRUFBQTtNQUFBLE1BQUEsR0FBUyxLQUFLLENBQUMsUUFBTixDQUFlLE1BQWYsRUFBdUIsTUFBdkI7TUFDVCxLQUFLLENBQUMsR0FBTixDQUFVLFFBQVYsRUFBb0IsTUFBcEI7TUFFQSxJQUFBLEdBQU0sQ0FBQSxDQUFFLGFBQUY7TUFDTixPQUFBLEdBQVUsSUFBQSxDQUFLLE1BQUwsRUFDTjtRQUFBLElBQUEsRUFBTSxDQUFBLElBQUEsQ0FBQSxDQUFPLE1BQVAsQ0FBYyxJQUFkLENBQU47UUFDQSxHQUFBLEVBQU0sWUFETjtRQUVBLElBQUEsRUFBTSxVQUZOO1FBR0EsRUFBQSxFQUFNO01BSE4sQ0FETTtNQUtWLElBQUksQ0FBQyxVQUFVLENBQUMsWUFBaEIsQ0FBNkIsT0FBN0IsRUFBc0MsSUFBdEM7TUFFQSxJQUFHLElBQUEsR0FBTSxDQUFBLENBQUUsY0FBRixDQUFUO1FBQ0ksSUFBQSxHQUFPLEtBQUssQ0FBQyxJQUFOLENBQVcsS0FBSyxDQUFDLEdBQU4sQ0FBVSxJQUFJLENBQUMsSUFBZixDQUFYLEVBQWlDLENBQUEsQ0FBQSxDQUFHLE1BQUgsQ0FBVSxJQUFWLENBQWpDO1FBQ1AsT0FBQSxHQUFVLElBQUEsQ0FBSyxNQUFMLEVBQ047VUFBQSxJQUFBLEVBQU0sSUFBTjtVQUNBLEdBQUEsRUFBTSxZQUROO1VBRUEsSUFBQSxFQUFNLFVBRk47VUFHQSxFQUFBLEVBQU07UUFITixDQURNO1FBS1YsSUFBSSxDQUFDLFVBQVUsQ0FBQyxZQUFoQixDQUE2QixPQUE3QixFQUFzQyxJQUF0QyxFQVBKOzthQVNBLElBQUksQ0FBQyxJQUFMLENBQVUsZUFBVixFQUEyQixNQUEzQjtJQXRCRTs7RUFWVjs7RUFrQ0EsTUFBTSxDQUFDLE9BQVAsR0FBaUI7QUE1Q2pCIiwic291cmNlc0NvbnRlbnQiOlsiIyMjXG4gMDAwMDAwMCAgIDAwMDAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMDAgIDAwICAgICAwMCAgMDAwMDAwMDBcbjAwMCAgICAgICAwMDAgICAgICAgMDAwICAgMDAwICAwMDAgICAgICAgMDAwICAgMDAwICAwMDBcbjAwMDAwMDAgICAwMDAgICAgICAgMDAwMDAwMDAwICAwMDAwMDAwICAgMDAwMDAwMDAwICAwMDAwMDAwXG4gICAgIDAwMCAgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMCAwIDAwMCAgMDAwXG4wMDAwMDAwICAgIDAwMDAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMDBcbiMjI1xuXG57IHByZWZzLCBlbGVtLCBwb3N0LCBzbGFzaCwgJCwgXyB9ID0gcmVxdWlyZSAnLi9reGsnXG5cbmNsYXNzIFNjaGVtZVxuXG4gICAgQHRvZ2dsZTogKHNjaGVtZXMgPSBbJ2RhcmsnLCAnYnJpZ2h0J10pIC0+XG4gICAgICAgIFxuICAgICAgICBpZiBsaW5rID0kICdzdHlsZS1saW5rJ1xuICAgICAgICAgICAgY3VycmVudFNjaGVtZSA9IHNsYXNoLmJhc2VuYW1lIF8ubGFzdChsaW5rLmhyZWYuc3BsaXQoJy8nKSksICcuY3NzJ1xuICAgICAgICAgICAgbmV4dFNjaGVtZUluZGV4ID0gKCBzY2hlbWVzLmluZGV4T2YoY3VycmVudFNjaGVtZSkgKyAxKSAlIHNjaGVtZXMubGVuZ3RoXG4gICAgICAgICAgICBuZXh0U2NoZW1lID0gc2NoZW1lc1tuZXh0U2NoZW1lSW5kZXhdXG4gICAgICAgICAgICBTY2hlbWUuc2V0IG5leHRTY2hlbWVcblxuICAgIEBzZXQ6IChzY2hlbWUpIC0+XG4gICAgICAgIFxuICAgICAgICBzY2hlbWUgPSBzbGFzaC5iYXNlbmFtZSBzY2hlbWUsICcuY3NzJ1xuICAgICAgICBwcmVmcy5zZXQgJ3NjaGVtZScsIHNjaGVtZVxuICAgICAgICBcbiAgICAgICAgbGluayA9JCBcIiNzdHlsZS1saW5rXCJcbiAgICAgICAgbmV3bGluayA9IGVsZW0gJ2xpbmsnLFxuICAgICAgICAgICAgaHJlZjogXCJjc3MvI3tzY2hlbWV9LmNzc1wiXG4gICAgICAgICAgICByZWw6ICAnc3R5bGVzaGVldCdcbiAgICAgICAgICAgIHR5cGU6ICd0ZXh0L2NzcydcbiAgICAgICAgICAgIGlkOiAgICdzdHlsZS1saW5rJyAgICAgICAgICAgXG4gICAgICAgIGxpbmsucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQgbmV3bGluaywgbGlua1xuICAgICAgICBcbiAgICAgICAgaWYgbGluayA9JCBcIiNzdHlsZS10aXRsZVwiXG4gICAgICAgICAgICBocmVmID0gc2xhc2guam9pbiBzbGFzaC5kaXIobGluay5ocmVmKSwgXCIje3NjaGVtZX0uY3NzXCJcbiAgICAgICAgICAgIG5ld2xpbmsgPSBlbGVtICdsaW5rJyxcbiAgICAgICAgICAgICAgICBocmVmOiBocmVmXG4gICAgICAgICAgICAgICAgcmVsOiAgJ3N0eWxlc2hlZXQnXG4gICAgICAgICAgICAgICAgdHlwZTogJ3RleHQvY3NzJ1xuICAgICAgICAgICAgICAgIGlkOiAgICdzdHlsZS10aXRsZScgICAgICAgICAgIFxuICAgICAgICAgICAgbGluay5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZCBuZXdsaW5rLCBsaW5rXG4gICAgICAgIFxuICAgICAgICBwb3N0LmVtaXQgJ3NjaGVtZUNoYW5nZWQnLCBzY2hlbWVcblxubW9kdWxlLmV4cG9ydHMgPSBTY2hlbWVcbiJdfQ==
//# sourceURL=../coffee/scheme.coffee